import{r as p,j as g}from"./index-vJFL1dzY.js";import{A as te,C as ie,G as W,T as B}from"./HTMLText-CeZkFdUK.js";import{G as le,a as re}from"./GameOverScreen-DshzEBP7.js";const y=520,oe=480,n=40,h=13,w=12,ce=()=>{const m=p.useRef(null),[b,S]=p.useState("start"),[N,C]=p.useState(0),[X,D]=p.useState(3),[_,M]=p.useState(1),[j,$]=p.useState(()=>{const a=localStorage.getItem("frogger-highscore");return a?parseInt(a):0});p.useEffect(()=>{if(b!=="playing")return;const a=new te({width:y,height:oe,backgroundColor:2263842});m.current&&a.view instanceof Node&&m.current.appendChild(a.view);let E=!0,f=0,R=3,c=1,s=Math.floor(h/2),d=w-1,v=[],x=[!1,!1,!1,!1,!1],k=0;const F=[{type:"safe",speed:0,direction:0,vehicleCount:0,color:9498256},{type:"water",speed:2+c*.5,direction:1,vehicleCount:3,color:4286945},{type:"water",speed:1.5+c*.3,direction:-1,vehicleCount:2,color:4620980},{type:"water",speed:3+c*.7,direction:1,vehicleCount:4,color:4286945},{type:"water",speed:2.5+c*.5,direction:-1,vehicleCount:3,color:4620980},{type:"safe",speed:0,direction:0,vehicleCount:0,color:14596231},{type:"road",speed:3+c*.5,direction:-1,vehicleCount:2,color:6908265},{type:"road",speed:2+c*.3,direction:1,vehicleCount:3,color:7372944},{type:"road",speed:4+c*.7,direction:-1,vehicleCount:2,color:6908265},{type:"road",speed:2.5+c*.4,direction:1,vehicleCount:3,color:7372944},{type:"road",speed:3.5+c*.6,direction:-1,vehicleCount:2,color:6908265},{type:"safe",speed:0,direction:0,vehicleCount:0,color:2263842}],H=new ie;a.stage.addChild(H);for(let e=0;e<w;e++){const t=F[e],l=new W;if(t.type==="road"){l.beginFill(t.color),l.drawRect(0,0,y,n),l.endFill(),l.lineStyle(2,16777215,.8);for(let o=0;o<y;o+=40)l.moveTo(o+10,n/2),l.lineTo(o+30,n/2)}else if(t.type==="water"){l.beginFill(t.color),l.drawRect(0,0,y,n),l.endFill(),l.beginFill(14743295,.3);for(let o=0;o<y;o+=60)l.drawEllipse(o+15,n/2,20,8);l.endFill()}else if(l.beginFill(t.color),l.drawRect(0,0,y,n),l.endFill(),e===0)for(let o=0;o<5;o++){const i=50+o*80;l.beginFill(x[o]?16766720:3329330),l.drawEllipse(i,n/2,25,15),l.endFill()}l.y=e*n,H.addChild(l)}const r=new W;function P(){r.clear(),r.beginFill(3329330),r.drawEllipse(0,0,18,22),r.endFill(),r.beginFill(2263842),r.drawCircle(-8,-12,6),r.drawCircle(8,-12,6),r.endFill(),r.beginFill(0),r.drawCircle(-8,-12,3),r.drawCircle(8,-12,3),r.endFill(),r.beginFill(16777215),r.drawCircle(-7,-13,1),r.drawCircle(9,-13,1),r.endFill(),r.beginFill(2263842),r.drawEllipse(-15,5,8,12),r.drawEllipse(15,5,8,12),r.drawEllipse(-12,18,6,8),r.drawEllipse(12,18,6,8),r.endFill()}function z(){r.x=s*n+n/2,r.y=d*n+n/2}P(),z(),a.stage.addChild(r);function Y(e){const t=F[e],l=t.type==="water"?["log","turtle"]:["car","truck"],o=l[Math.floor(Math.random()*l.length)],i=new W;let u=1;if(o==="car")i.beginFill(Math.random()>.5?16729156:4474111),i.drawRoundedRect(-15,-8,30,16,4),i.endFill(),i.beginFill(8900331),i.drawRoundedRect(-12,-5,24,10,2),i.endFill(),i.beginFill(16777215),i.drawCircle(t.direction>0?15:-15,-6,2),i.drawCircle(t.direction>0?15:-15,6,2),i.endFill(),u=1;else if(o==="truck")i.beginFill(9127187),i.drawRoundedRect(-25,-10,50,20,4),i.endFill(),i.beginFill(10506797),i.drawRoundedRect(t.direction>0?10:-30,-8,20,16,3),i.endFill(),u=2;else if(o==="log"){i.beginFill(9127187),i.drawRoundedRect(-30,-6,60,12,6),i.endFill(),i.lineStyle(2,6636321);for(let O=-20;O<=20;O+=15)i.drawCircle(O,0,8);u=2}else i.beginFill(2263842),i.drawEllipse(0,0,20,15),i.endFill(),i.lineStyle(2,25600),i.drawEllipse(0,0,15,10),i.moveTo(-8,-3),i.lineTo(8,3),i.moveTo(-8,3),i.lineTo(8,-3),u=1;const V=t.direction>0?-u:h+u;return i.x=V*n+n/2,i.y=e*n+n/2,a.stage.addChild(i),{x:V,y:e,lane:e,sprite:i,type:o,width:u}}function I(){v=[];for(let e=0;e<w;e++){const t=F[e];if(t.vehicleCount>0)for(let l=0;l<t.vehicleCount;l++){const o=Y(e);o.x=l*(h/t.vehicleCount)+Math.random()*3,o.sprite.x=o.x*n+n/2,v.push(o)}}}function Z(){for(const e of v){const t=F[e.lane];e.x+=t.speed*t.direction*.02,t.direction>0&&e.x>h+e.width?e.x=-e.width:t.direction<0&&e.x<-e.width&&(e.x=h+e.width),e.sprite.x=e.x*n+n/2}}function J(){const e=F[d];if(e.type==="road"){for(const t of v)if(t.y===d&&Math.abs(t.x-s)<.8){L();return}}else if(e.type==="water"){let t=!1;for(const l of v)if(l.y===d&&Math.abs(l.x-s)<l.width*.8){t=!0,e.direction>0?s+=e.speed*.02:s-=e.speed*.02;break}if(!t){L();return}}if(s<0||s>=h){L();return}if(d===0){const t=Math.floor((s-1.5)/2);t>=0&&t<5&&!x[t]?(x[t]=!0,f+=100,C(f),s=Math.floor(h/2),d=w-1,x.every(l=>l)&&Q()):L()}}function L(){R--,D(R),R<=0?(E=!1,S("gameOver"),f>j&&($(f),localStorage.setItem("frogger-highscore",f.toString()))):(s=Math.floor(h/2),d=w-1)}function Q(){c++,M(c),f+=200,C(f),x=[!1,!1,!1,!1,!1],s=Math.floor(h/2),d=w-1,v.forEach(e=>a.stage.removeChild(e.sprite)),I()}const T=new B("Score: 0",{fontSize:20,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:2});T.x=10,T.y=10,a.stage.addChild(T);const G=new B("Lives: 3",{fontSize:20,fill:16729156,fontWeight:"bold",stroke:0,strokeThickness:2});G.x=150,G.y=10,a.stage.addChild(G);const A=new B("Level: 1",{fontSize:20,fill:4521796,fontWeight:"bold",stroke:0,strokeThickness:2});A.x=280,A.y=10,a.stage.addChild(A);function ee(){E&&(k>0&&k--,Z(),J(),z(),T.text=`Score: ${f}`,G.text=`Lives: ${R}`,A.text=`Level: ${c}`)}function K(e){if(!E||k>0)return;let t=!1;switch(e.code){case"ArrowUp":case"KeyW":d>0&&(d--,f+=10,C(f),t=!0);break;case"ArrowDown":case"KeyS":d<w-1&&(d++,t=!0);break;case"ArrowLeft":case"KeyA":s>0&&(s--,t=!0);break;case"ArrowRight":case"KeyD":s<h-1&&(s++,t=!0);break}t&&(k=5,z())}return window.addEventListener("keydown",K),I(),a.ticker.add(ee),()=>{E=!1,window.removeEventListener("keydown",K),m.current&&a.view instanceof Node&&m.current.removeChild(a.view),a.destroy()}},[b]);const U=()=>{S("playing"),C(0),D(3),M(1)},q=()=>{S("playing"),C(0),D(3),M(1)};return b==="start"?g.jsx(le,{title:"üê∏ FROGGER",description:"¬°Ayuda a la rana a cruzar el tr√°fico y el r√≠o!",highScore:j,instructions:[{title:"Controles",items:["‚Üë/W: Arriba","‚Üì/S: Abajo","‚Üê/A: Izquierda","‚Üí/D: Derecha"],icon:"üéÆ"},{title:"Objetivo",items:["üöó Evita los coches","üåä Usa troncos y tortugas","üéØ Llega a las 5 metas"],icon:"‚ö†Ô∏è"}],onStart:U,theme:{primary:"#32CD32",secondary:"#228B22",accent:"#90EE90",background:"linear-gradient(135deg, #228B22 0%, #32CD32 100%)"}}):b==="gameOver"?g.jsx(re,{score:N,highScore:j,onRestart:q,onMenu:()=>S("start"),theme:{primary:"#32CD32",secondary:"#228B22",accent:"#90EE90",background:"linear-gradient(135deg, #228B22 0%, #32CD32 100%)"},customStats:[{label:"Nivel Alcanzado",value:_},{label:"Vidas Restantes",value:X}]}):g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #228B22 0%, #32CD32 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[g.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üê∏ FROGGER"}),g.jsx("div",{ref:m,style:{border:"3px solid #32CD32",borderRadius:"10px"}}),g.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:g.jsx("p",{children:"‚Üë‚Üì‚Üê‚Üí o WASD para mover la rana"})})]})};export{ce as default};
