import{r as S,j as g}from"./index-vJFL1dzY.js";import{A as Q,C as X,G,T as K}from"./HTMLText-CeZkFdUK.js";import{G as ee,a as te}from"./GameOverScreen-DshzEBP7.js";const u=800,o=400,a=50,l=60,ae=()=>{const x=S.useRef(null),[R,v]=S.useState("start"),[B,A]=S.useState(0),[k,U]=S.useState(()=>{const r=localStorage.getItem("dino-highscore");return r?parseInt(r):0});S.useEffect(()=>{if(R!=="playing")return;const r=new Q({width:u,height:o,backgroundColor:8900331});x.current&&r.view instanceof Node&&x.current.appendChild(r.view);let b=!0,s=0,M=8,j=0,I=0;const N=new X;r.stage.addChild(N);function P(){const i=new G;return i.beginFill(16777215,.8),i.drawCircle(0,0,15),i.drawCircle(20,0,18),i.drawCircle(40,0,15),i.drawCircle(10,-8,12),i.drawCircle(30,-8,12),i.endFill(),i.x=u+Math.random()*200,i.y=50+Math.random()*100,i.alpha=.7,N.addChild(i),i}const c=new G;c.beginFill(9127187),c.drawRect(0,o-l,u,l),c.endFill(),c.lineStyle(2,6636321);for(let i=0;i<u;i+=40)c.moveTo(i,o-l),c.lineTo(i+20,o-l+10);r.stage.addChild(c);let y=o-l-a,D=0,f=!1,p=!1;const t=new G;function O(){t.clear(),p?(t.beginFill(2263842),t.drawRoundedRect(0,20,a+10,a-20,5),t.endFill(),t.beginFill(0),t.drawCircle(a-15,25,3),t.endFill(),t.beginFill(3329330),t.drawRoundedRect(-10,25,15,15,3),t.endFill()):(t.beginFill(2263842),t.drawRoundedRect(0,0,a,a,8),t.endFill(),t.beginFill(0),t.drawCircle(a-15,15,4),t.endFill(),f||(t.beginFill(3329330),t.drawRect(10,a,8,10),t.drawRect(a-18,a,8,10),t.endFill()),t.beginFill(3329330),t.drawRoundedRect(-8,15,12,20,3),t.endFill())}t.x=80,t.y=y,r.stage.addChild(t),O();let C=[],h=[];function Y(){const i=["cactus","rock","bird"],n=i[Math.floor(Math.random()*i.length)],e=new G;let w=30,d=50,m=o-l-d;if(n==="cactus"){e.beginFill(2263842),e.drawRect(0,0,25,60),e.drawRect(-10,20,15,4),e.drawRect(25,30,15,4),e.endFill(),e.beginFill(3329330);for(let F=0;F<6;F++)e.drawRect(5+F*3,F*10,2,8);e.endFill(),w=25,d=60}else n==="rock"?(e.beginFill(6908265),e.drawCircle(20,20,20),e.drawCircle(5,25,12),e.drawCircle(35,25,15),e.endFill(),e.beginFill(8421504),e.drawCircle(15,15,5),e.drawCircle(30,20,3),e.endFill(),w=40,d=40,m=o-l-d):(e.beginFill(9127187),e.drawEllipse(0,0,25,15),e.endFill(),e.beginFill(10506797),e.drawEllipse(-15,-5,20,8),e.drawEllipse(15,-5,20,8),e.endFill(),e.beginFill(16766720),e.drawPolygon([25,0,35,-3,35,3]),e.endFill(),w=50,d=30,m=o-l-120-Math.random()*60);return e.x=u,e.y=m,r.stage.addChild(e),{sprite:e,x:u,y:m,width:w,height:d,type:n}}const E=new K("Score: 0",{fontSize:24,fill:0,fontWeight:"bold",stroke:16777215,strokeThickness:2});E.x=20,E.y=20,r.stage.addChild(E);const T=new K("Speed: 1x",{fontSize:18,fill:0,fontWeight:"bold",stroke:16777215,strokeThickness:2});T.x=u-120,T.y=20,r.stage.addChild(T);function $(){!f&&!p&&b&&(f=!0,D=-16)}function H(i){!f&&b&&(p=i,O())}function q(){if(!b)return;I++,I>120+Math.random()*180&&(h.push(P()),I=0);for(let n=h.length-1;n>=0;n--)h[n].x-=2,h[n].x<-100&&(N.removeChild(h[n]),h.splice(n,1));j++;const i=Math.max(60,120-Math.floor(s/10)*5);j>i&&(C.push(Y()),j=0);for(let n=C.length-1;n>=0;n--){const e=C[n];e.x-=M,e.sprite.x=e.x,e.x<-e.width&&(r.stage.removeChild(e.sprite),C.splice(n,1),s++,A(s),s%10===0&&(M+=.5))}f&&(y+=D,D+=.8,y>=o-l-a&&(y=o-l-a,f=!1,D=0,O()),t.y=y);for(const n of C){const e=t.x+5,w=t.x+(p?a+5:a-5),d=t.y+(p?20:5),m=t.y+(a-5),F=n.x+5,J=n.x+n.width-5,V=n.y+5,Z=n.y+n.height-5;if(w>F&&e<J&&m>V&&d<Z){b=!1,v("gameOver"),s>k&&(U(s),localStorage.setItem("dino-highscore",s.toString()));break}}E.text=`Score: ${s}`,T.text=`Speed: ${(M/8).toFixed(1)}x`}function L(i){switch(i.code){case"Space":case"ArrowUp":case"KeyW":i.preventDefault(),$();break;case"ArrowDown":case"KeyS":i.preventDefault(),H(!0);break}}function W(i){switch(i.code){case"ArrowDown":case"KeyS":i.preventDefault(),H(!1);break}}return window.addEventListener("keydown",L),window.addEventListener("keyup",W),r.ticker.add(q),()=>{b=!1,window.removeEventListener("keydown",L),window.removeEventListener("keyup",W),x.current&&r.view instanceof Node&&x.current.removeChild(r.view),r.destroy()}},[R]);const z=()=>{v("playing"),A(0)},_=()=>{v("playing"),A(0)};if(R==="start")return g.jsx(ee,{title:"ðŸ¦• DINO RUN",description:"Â¡Ayuda al dinosaurio a sobrevivir esquivando obstÃ¡culos!",instructions:[{title:"Controles",items:["Espacio/â†‘/W: Saltar","â†“/S: Agacharse","(Mantener presionado para agacharse)"],icon:"ðŸŽ®"},{title:"PuntuaciÃ³n",items:["1 punto por obstÃ¡culo evitado","La velocidad aumenta cada 10 puntos"],icon:"ðŸ†"},{title:"ObstÃ¡culos",items:["ðŸŒµ Cactus: Salta por encima","ðŸª¨ Rocas: Salta por encima","ðŸ¦… PÃ¡jaros: AgÃ¡chate o salta"],icon:"âš ï¸"}],onStart:z,highScore:k,theme:{background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",accent:"linear-gradient(45deg, #228B22, #32CD32, #98FB98, #00FF00)",primary:"linear-gradient(45deg, #228B22, #32CD32)",text:"#2F4F4F"}});if(R==="gameOver"){const r=B===k&&B>0;return g.jsx(te,{score:B,highScore:k,onRestart:_,onMenu:()=>v("start"),isNewRecord:r,theme:{background:r?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #CD853F 0%, #8B4513 100%)",primary:"linear-gradient(45deg, #228B22, #32CD32)",secondary:"linear-gradient(45deg, #8B4513, #CD853F)"}})}return g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"#2F4F4F"},children:[g.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ðŸ¦• DINO RUN"}),g.jsx("div",{ref:x,style:{border:"3px solid #228B22",borderRadius:"10px"}}),g.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:g.jsx("p",{children:"Espacio/â†‘/W saltar, â†“/S agacharse"})})]})};export{ae as default};
