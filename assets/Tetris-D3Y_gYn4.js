import{r as x,j as r}from"./index-m1GFXamH.js";import{A as te,C as K,G as P,T as A}from"./HTMLText-BtEAuASx.js";const f=10,b=20,d=30,H=f*d,Y=b*d,ie=[65535,255,16753920,16776960,65280,16711680,8388736],J=[[[1,1,1,1]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]],[[1,1],[1,1]],[[0,1,1],[1,1,0]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]]];function B(){const s=Math.floor(Math.random()*J.length);return{shape:J[s],color:ie[s],x:Math.floor(f/2)-1,y:0}}const oe=()=>{const s=x.useRef(null),[V,v]=x.useState(0),[Z,T]=x.useState(0),[E,L]=x.useState(1),[z,F]=x.useState(!1),[M,N]=x.useState(!1);x.useEffect(()=>{if(!M||z)return;const l=new te({width:H+200,height:Y,backgroundColor:1710638});s.current&&l.view instanceof Node&&s.current.appendChild(l.view);let c=Array.from({length:b},()=>Array(f).fill(null)),t=B(),h=B(),j=!0,G=0,q=Math.max(5,30-E*2),y=0,w=0,g=1;const u=new K,o=new K;o.x=H+20,l.stage.addChild(u),l.stage.addChild(o);const p=new P;p.lineStyle(1,4473924,.3);for(let e=0;e<=f;e++)p.moveTo(e*d,0),p.lineTo(e*d,Y);for(let e=0;e<=b;e++)p.moveTo(0,e*d),p.lineTo(H,e*d);u.addChild(p);const C=new A("Score: 0",{fontSize:20,fill:16777215}),S=new A("Lines: 0",{fontSize:20,fill:16777215}),k=new A("Level: 1",{fontSize:20,fill:16777215}),O=new A("Next:",{fontSize:16,fill:16777215});C.y=20,S.y=50,k.y=80,O.y=120,o.addChild(C),o.addChild(S),o.addChild(k),o.addChild(O);function _(e,n,a){const i=new P;return i.beginFill(e),i.drawRoundedRect(0,0,d-2,d-2,3),i.endFill(),i.lineStyle(1,16777215,.3),i.drawRoundedRect(0,0,d-2,d-2,3),i.x=n*d,i.y=a*d,i}function I(){u.removeChildren(),u.addChild(p);for(let e=0;e<b;e++)for(let n=0;n<f;n++)c[e][n]!==null&&u.addChild(_(c[e][n],n,e));for(let e=0;e<t.shape.length;e++)for(let n=0;n<t.shape[e].length;n++)t.shape[e][n]&&u.addChild(_(t.color,t.x+n,t.y+e));o.removeChildren(),o.addChild(C),o.addChild(S),o.addChild(k),o.addChild(O);for(let e=0;e<h.shape.length;e++)for(let n=0;n<h.shape[e].length;n++)if(h.shape[e][n]){const a=new P;a.beginFill(h.color),a.drawRoundedRect(0,0,20,20,2),a.endFill(),a.x=n*22,a.y=150+e*22,o.addChild(a)}}function m(e=0,n=0,a=t.shape){for(let i=0;i<a.length;i++)for(let R=0;R<a[i].length;R++)if(a[i][R]){const W=t.x+R+e,D=t.y+i+n;if(W<0||W>=f||D>=b||D>=0&&c[D][W]!==null)return!0}return!1}function ee(){for(let e=0;e<t.shape.length;e++)for(let n=0;n<t.shape[e].length;n++)if(t.shape[e][n]){const a=t.x+n,i=t.y+e;i>=0&&(c[i][a]=t.color)}}function re(e){return e[0].map((n,a)=>e.map(i=>i[a])).reverse()}function ne(){let e=0;for(let n=b-1;n>=0;n--)c[n].every(a=>a!==null)&&(c.splice(n,1),c.unshift(Array(f).fill(null)),e++,n++);return e>0&&(w+=e,y+=e*100*g,w>=g*10&&(g++,q=Math.max(5,30-g*2)),T(w),v(y),L(g)),e}function U(){if(j){if(G++,G>q){if(G=0,!m(0,1))t.y++;else if(ee(),ne(),t=h,h=B(),m(0,0)){j=!1,F(!0);return}}C.text=`Score: ${y}`,S.text=`Lines: ${w}`,k.text=`Level: ${g}`,I(),requestAnimationFrame(U)}}function $(e){if(j){switch(e.key){case"ArrowLeft":case"a":case"A":m(-1,0)||t.x--;break;case"ArrowRight":case"d":case"D":m(1,0)||t.x++;break;case"ArrowDown":case"s":case"S":m(0,1)||(t.y++,y+=1,v(y));break;case"ArrowUp":case"w":case"W":case" ":const n=re(t.shape);m(0,0,n)||(t.shape=n);break}I()}}return window.addEventListener("keydown",$),I(),U(),()=>{j=!1,window.removeEventListener("keydown",$),s.current&&l.view instanceof Node&&s.current.removeChild(l.view),l.destroy()}},[M,z,E]);const Q=()=>{N(!0),F(!1),v(0),T(0),L(1)},X=()=>{F(!1),v(0),T(0),L(1)};return M?z?r.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",fontFamily:"Arial, sans-serif",color:"white",padding:"2rem"},children:r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[r.jsx("h1",{style:{fontSize:"3rem",margin:"0 0 1rem 0"},children:"ðŸŽ® Â¡GAME OVER!"}),r.jsxs("div",{style:{fontSize:"1.5rem",margin:"2rem 0"},children:[r.jsxs("p",{children:["ðŸ“Š PuntuaciÃ³n Final: ",r.jsx("strong",{children:V})]}),r.jsxs("p",{children:["ðŸ“ LÃ­neas Completadas: ",r.jsx("strong",{children:Z})]}),r.jsxs("p",{children:["â­ Nivel Alcanzado: ",r.jsx("strong",{children:E})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[r.jsx("button",{onClick:X,style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #ff6b6b, #4ecdc4)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"ðŸ”„ Reintentar"}),r.jsx("button",{onClick:()=>N(!1),style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #667eea, #764ba2)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"ðŸ  MenÃº Principal"})]})]})}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",minHeight:"100vh",fontFamily:"Arial, sans-serif",color:"white"},children:[r.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ðŸ§© TETRIS"}),r.jsx("div",{ref:s,style:{border:"2px solid #444",borderRadius:"10px"}}),r.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:r.jsx("p",{children:"Use â† â†’ A D para mover, â†“ S para bajar rÃ¡pido, â†‘ W Espacio para rotar"})})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",fontFamily:"Arial, sans-serif",color:"white",padding:"2rem"},children:r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",maxWidth:"600px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[r.jsx("h1",{style:{fontSize:"4rem",margin:"0 0 1rem 0",background:"linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffecd2)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"ðŸ§© TETRIS"}),r.jsx("p",{style:{fontSize:"1.2rem",margin:"1rem 0",opacity:.9},children:"Â¡El clÃ¡sico juego de bloques que caen!"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",margin:"2rem 0"},children:[r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#4ecdc4"},children:"ðŸŽ® Controles"}),r.jsx("p",{children:"â† â†’ A D: Mover pieza"}),r.jsx("p",{children:"â†“ S: CaÃ­da rÃ¡pida"}),r.jsx("p",{children:"â†‘ W Espacio: Rotar"})]}),r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#ff6b6b"},children:"ðŸ“Š PuntuaciÃ³n"}),r.jsx("p",{children:"LÃ­neas completas: +100 Ã— Nivel"}),r.jsx("p",{children:"CaÃ­da rÃ¡pida: +1 punto"}),r.jsx("p",{children:"Cada 10 lÃ­neas: +1 nivel"})]}),r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#45b7d1"},children:"ðŸŽ¯ Objetivo"}),r.jsx("p",{children:"Completa lÃ­neas horizontales"}),r.jsx("p",{children:"Evita que lleguen arriba"}),r.jsx("p",{children:"Â¡Alcanza el nivel mÃ¡s alto!"})]})]}),r.jsx("button",{onClick:Q,style:{padding:"1rem 3rem",fontSize:"1.5rem",background:"linear-gradient(45deg, #ff6b6b, #4ecdc4)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",fontWeight:"bold"},onMouseOver:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.3)"},onMouseOut:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)"},children:"ðŸš€ Â¡JUGAR TETRIS!"})]})})};export{oe as default};
