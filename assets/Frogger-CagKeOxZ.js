import{r as f,j as n}from"./index-DT6De0vj.js";import{P as d}from"./phaser-CtSIbetW.js";import{G as S,a as G}from"./GameOverScreen-DSWsITTW.js";const g=520,R=480,o=40,k=13,C=12;class E extends d.Scene{frog;vehicles;logs;turtles;goals;frogGridPos={x:6,y:11};isMoving=!1;moveTimer=0;score=0;lives=3;level=1;goalReached=[!1,!1,!1,!1,!1];onScoreUpdate;onLivesUpdate;onLevelUpdate;onGameOver;lanes=[];constructor(e,s,t,i){super("FroggerScene"),this.onScoreUpdate=e,this.onLivesUpdate=s,this.onLevelUpdate=t,this.onGameOver=i}init(e){this.level=e.level||1,this.score=e.score||0,this.lives=e.lives||3,this.goalReached=[!1,!1,!1,!1,!1],this.frogGridPos={x:6,y:11},this.initLanes()}initLanes(){const e=1+(this.level-1)*.1;this.lanes=[{type:"safe",speed:0,direction:0,vehicleCount:0,color:9498256},{type:"water",speed:2*e,direction:1,vehicleCount:3,color:4286945},{type:"water",speed:1.5*e,direction:-1,vehicleCount:2,color:4620980},{type:"water",speed:3*e,direction:1,vehicleCount:4,color:4286945},{type:"water",speed:2.5*e,direction:-1,vehicleCount:3,color:4620980},{type:"safe",speed:0,direction:0,vehicleCount:0,color:14596231},{type:"road",speed:3*e,direction:-1,vehicleCount:2,color:6908265},{type:"road",speed:2*e,direction:1,vehicleCount:3,color:7372944},{type:"road",speed:4*e,direction:-1,vehicleCount:2,color:6908265},{type:"road",speed:2.5*e,direction:1,vehicleCount:3,color:7372944},{type:"road",speed:3.5*e,direction:-1,vehicleCount:2,color:6908265},{type:"safe",speed:0,direction:0,vehicleCount:0,color:2263842}]}preload(){this.createTextures()}createTextures(){const e=this.make.graphics({x:0,y:0});e.fillStyle(3329330),e.fillEllipse(20,20,18,22),e.fillStyle(2263842),e.fillCircle(12,8,6),e.fillCircle(28,8,6),e.generateTexture("frog",40,40);const s=this.make.graphics({x:0,y:0});s.fillStyle(16729156),s.fillRoundedRect(0,5,40,30,4),s.fillStyle(8900331),s.fillRoundedRect(5,10,30,20,2),s.generateTexture("car",40,40);const t=this.make.graphics({x:0,y:0});t.fillStyle(9127187),t.fillRoundedRect(0,5,80,30,4),t.fillStyle(10506797),t.fillRoundedRect(60,8,15,24,2),t.generateTexture("truck",80,40);const i=this.make.graphics({x:0,y:0});i.fillStyle(9127187),i.fillRoundedRect(0,5,120,30,10),i.generateTexture("log",120,40);const r=this.make.graphics({x:0,y:0});r.fillStyle(2263842),r.fillEllipse(20,20,20,15),r.generateTexture("turtle",40,40);const l=this.make.graphics({x:0,y:0});l.fillStyle(3329330),l.fillEllipse(20,20,25,15),l.generateTexture("goal-empty",40,40),l.clear(),l.fillStyle(16766720),l.fillEllipse(20,20,25,15),l.generateTexture("goal-filled",40,40)}create(){this.lanes.forEach((e,s)=>{const t=this.add.graphics();if(t.fillStyle(e.color),t.fillRect(0,s*o,g,o),e.type==="road"){t.lineStyle(2,16777215,.5);for(let i=0;i<g;i+=40)t.moveTo(i+10,s*o+o/2),t.lineTo(i+30,s*o+o/2);t.strokePath()}}),this.logs=this.add.group(),this.turtles=this.add.group(),this.vehicles=this.add.group(),this.goals=this.add.group(),this.lanes.forEach((e,s)=>{if(e.vehicleCount>0){const t=g/e.vehicleCount;for(let i=0;i<e.vehicleCount;i++){const r=i*t+d.Math.Between(0,50),l=s*o+o/2;if(e.type==="water")if(s%2===0){const a=this.add.sprite(r,l,"log");a.setData("speed",e.speed*e.direction),this.logs.add(a)}else{const a=this.add.sprite(r,l,"turtle");a.setData("speed",e.speed*e.direction),this.turtles.add(a)}else if(e.type==="road"){const a=d.Math.RND.pick(["car","truck"]),h=this.add.sprite(r,l,a);h.setData("speed",e.speed*e.direction),e.direction===-1&&h.setFlipX(!0),this.vehicles.add(h)}}}});for(let e=0;e<5;e++){const s=50+e*80+30,t=this.add.sprite(s,o/2,"goal-empty");this.goals.add(t)}this.frog=this.add.sprite(this.frogGridPos.x*o+o/2,this.frogGridPos.y*o+o/2,"frog"),this.frog.setDepth(10),this.input.keyboard.on("keydown-UP",()=>this.move(0,-1)),this.input.keyboard.on("keydown-DOWN",()=>this.move(0,1)),this.input.keyboard.on("keydown-LEFT",()=>this.move(-1,0)),this.input.keyboard.on("keydown-RIGHT",()=>this.move(1,0)),this.input.keyboard.on("keydown-W",()=>this.move(0,-1)),this.input.keyboard.on("keydown-S",()=>this.move(0,1)),this.input.keyboard.on("keydown-A",()=>this.move(-1,0)),this.input.keyboard.on("keydown-D",()=>this.move(1,0))}move(e,s){if(this.isMoving)return;const t=this.frogGridPos.x+e,i=this.frogGridPos.y+s;t>=0&&t<k&&i>=0&&i<C&&(this.frogGridPos.x=t,this.frogGridPos.y=i,this.frog.x=t*o+o/2,this.frog.y=i*o+o/2,s<0&&(this.score+=10,this.onScoreUpdate(this.score)),i===0&&this.checkGoal(t))}checkGoal(e){let s=-1;this.goals.children.entries.forEach((t,i)=>{Math.abs(t.x-this.frog.x)<20&&(s=i)}),s!==-1&&!this.goalReached[s]?(this.goalReached[s]=!0,this.goals.children.entries[s].setTexture("goal-filled"),this.score+=100,this.onScoreUpdate(this.score),this.resetFrog(),this.goalReached.every(t=>t)&&this.levelUp()):this.loseLife()}update(){const e=s=>{s.x+=s.getData("speed");const t=s.width;s.getData("speed")>0&&s.x>g+t/2&&(s.x=-t/2),s.getData("speed")<0&&s.x<-t/2&&(s.x=g+t/2)};this.logs.children.entries.forEach(e),this.turtles.children.entries.forEach(e),this.vehicles.children.entries.forEach(e),this.checkCollisions()}checkCollisions(){const e=this.frog.getBounds(),s=this.lanes[this.frogGridPos.y];if(s.type==="road"){let t=!1;this.vehicles.children.entries.forEach(i=>{d.Geom.Intersects.RectangleToRectangle(e,i.getBounds())&&(t=!0)}),t&&this.loseLife()}else if(s.type==="water"){let t=!1,i=0;this.logs.children.entries.forEach(r=>{d.Geom.Intersects.RectangleToRectangle(e,r.getBounds())&&(t=!0,i=r.getData("speed"))}),this.turtles.children.entries.forEach(r=>{d.Geom.Intersects.RectangleToRectangle(e,r.getBounds())&&(t=!0,i=r.getData("speed"))}),t?(this.frog.x+=i,(this.frog.x<0||this.frog.x>g)&&this.loseLife()):this.loseLife()}}loseLife(){this.lives--,this.onLivesUpdate(this.lives),this.lives<=0?(this.scene.pause(),this.onGameOver(this.score)):this.resetFrog()}resetFrog(){this.frogGridPos={x:6,y:11},this.frog.x=this.frogGridPos.x*o+o/2,this.frog.y=this.frogGridPos.y*o+o/2}levelUp(){this.level++,this.score+=200,this.onLevelUpdate(this.level),this.onScoreUpdate(this.score),this.scene.restart({level:this.level,score:this.score,lives:this.lives})}}const T=()=>{const[p,e]=f.useState("start"),[s,t]=f.useState(0),[i,r]=f.useState(3),[l,a]=f.useState(1),[h,v]=f.useState(()=>{const y=localStorage.getItem("frogger-highscore");return y?parseInt(y):0}),u=f.useRef(null);f.useEffect(()=>{if(p==="playing"){const y={type:d.AUTO,width:g,height:R,parent:"phaser-game",backgroundColor:"#228B22",scene:new E(c=>t(c),c=>r(c),c=>a(c),c=>{t(c),c>h&&(v(c),localStorage.setItem("frogger-highscore",c.toString())),e("gameOver")})};return u.current=new d.Game(y),()=>{u.current&&(u.current.destroy(!0),u.current=null)}}},[p,h]);const m=()=>{e("playing"),t(0),r(3),a(1)},x=()=>{e("playing"),t(0),r(3),a(1)};return p==="start"?n.jsx(S,{title:"üê∏ FROGGER",description:"¬°Ayuda a la rana a cruzar el tr√°fico y el r√≠o!",highScore:h,instructions:[{title:"Controles",items:["‚Üë/W: Arriba","‚Üì/S: Abajo","‚Üê/A: Izquierda","‚Üí/D: Derecha"],icon:"üéÆ"},{title:"Objetivo",items:["üöó Evita los coches","üåä Usa troncos y tortugas","üéØ Llega a las 5 metas"],icon:"‚ö†Ô∏è"}],onStart:m,theme:{primary:"#32CD32",secondary:"#228B22",accent:"#90EE90",background:"linear-gradient(135deg, #228B22 0%, #32CD32 100%)"}}):p==="gameOver"?n.jsx(G,{score:s,highScore:h,onRestart:x,onMenu:()=>e("start"),theme:{primary:"#32CD32",secondary:"#228B22",accent:"#90EE90",background:"linear-gradient(135deg, #228B22 0%, #32CD32 100%)"},customStats:[{label:"Nivel Alcanzado",value:l},{label:"Vidas Restantes",value:i}]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #228B22 0%, #32CD32 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[n.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üê∏ FROGGER"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:g,marginBottom:"10px",fontWeight:"bold",fontSize:"1.2rem"},children:[n.jsxs("span",{children:["Score: ",s]}),n.jsxs("span",{children:["Level: ",l]}),n.jsxs("span",{children:["Lives: ",i]})]}),n.jsx("div",{id:"phaser-game",style:{border:"3px solid #32CD32",borderRadius:"10px",overflow:"hidden"}}),n.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:n.jsx("p",{children:"‚Üë‚Üì‚Üê‚Üí o WASD para mover la rana"})})]})};export{T as default};
