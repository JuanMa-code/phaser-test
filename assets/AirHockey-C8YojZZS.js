import{r as E,j as T}from"./index-vJFL1dzY.js";import{A as te,G as D}from"./HTMLText-CeZkFdUK.js";import{G as oe,a as ne}from"./GameOverScreen-DshzEBP7.js";const ie=()=>{const F=E.useRef(null),[j,X]=E.useState("instructions"),[O,P]=E.useState(0),[_,H]=E.useState(0),[N,I]=E.useState(null);E.useEffect(()=>{if(j!=="playing"||!F.current)return;const t=800,o=600,i=35,l=15,r=320,L=20,c=new te({width:t,height:o,backgroundColor:30654,antialias:!0});F.current.appendChild(c.view);let V=t/2,Y=o-100,W=!1;const n=new D;n.beginFill(19855),n.drawRect(0,0,t,o),n.endFill(),n.lineStyle(3,16777215),n.moveTo(0,o/2),n.lineTo(t,o/2),n.lineStyle(3,16777215),n.drawCircle(t/2,o/2,50),n.lineStyle(5,16711680),n.moveTo((t-r)/2,0),n.lineTo((t+r)/2,0),n.lineStyle(5,16711680),n.moveTo((t-r)/2,o),n.lineTo((t+r)/2,o),n.lineStyle(3,16777215),n.moveTo((t-r)/2,0),n.lineTo((t-r)/2,L),n.moveTo((t+r)/2,0),n.lineTo((t+r)/2,L),n.moveTo((t-r)/2,o),n.lineTo((t-r)/2,o-L),n.moveTo((t+r)/2,o),n.lineTo((t+r)/2,o-L),c.stage.addChild(n);const v=new D;v.beginFill(65280),v.drawCircle(0,0,i),v.endFill(),v.x=t/2,v.y=o-80,c.stage.addChild(v);const d=new D;d.beginFill(16711680),d.drawCircle(0,0,i),d.endFill(),d.x=t/2,d.y=80,c.stage.addChild(d);const e=new D;e.beginFill(3355443),e.drawCircle(0,0,l),e.endFill(),e.x=t/2,e.y=o/2,c.stage.addChild(e);let y=0,h=0,g=t/2,p=80;const Q=(u,s,m,a,f,b)=>{const M=a-u,S=f-s;return Math.sqrt(M*M+S*S)<m+b},U=(u,s,m=!1)=>{if(Q(e.x,e.y,l,u,s,i)){const a=e.x-u,f=e.y-s,b=Math.sqrt(a*a+f*f);if(b>0){const M=a/b,S=f/b,k=l+i-b;e.x+=M*k,e.y+=S*k;const x=m?12:15;if(m&&e.y<o/2){const w=t/2,G=o-50;if(e.y<100){const C=t/2;y=(e.x<C?-1:1)*x*.8,h=x*.6}else{const C=Math.atan2(G-e.y,w-e.x),R=(Math.random()-.5)*.6;y=Math.cos(C+R)*x,h=Math.sin(C+R)*x}}else y=M*x,h=S*x}}},$=()=>{const u=(t-r)/2,s=(t+r)/2;return e.y<=l&&e.x>=u&&e.x<=s?(P(m=>{const a=m+1;return a>=7&&(I("player"),X("gameOver"),W=!0),a}),z(),!0):e.y>=o-l&&e.x>=u&&e.x<=s?(H(m=>{const a=m+1;return a>=7&&(I("bot"),X("gameOver"),W=!0),a}),z(),!0):!1},z=()=>{e.x=t/2,e.y=o/2,y=0,h=0},ee=()=>{const s=Math.sqrt((e.x-d.x)**2+(e.y-d.y)**2),m=Math.sqrt(y**2+h**2),a=e.y<o/2,f=e.y<100,b=t/2;if(a&&f&&s<150)g=e.x<b?b+100:b-100,p=Math.max(80,e.y+40);else if(a&&s<120&&m<4&&!f){const x=t/2,w=o-30,G=Math.atan2(w-e.y,x-e.x),A=i+l+15,C=G+Math.PI;g=e.x+Math.cos(C)*A,p=e.y+Math.sin(C)*A;const R=Math.sin(Date.now()*.005)*25;g+=R}else if(a&&m>.8)f?(g=e.x,p=Math.max(120,e.y+50)):(g=e.x+y*.7,p=e.y+h*.7,p=Math.max(60,p-25));else if(a&&m<.8)f?(g=e.x+(Math.random()-.5)*30,p=Math.max(100,e.y+40)):(g=e.x+(Math.random()-.5)*50,p=Math.max(60,e.y-35));else if(h<-2&&e.y<o/2+50){const x=(e.y-100)/Math.abs(h),w=e.x+y*x;g=Math.max(i,Math.min(t-i,w)),p=100}else g=t/2+(e.x-t/2)*.4,p=90;p=Math.max(50,Math.min(o/2-i,p)),g=Math.max(i,Math.min(t-i,g));const M=g-d.x,S=p-d.y,k=Math.sqrt(M*M+S*S);if(k>3){const w=a&&s<100&&!f?6*1.5:6,G=M/k*w,A=S/k*w;d.x+=G,d.y+=A}},J=u=>{const s=c.view.getBoundingClientRect();V=u.clientX-s.left,Y=u.clientY-s.top},K=()=>{},Z=()=>{};return c.view.addEventListener("mousemove",J),c.view.addEventListener("mousedown",K),c.view.addEventListener("mouseup",Z),c.ticker.add(()=>{if(W)return;if(Y>o/2){const m=Math.max(i,Math.min(t-i,V)),a=Math.max(o/2+i,Math.min(o-i,Y));v.x=m,v.y=a}ee(),e.x+=y,e.y+=h,y*=.995,h*=.995,(e.x<=l||e.x>=t-l)&&(y=-y,e.x=Math.max(l,Math.min(t-l,e.x)));const u=(t-r)/2,s=(t+r)/2;(e.y<=l&&(e.x<u||e.x>s)||e.y>=o-l&&(e.x<u||e.x>s))&&(h=-h,e.y=Math.max(l,Math.min(o-l,e.y))),U(v.x,v.y,!1),U(d.x,d.y,!0),$()}),()=>{c.view.removeEventListener("mousemove",J),c.view.removeEventListener("mousedown",K),c.view.removeEventListener("mouseup",Z),c.destroy(!0)}},[j]);const q=()=>{X("playing"),P(0),H(0),I(null)},B=()=>{X("instructions"),P(0),H(0),I(null)};return j==="instructions"?T.jsx(oe,{title:"üèí AIR HOCKEY",description:"¬°Golpea el disco hacia la porter√≠a del oponente!",instructions:[{title:"Objetivo",items:["Golpea el disco negro hacia la porter√≠a del oponente","¬°Primer jugador en anotar 7 goles gana!"],icon:"üéØ"},{title:"Controles",items:["Mueve el mouse para controlar tu paddle verde","Solo puedes moverte en tu mitad de la mesa"],icon:"üïπÔ∏è"},{title:"Estrategia",items:["Defiende tu porter√≠a","Aprovecha los rebotes","El bot rojo es tu oponente"],icon:"üí°"}],onStart:q,theme:{primary:"#0077be",secondary:"#00a0d6",accent:"#4fc3f7",background:"linear-gradient(45deg, #0077be 0%, #00a0d6 50%, #4fc3f7 100%)"}}):j==="gameOver"?T.jsx(ne,{score:O,onRestart:q,onMenu:B,theme:{primary:"#0077be",secondary:"#00a0d6",accent:"#4fc3f7",background:"linear-gradient(45deg, #0077be 0%, #00a0d6 50%, #4fc3f7 100%)"},customStats:[{label:"Jugador",value:O},{label:"Bot",value:_},{label:"Resultado",value:N==="player"?"¬°VICTORIA!":"DERROTA"}]}):T.jsxs("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(45deg, #0077be 0%, #00a0d6 50%, #4fc3f7 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"Arial, sans-serif",gap:"1rem"},children:[T.jsxs("div",{style:{display:"flex",gap:"3rem",fontSize:"2rem",fontWeight:"bold",color:"white",background:"rgba(255, 255, 255, 0.15)",padding:"1rem 2rem",borderRadius:"20px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[T.jsxs("div",{style:{color:"#4caf50"},children:["Jugador: ",O]}),T.jsxs("div",{style:{color:"#f44336"},children:["Bot: ",_]})]}),T.jsx("div",{ref:F,style:{border:"4px solid white",borderRadius:"10px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"}}),T.jsx("button",{onClick:B,style:{padding:"0.8rem 1.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"25px",color:"white",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseOver:t=>{t.currentTarget.style.background="rgba(255, 255, 255, 0.3)"},onMouseOut:t=>{t.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},children:"‚Üê Volver al Men√∫"})]})};export{ie as default};
