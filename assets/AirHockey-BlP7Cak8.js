import{r as T,j as m}from"./index-DT6De0vj.js";import{P as u}from"./phaser-CtSIbetW.js";import{G as M,a as V}from"./GameOverScreen-DSWsITTW.js";const e=800,s=600,l=35,p=15,r=320,P=20;class G extends u.Scene{playerPaddle;botPaddle;puck;puckVx=0;puckVy=0;botTargetX=e/2;botTargetY=80;onScoreUpdate;onGameOver;playerScore=0;botScore=0;gameEnded=!1;constructor(t,o){super("AirHockeyScene"),this.onScoreUpdate=t,this.onGameOver=o}create(){this.cameras.main.setBackgroundColor("#0077be");const t=this.add.graphics();t.fillStyle(19855),t.fillRect(0,0,e,s),t.lineStyle(3,16777215),t.beginPath(),t.moveTo(0,s/2),t.lineTo(e,s/2),t.strokePath(),t.strokeCircle(e/2,s/2,50),t.lineStyle(5,16711680),t.beginPath(),t.moveTo((e-r)/2,0),t.lineTo((e+r)/2,0),t.strokePath(),t.beginPath(),t.moveTo((e-r)/2,s),t.lineTo((e+r)/2,s),t.strokePath(),t.lineStyle(3,16777215),t.beginPath(),t.moveTo((e-r)/2,0),t.lineTo((e-r)/2,P),t.moveTo((e+r)/2,0),t.lineTo((e+r)/2,P),t.moveTo((e-r)/2,s),t.lineTo((e-r)/2,s-P),t.moveTo((e+r)/2,s),t.lineTo((e+r)/2,s-P),t.strokePath(),this.playerPaddle=this.add.circle(e/2,s-80,l,65280),this.botPaddle=this.add.circle(e/2,80,l,16711680),this.puck=this.add.circle(e/2,s/2,p,3355443)}update(){if(this.gameEnded)return;const t=this.input.activePointer;if(t.y>s/2){const c=u.Math.Clamp(t.x,l,e-l),a=u.Math.Clamp(t.y,s/2+l,s-l);this.playerPaddle.x=c,this.playerPaddle.y=a}this.updateBot(),this.puck.x+=this.puckVx,this.puck.y+=this.puckVy,this.puckVx*=.995,this.puckVy*=.995,(this.puck.x<=p||this.puck.x>=e-p)&&(this.puckVx=-this.puckVx,this.puck.x=u.Math.Clamp(this.puck.x,p,e-p));const o=(e-r)/2,n=(e+r)/2;(this.puck.y<=p&&(this.puck.x<o||this.puck.x>n)||this.puck.y>=s-p&&(this.puck.x<o||this.puck.x>n))&&(this.puckVy=-this.puckVy,this.puck.y=u.Math.Clamp(this.puck.y,p,s-p)),this.handlePaddleCollision(this.playerPaddle,!1),this.handlePaddleCollision(this.botPaddle,!0),this.checkGoal()}updateBot(){const o=u.Math.Distance.Between(this.puck.x,this.puck.y,this.botPaddle.x,this.botPaddle.y),n=Math.sqrt(this.puckVx**2+this.puckVy**2),c=this.puck.y<s/2,a=this.puck.y<100,g=e/2;if(c&&a&&o<150){const h=this.puck.x<g?g+100:g-100;this.botTargetX=h,this.botTargetY=Math.max(80,this.puck.y+40)}else if(c&&o<120&&n<4&&!a){const i=e/2,h=s-30,b=Math.atan2(h-this.puck.y,i-this.puck.x),f=l+p+15,y=b+Math.PI;this.botTargetX=this.puck.x+Math.cos(y)*f,this.botTargetY=this.puck.y+Math.sin(y)*f,this.botTargetX+=Math.sin(Date.now()*.005)*25}else if(c&&n>.8)a?(this.botTargetX=this.puck.x,this.botTargetY=Math.max(120,this.puck.y+50)):(this.botTargetX=this.puck.x+this.puckVx*.7,this.botTargetY=this.puck.y+this.puckVy*.7,this.botTargetY=Math.max(60,this.botTargetY-25));else if(c&&n<.8)a?(this.botTargetX=this.puck.x+(Math.random()-.5)*30,this.botTargetY=Math.max(100,this.puck.y+40)):(this.botTargetX=this.puck.x+(Math.random()-.5)*50,this.botTargetY=Math.max(60,this.puck.y-35));else if(this.puckVy<-2&&this.puck.y<s/2+50){const i=(this.puck.y-100)/Math.abs(this.puckVy),h=this.puck.x+this.puckVx*i;this.botTargetX=u.Math.Clamp(h,l,e-l),this.botTargetY=100}else{const i=e/2+(this.puck.x-e/2)*.4;this.botTargetX=i,this.botTargetY=90}this.botTargetY=u.Math.Clamp(this.botTargetY,50,s/2-l),this.botTargetX=u.Math.Clamp(this.botTargetX,l,e-l);const d=this.botTargetX-this.botPaddle.x,x=this.botTargetY-this.botPaddle.y,k=Math.sqrt(d*d+x*x);if(k>3){const h=c&&o<100&&!a?6*1.5:6;this.botPaddle.x+=d/k*h,this.botPaddle.y+=x/k*h}}handlePaddleCollision(t,o){const n=this.puck.x-t.x,c=this.puck.y-t.y,a=Math.sqrt(n*n+c*c),g=p+l;if(a<g&&a>0){const d=n/a,x=c/a,k=g-a;this.puck.x+=d*k,this.puck.y+=x*k;const i=o?12:15;if(o&&this.puck.y<s/2){const h=e/2,b=s-50;if(this.puck.y<100){const y=e/2,S=this.puck.x<y?-1:1;this.puckVx=S*i*.8,this.puckVy=i*.6}else{const y=Math.atan2(b-this.puck.y,h-this.puck.x),S=(Math.random()-.5)*.6;this.puckVx=Math.cos(y+S)*i,this.puckVy=Math.sin(y+S)*i}}else this.puckVx=d*i,this.puckVy=x*i}}checkGoal(){const t=(e-r)/2,o=(e+r)/2;this.puck.y<=p&&this.puck.x>=t&&this.puck.x<=o?(this.playerScore++,this.onScoreUpdate(this.playerScore,this.botScore),this.playerScore>=7&&(this.gameEnded=!0,this.onGameOver("player")),this.resetPuck()):this.puck.y>=s-p&&this.puck.x>=t&&this.puck.x<=o&&(this.botScore++,this.onScoreUpdate(this.playerScore,this.botScore),this.botScore>=7&&(this.gameEnded=!0,this.onGameOver("bot")),this.resetPuck())}resetPuck(){this.puck.x=e/2,this.puck.y=s/2,this.puckVx=0,this.puckVy=0}}const R=()=>{const v=T.useRef(null),t=T.useRef(null),[o,n]=T.useState("instructions"),[c,a]=T.useState(0),[g,d]=T.useState(0),[x,k]=T.useState(null);T.useEffect(()=>{if(o!=="playing")return;const b={type:u.AUTO,width:e,height:s,parent:v.current||void 0,backgroundColor:"#0077be",scene:new G((f,y)=>{a(f),d(y)},f=>{k(f),n("gameOver")})};return t.current=new u.Game(b),()=>{t.current&&(t.current.destroy(!0),t.current=null)}},[o]);const i=()=>{n("playing"),a(0),d(0),k(null)},h=()=>{n("instructions"),a(0),d(0),k(null)};return o==="instructions"?m.jsx(M,{title:"üèí AIR HOCKEY",description:"¬°Golpea el disco hacia la porter√≠a del oponente!",instructions:[{title:"Objetivo",items:["Golpea el disco negro hacia la porter√≠a del oponente","¬°Primer jugador en anotar 7 goles gana!"],icon:"üéØ"},{title:"Controles",items:["Mueve el mouse para controlar tu paddle verde","Solo puedes moverte en tu mitad de la mesa"],icon:"üïπÔ∏è"},{title:"Estrategia",items:["Defiende tu porter√≠a","Aprovecha los rebotes","El bot rojo es tu oponente"],icon:"üí°"}],onStart:i,theme:{primary:"#0077be",secondary:"#00a0d6",accent:"#4fc3f7",background:"linear-gradient(45deg, #0077be 0%, #00a0d6 50%, #4fc3f7 100%)"}}):o==="gameOver"?m.jsx(V,{score:c,onRestart:i,onMenu:h,theme:{primary:"#0077be",secondary:"#00a0d6",accent:"#4fc3f7",background:"linear-gradient(45deg, #0077be 0%, #00a0d6 50%, #4fc3f7 100%)"},customStats:[{label:"Jugador",value:c},{label:"Bot",value:g},{label:"Resultado",value:x==="player"?"¬°VICTORIA!":"DERROTA"}]}):m.jsxs("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(45deg, #0077be 0%, #00a0d6 50%, #4fc3f7 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"Arial, sans-serif",gap:"1rem"},children:[m.jsxs("div",{style:{display:"flex",gap:"3rem",fontSize:"2rem",fontWeight:"bold",color:"white",background:"rgba(255, 255, 255, 0.15)",padding:"1rem 2rem",borderRadius:"20px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[m.jsxs("div",{style:{color:"#4caf50"},children:["Jugador: ",c]}),m.jsxs("div",{style:{color:"#f44336"},children:["Bot: ",g]})]}),m.jsx("div",{ref:v,style:{border:"4px solid white",borderRadius:"10px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",width:e,height:s}}),m.jsx("button",{onClick:h,style:{padding:"0.8rem 1.5rem",fontSize:"1rem",background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"25px",color:"white",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},onMouseOver:b=>{b.currentTarget.style.background="rgba(255, 255, 255, 0.3)"},onMouseOut:b=>{b.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},children:"‚Üê Volver al Men√∫"})]})};export{R as default};
