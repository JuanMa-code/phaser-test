import{r as h,j as u}from"./index-BfJr-EcP.js";import{A as H,G as w,T as M}from"./HTMLText-2Z_edudz.js";const l=800,f=600,p=4,T=8,L=1,R=120,P=()=>{const x=h.useRef(null),[A,v]=h.useState(0),[m,g]=h.useState(!1),e=h.useRef({player:{x:l/2,y:f/2,radius:15},enemies:[],bullets:[],keys:{w:!1,a:!1,s:!1,d:!1},mouseX:0,mouseY:0,spawnTimer:0,currentScore:0,shootCooldown:0});h.useEffect(()=>{if(m)return;const c=new H({width:l,height:f,backgroundColor:1710638});x.current&&c.view instanceof Node&&x.current.appendChild(c.view);function F(){c.stage.removeChildren();const t=new w;t.beginFill(5090295),t.drawCircle(e.current.player.x,e.current.player.y,e.current.player.radius),t.endFill();const a=e.current.mouseX-e.current.player.x,r=e.current.mouseY-e.current.player.y,i=Math.sqrt(a*a+r*r);if(i>0){const n=a/i,o=r/i;t.lineStyle(3,16777215),t.moveTo(e.current.player.x,e.current.player.y),t.lineTo(e.current.player.x+n*25,e.current.player.y+o*25)}c.stage.addChild(t),e.current.enemies.forEach(n=>{if(!n.alive)return;const o=new w;o.beginFill(16729943),o.drawCircle(n.x,n.y,n.radius),o.endFill();const y=30,S=4,B=n.hp/n.maxHp;o.beginFill(3355443),o.drawRect(n.x-y/2,n.y-n.radius-10,y,S),o.endFill(),o.beginFill(16739179),o.drawRect(n.x-y/2,n.y-n.radius-10,y*B,S),o.endFill(),c.stage.addChild(o)}),e.current.bullets.forEach(n=>{const o=new w;o.beginFill(16697943),o.drawCircle(n.x,n.y,n.radius),o.endFill(),c.stage.addChild(o)});const s=new M(`Score: ${e.current.currentScore}`,{fill:16777215,fontSize:20,fontWeight:"bold"});s.x=10,s.y=10,c.stage.addChild(s);const d=new M(`Enemies: ${e.current.enemies.filter(n=>n.alive).length}`,{fill:16777215,fontSize:16});d.x=10,d.y=40,c.stage.addChild(d)}function G(){const t=Math.floor(Math.random()*4);let a,r;switch(t){case 0:a=Math.random()*l,r=-20;break;case 1:a=l+20,r=Math.random()*f;break;case 2:a=Math.random()*l,r=f+20;break;case 3:a=-20,r=Math.random()*f;break;default:a=0,r=0}e.current.enemies.push({x:a,y:r,hp:3,maxHp:3,radius:12,alive:!0})}function j(){const t=e.current.player,a=e.current.keys;if(a.w&&t.y>t.radius&&(t.y-=p),a.s&&t.y<f-t.radius&&(t.y+=p),a.a&&t.x>t.radius&&(t.x-=p),a.d&&t.x<l-t.radius&&(t.x+=p),e.current.shootCooldown=Math.max(0,e.current.shootCooldown-1),e.current.shootCooldown===0){const r=e.current.mouseX-t.x,i=e.current.mouseY-t.y,s=Math.sqrt(r*r+i*i);if(s>0){const d=r/s,n=i/s;e.current.bullets.push({x:t.x,y:t.y,vx:d*T,vy:n*T,radius:4}),e.current.shootCooldown=15}}e.current.bullets=e.current.bullets.filter(r=>(r.x+=r.vx,r.y+=r.vy,r.x>-10&&r.x<l+10&&r.y>-10&&r.y<f+10)),e.current.enemies.forEach(r=>{if(!r.alive)return;const i=t.x-r.x,s=t.y-r.y,d=Math.sqrt(i*i+s*s);if(d>0){const n=i/d,o=s/d;r.x+=n*L,r.y+=o*L}}),e.current.bullets=e.current.bullets.filter(r=>{let i=!1;return e.current.enemies.forEach(s=>{if(!s.alive)return;const d=r.x-s.x,n=r.y-s.y;Math.sqrt(d*d+n*n)<r.radius+s.radius&&(s.hp--,i=!0,s.hp<=0&&(s.alive=!1,e.current.currentScore+=10,v(e.current.currentScore)))}),!i}),e.current.enemies.forEach(r=>{if(!r.alive)return;const i=t.x-r.x,s=t.y-r.y;Math.sqrt(i*i+s*s)<t.radius+r.radius&&g(!0)}),e.current.enemies=e.current.enemies.filter(r=>r.alive),e.current.spawnTimer--,e.current.spawnTimer<=0&&(G(),e.current.spawnTimer=R-Math.min(e.current.currentScore/10,80)),F()}function k(t){switch(t.key.toLowerCase()){case"w":e.current.keys.w=!0;break;case"a":e.current.keys.a=!0;break;case"s":e.current.keys.s=!0;break;case"d":e.current.keys.d=!0;break}}function E(t){switch(t.key.toLowerCase()){case"w":e.current.keys.w=!1;break;case"a":e.current.keys.a=!1;break;case"s":e.current.keys.s=!1;break;case"d":e.current.keys.d=!1;break}}function b(t){if(!(c.view instanceof HTMLCanvasElement))return;const a=c.view.getBoundingClientRect();e.current.mouseX=t.clientX-a.left,e.current.mouseY=t.clientY-a.top}window.addEventListener("keydown",k),window.addEventListener("keyup",E),c.view instanceof HTMLCanvasElement&&c.view.addEventListener("mousemove",b),e.current.spawnTimer=R;const C=()=>{m||(j(),requestAnimationFrame(C))};return C(),()=>{window.removeEventListener("keydown",k),window.removeEventListener("keyup",E),c.view instanceof HTMLCanvasElement&&c.view.removeEventListener("mousemove",b),c.destroy(!0,{children:!0})}},[m]);const z=()=>{g(!1),v(0),e.current.currentScore=0,e.current.enemies=[],e.current.bullets=[],e.current.player={x:l/2,y:f/2,radius:15}};return m?u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("h1",{style:{color:"#ff4757",fontSize:"3rem",marginBottom:"1rem"},children:"GAME OVER"}),u.jsxs("p",{style:{fontSize:"1.5rem",marginBottom:"2rem"},children:["Final Score: ",A]}),u.jsx("button",{onClick:z,style:{fontSize:"1.2rem",padding:"1rem 2rem",backgroundColor:"#4dabf7",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"1rem"},children:"Play Again"}),u.jsx("button",{onClick:()=>window.history.back(),style:{fontSize:"1.2rem",padding:"1rem 2rem",backgroundColor:"#747d8c",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Back to Menu"})]}):u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx("h1",{style:{marginBottom:"1rem",color:"#4dabf7"},children:"ðŸ¥” Brotato Style"}),u.jsx("div",{style:{marginBottom:"1rem",color:"#747d8c"},children:"Use WASD to move â€¢ Aim with mouse â€¢ Survive as long as you can!"}),u.jsx("div",{ref:x,style:{display:"inline-block",border:"2px solid #4dabf7",borderRadius:"8px",overflow:"hidden"}})]})};export{P as default};
