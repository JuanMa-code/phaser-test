import{r as g,j as h}from"./index-DT6De0vj.js";import{P as y}from"./phaser-CtSIbetW.js";import{G as b,a as G}from"./GameOverScreen-DSWsITTW.js";const c=800,f=400,t=50,l=60,C=1600,x=-700;class D extends y.Scene{dino;dinoGraphics;ground;obstacles;clouds;cursors;wasd;spaceKey;gameSpeed=400;score=0;isDucking=!1;obstacleTimer=0;cloudTimer=0;onScoreUpdate;onGameOver;constructor(i,s){super("DinoScene"),this.onScoreUpdate=i,this.onGameOver=s}create(){this.cameras.main.setBackgroundColor("#87CEEB");const i=this.make.graphics({x:0,y:0,add:!1});i.fillStyle(9127187),i.fillRect(0,0,c,l),i.lineStyle(2,6636321);for(let s=0;s<c;s+=40)i.moveTo(s,0),i.lineTo(s+20,10);i.strokePath(),i.generateTexture("ground",c,l),this.ground=this.add.tileSprite(c/2,f-l/2,c,l,"ground"),this.physics.add.existing(this.ground,!0),this.obstacles=this.physics.add.group(),this.clouds=this.add.group(),this.createDino(),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys(),this.wasd=this.input.keyboard.addKeys("W,S"),this.spaceKey=this.input.keyboard.addKey(y.Input.Keyboard.KeyCodes.SPACE)),this.physics.add.collider(this.dino,this.ground),this.physics.add.overlap(this.dino,this.obstacles,this.hitObstacle,void 0,this)}update(i,s){if(!this.dino.active)return;this.ground.tilePositionX+=this.gameSpeed*s/1e3,this.handleInput(),this.obstacleTimer+=s;const a=Math.max(1e3,2e3-Math.floor(this.score/10)*50);this.obstacleTimer>a&&(this.spawnObstacle(),this.obstacleTimer=0),this.cloudTimer+=s,this.cloudTimer>2e3+Math.random()*3e3&&(this.spawnCloud(),this.cloudTimer=0),this.obstacles.getChildren().forEach(o=>{o.x-=this.gameSpeed*s/1e3,o.x<-100&&(o.destroy(),this.score++,this.onScoreUpdate(this.score),this.score%10===0&&(this.gameSpeed+=20))}),this.clouds.getChildren().forEach(o=>{o.x-=this.gameSpeed*.5*s/1e3,o.x<-100&&o.destroy()}),this.drawDino()}createDino(){this.dino=this.add.container(80,f-l-t/2),this.dinoGraphics=this.add.graphics(),this.dino.add(this.dinoGraphics),this.physics.add.existing(this.dino);const i=this.dino.body;i.setGravityY(C),i.setCollideWorldBounds(!0),i.setSize(t,t),i.setOffset(-t/2,-t/2)}drawDino(){this.dinoGraphics.clear(),this.isDucking?(this.dinoGraphics.fillStyle(2263842),this.dinoGraphics.fillRoundedRect(-t/2,0,t+10,t-20,5),this.dinoGraphics.fillStyle(0),this.dinoGraphics.fillCircle(t/2-5,5,3),this.dinoGraphics.fillStyle(3329330),this.dinoGraphics.fillRoundedRect(-t/2-10,5,15,15,3)):(this.dinoGraphics.fillStyle(2263842),this.dinoGraphics.fillRoundedRect(-t/2,-t/2,t,t,8),this.dinoGraphics.fillStyle(0),this.dinoGraphics.fillCircle(t/2-15,-t/2+15,4),this.dino.body.touching.down&&(this.dinoGraphics.fillStyle(3329330),this.dinoGraphics.fillRect(-t/2+10,t/2,8,10),this.dinoGraphics.fillRect(t/2-18,t/2,8,10)),this.dinoGraphics.fillStyle(3329330),this.dinoGraphics.fillRoundedRect(-t/2-8,-t/2+15,12,20,3))}handleInput(){const i=this.dino.body,s=i.touching.down||i.blocked.down;(this.cursors.up.isDown||this.wasd.W.isDown||this.spaceKey.isDown)&&s&&(i.setVelocityY(x),this.isDucking=!1),(this.cursors.down.isDown||this.wasd.S.isDown)&&s?this.isDucking||(this.isDucking=!0,i.setSize(t+10,t-20),i.setOffset(-t/2,0)):this.isDucking&&!this.cursors.down.isDown&&!this.wasd.S.isDown&&(this.isDucking=!1,i.setSize(t,t),i.setOffset(-t/2,-t/2))}spawnObstacle(){const i=["cactus","rock","bird"],s=i[Math.floor(Math.random()*i.length)];let a=30,o=50,r=f-l-o/2;const e=this.add.graphics();if(s==="cactus"){e.fillStyle(2263842),e.fillRect(-12.5,-30,25,60),e.fillRect(-22.5,-10,15,4),e.fillRect(12.5,0,15,4),e.fillStyle(3329330);for(let u=0;u<6;u++)e.fillRect(-7.5+u*3,-30+u*10,2,8);a=25,o=60,r=f-l-30}else s==="rock"?(e.fillStyle(6908265),e.fillCircle(0,0,20),e.fillCircle(-15,5,12),e.fillCircle(15,5,15),e.fillStyle(8421504),e.fillCircle(-5,-5,5),e.fillCircle(10,0,3),a=40,o=40,r=f-l-20):(e.fillStyle(9127187),e.fillEllipse(0,0,25,15),e.fillStyle(10506797),e.fillEllipse(-15,-5,20,8),e.fillEllipse(15,-5,20,8),e.fillStyle(16766720),e.beginPath(),e.moveTo(25,0),e.lineTo(35,-3),e.lineTo(35,3),e.closePath(),e.fillPath(),a=50,o=30,r=f-l-60-Math.random()*60);e.x=c+50,e.y=r,this.physics.add.existing(e);const n=e.body;n.setAllowGravity(!1),n.setImmovable(!0),n.setSize(a,o),s==="cactus"?n.setOffset(-a/2,-o/2):s==="rock"?n.setOffset(-20,-20):n.setOffset(-25,-15),this.obstacles.add(e)}spawnCloud(){const i=this.add.graphics();i.fillStyle(16777215,.8),i.fillCircle(0,0,15),i.fillCircle(20,0,18),i.fillCircle(40,0,15),i.fillCircle(10,-8,12),i.fillCircle(30,-8,12),i.x=c+50,i.y=50+Math.random()*100,i.alpha=.7,this.clouds.add(i)}hitObstacle(){this.physics.pause(),this.dino.active=!1,this.onGameOver(this.score)}}const E=()=>{const m=g.useRef(null),i=g.useRef(null),[s,a]=g.useState("start"),[o,r]=g.useState(0),[e,n]=g.useState(()=>{const d=localStorage.getItem("dino-highscore");return d?parseInt(d):0});g.useEffect(()=>{if(s!=="playing")return;const d={type:y.AUTO,width:c,height:f,parent:m.current||void 0,backgroundColor:"#87CEEB",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:new D(p=>r(p),p=>{r(p),p>e&&(n(p),localStorage.setItem("dino-highscore",p.toString())),a("gameOver")})};return i.current=new y.Game(d),()=>{i.current&&(i.current.destroy(!0),i.current=null)}},[s]);const u=()=>{a("playing"),r(0)},S=()=>{a("playing"),r(0)};if(s==="start")return h.jsx(b,{title:"ðŸ¦• DINO RUN",description:"Â¡Ayuda al dinosaurio a sobrevivir esquivando obstÃ¡culos!",instructions:[{title:"Controles",items:["Espacio/â†‘/W: Saltar","â†“/S: Agacharse","(Mantener presionado para agacharse)"],icon:"ðŸŽ®"},{title:"PuntuaciÃ³n",items:["1 punto por obstÃ¡culo evitado","La velocidad aumenta cada 10 puntos"],icon:"ðŸ†"},{title:"ObstÃ¡culos",items:["ðŸŒµ Cactus: Salta por encima","ðŸª¨ Rocas: Salta por encima","ðŸ¦… PÃ¡jaros: AgÃ¡chate o salta"],icon:"âš ï¸"}],onStart:u,highScore:e,theme:{background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",accent:"linear-gradient(45deg, #228B22, #32CD32, #98FB98, #00FF00)",primary:"linear-gradient(45deg, #228B22, #32CD32)",text:"#2F4F4F"}});if(s==="gameOver"){const d=o===e&&o>0;return h.jsx(G,{score:o,highScore:e,onRestart:S,onMenu:()=>a("start"),isNewRecord:d,theme:{background:d?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #CD853F 0%, #8B4513 100%)",primary:"linear-gradient(45deg, #228B22, #32CD32)",secondary:"linear-gradient(45deg, #8B4513, #CD853F)"}})}return h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"#2F4F4F"},children:[h.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ðŸ¦• DINO RUN"}),h.jsx("div",{ref:m,style:{border:"3px solid #228B22",borderRadius:"10px"}}),h.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:h.jsx("p",{children:"Espacio/â†‘/W saltar, â†“/S agacharse"})})]})};export{E as default};
