import{r as E,j as u}from"./index-Dl9Mtil6.js";import{A as I,G as v,T as y}from"./HTMLText-BfyFZK-P.js";const x=800,p=600,C=4,G=8,R=.5,j=120,U=60,K=20,V=15,A=3,Z=()=>{const T=E.useRef(null),[W,P]=E.useState(0),[m,z]=E.useState(!1),e=E.useRef({player:{x:x/2,y:p/2,radius:15,level:1,exp:0,expToNext:100,damage:1},enemies:[],bullets:[],keys:{w:!1,a:!1,s:!1,d:!1},mouseX:0,mouseY:0,spawnTimer:0,currentScore:0,shootCooldown:0,gameTime:0,currentEnemySpeed:R,currentEnemyHP:A});E.useEffect(()=>{if(m)return;const a=new I({width:x,height:p,backgroundColor:1710638});T.current&&a.view instanceof Node&&T.current.appendChild(a.view);function D(){a.stage.removeChildren();const r=new v;r.beginFill(5090295),r.drawCircle(e.current.player.x,e.current.player.y,e.current.player.radius),r.endFill();const s=e.current.mouseX-e.current.player.x,l=e.current.mouseY-e.current.player.y,w=Math.sqrt(s*s+l*l);if(w>0){const n=s/w,c=l/w;r.lineStyle(3,16777215),r.moveTo(e.current.player.x,e.current.player.y),r.lineTo(e.current.player.x+n*25,e.current.player.y+c*25)}a.stage.addChild(r),e.current.enemies.forEach(n=>{if(!n.alive)return;const c=new v;c.beginFill(16729943),c.drawCircle(n.x,n.y,n.radius),c.endFill();const k=30,Y=4,q=n.hp/n.maxHp;c.beginFill(3355443),c.drawRect(n.x-k/2,n.y-n.radius-10,k,Y),c.endFill(),c.beginFill(16739179),c.drawRect(n.x-k/2,n.y-n.radius-10,k*q,Y),c.endFill();const b=new y(`${n.hp}/${n.maxHp}`,{fill:16777215,fontSize:10,fontWeight:"bold"});b.anchor.set(.5),b.x=n.x,b.y=n.y-n.radius-18,c.addChild(b),a.stage.addChild(c)}),e.current.bullets.forEach(n=>{const c=new v;c.beginFill(16697943),c.drawCircle(n.x,n.y,n.radius),c.endFill(),a.stage.addChild(c)});const g=new y(`Score: ${e.current.currentScore}`,{fill:16777215,fontSize:20,fontWeight:"bold"});g.x=10,g.y=10,a.stage.addChild(g);const t=new y(`Level: ${e.current.player.level}`,{fill:16697943,fontSize:18,fontWeight:"bold"});t.x=10,t.y=35,a.stage.addChild(t);const i=new y(`Damage: ${e.current.player.damage}`,{fill:16739179,fontSize:16,fontWeight:"bold"});i.x=120,i.y=37,a.stage.addChild(i);const o=200,d=8,f=e.current.player.exp/e.current.player.expToNext,h=new v;h.beginFill(3355443),h.drawRect(10,60,o,d),h.endFill(),a.stage.addChild(h);const S=new v;S.beginFill(65416),S.drawRect(10,60,o*f,d),S.endFill(),a.stage.addChild(S);const M=new y(`XP: ${e.current.player.exp}/${e.current.player.expToNext}`,{fill:16777215,fontSize:12});M.x=220,M.y=56,a.stage.addChild(M);const B=new y(`Enemies: ${e.current.enemies.filter(n=>n.alive).length}`,{fill:16777215,fontSize:16});B.x=10,B.y=75,a.stage.addChild(B);const H=new y(`Time: ${Math.floor(e.current.gameTime/60)}s`,{fill:16777215,fontSize:16});H.x=10,H.y=95,a.stage.addChild(H)}function $(){const r=Math.floor(Math.random()*4);let s,l;switch(r){case 0:s=Math.random()*x,l=-20;break;case 1:s=x+20,l=Math.random()*p;break;case 2:s=Math.random()*x,l=p+20;break;case 3:s=-20,l=Math.random()*p;break;default:s=0,l=0}e.current.enemies.push({x:s,y:l,hp:e.current.currentEnemyHP,maxHp:e.current.currentEnemyHP,radius:12,alive:!0})}function O(){const r=e.current.player,s=e.current.keys;e.current.gameTime++;const l=K*60,w=Math.floor(e.current.gameTime/l);e.current.currentEnemySpeed=R+w*.2,e.current.currentEnemyHP=Math.floor(A+w*1.5),m||(s.w&&r.y>r.radius&&(r.y-=C),s.s&&r.y<p-r.radius&&(r.y+=C),s.a&&r.x>r.radius&&(r.x-=C),s.d&&r.x<x-r.radius&&(r.x+=C));const g=Math.max(10,U-(r.level-1)*5);if(e.current.shootCooldown=Math.max(0,e.current.shootCooldown-1),e.current.shootCooldown===0){const t=e.current.mouseX-r.x,i=e.current.mouseY-r.y,o=Math.sqrt(t*t+i*i);if(o>0){const d=t/o,f=i/o;e.current.bullets.push({x:r.x,y:r.y,vx:d*G,vy:f*G,radius:4}),e.current.shootCooldown=g}}e.current.bullets=e.current.bullets.filter(t=>(t.x+=t.vx,t.y+=t.vy,t.x>-10&&t.x<x+10&&t.y>-10&&t.y<p+10)),e.current.enemies.forEach(t=>{if(!t.alive)return;const i=r.x-t.x,o=r.y-t.y,d=Math.sqrt(i*i+o*o);if(d>0){const f=i/d,h=o/d;t.x+=f*e.current.currentEnemySpeed,t.y+=h*e.current.currentEnemySpeed}}),e.current.bullets=e.current.bullets.filter(t=>{let i=!1;return e.current.enemies.forEach(o=>{if(!o.alive)return;const d=t.x-o.x,f=t.y-o.y;Math.sqrt(d*d+f*f)<t.radius+o.radius&&(o.hp-=r.damage,i=!0,o.hp<=0&&(o.alive=!1,e.current.currentScore+=10,P(e.current.currentScore),r.exp+=V,r.exp>=r.expToNext&&(r.level++,r.exp-=r.expToNext,r.expToNext=Math.floor(r.expToNext*1.2),r.damage++)))}),!i}),e.current.enemies.forEach(t=>{if(!t.alive)return;const i=r.x-t.x,o=r.y-t.y;Math.sqrt(i*i+o*o)<r.radius+t.radius&&(e.current.keys.w=!1,e.current.keys.a=!1,e.current.keys.s=!1,e.current.keys.d=!1,z(!0))}),e.current.enemies=e.current.enemies.filter(t=>t.alive),e.current.spawnTimer--,e.current.spawnTimer<=0&&($(),e.current.spawnTimer=j-Math.min(e.current.currentScore/10,80)),D()}function L(r){if(!m)switch(r.key.toLowerCase()){case"w":e.current.keys.w=!0;break;case"a":e.current.keys.a=!0;break;case"s":e.current.keys.s=!0;break;case"d":e.current.keys.d=!0;break}}function F(r){if(!m)switch(r.key.toLowerCase()){case"w":e.current.keys.w=!1;break;case"a":e.current.keys.a=!1;break;case"s":e.current.keys.s=!1;break;case"d":e.current.keys.d=!1;break}}function N(r){if(!(a.view instanceof HTMLCanvasElement))return;const s=a.view.getBoundingClientRect();e.current.mouseX=r.clientX-s.left,e.current.mouseY=r.clientY-s.top}window.addEventListener("keydown",L),window.addEventListener("keyup",F),a.view instanceof HTMLCanvasElement&&a.view.addEventListener("mousemove",N),e.current.spawnTimer=j;const _=()=>{m||(O(),requestAnimationFrame(_))};return _(),()=>{window.removeEventListener("keydown",L),window.removeEventListener("keyup",F),a.view instanceof HTMLCanvasElement&&a.view.removeEventListener("mousemove",N),a.destroy(!0,{children:!0})}},[m]);const X=()=>{z(!1),P(0),e.current.currentScore=0,e.current.enemies=[],e.current.bullets=[],e.current.gameTime=0,e.current.currentEnemySpeed=R,e.current.currentEnemyHP=A,e.current.player={x:x/2,y:p/2,radius:15,level:1,exp:0,expToNext:100,damage:1}};return m?u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("h1",{style:{color:"#ff4757",fontSize:"3rem",marginBottom:"1rem"},children:"GAME OVER"}),u.jsxs("p",{style:{fontSize:"1.5rem",marginBottom:"2rem"},children:["Final Score: ",W]}),u.jsx("button",{onClick:X,style:{fontSize:"1.2rem",padding:"1rem 2rem",backgroundColor:"#4dabf7",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"1rem"},children:"Play Again"}),u.jsx("button",{onClick:()=>window.history.back(),style:{fontSize:"1.2rem",padding:"1rem 2rem",backgroundColor:"#747d8c",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Back to Menu"})]}):u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx("h1",{style:{marginBottom:"1rem",color:"#4dabf7"},children:"ðŸ¥” Brotato Style"}),u.jsx("div",{style:{marginBottom:"1rem",color:"#747d8c"},children:"Use WASD to move â€¢ Aim with mouse â€¢ Survive as long as you can!"}),u.jsx("div",{ref:T,style:{display:"inline-block",border:"2px solid #4dabf7",borderRadius:"8px",overflow:"hidden"}})]})};export{Z as default};
