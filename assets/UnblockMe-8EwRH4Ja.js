import{r as b,j as R}from"./index-Ctfk8T5L.js";import{A as M,G as x,a as F}from"./HTMLText-BG97J-0P.js";const d=6,f=6,o=64,L=[{x:0,y:2,w:2,h:1,color:16724787,movable:"h",main:!0},{x:0,y:0,w:3,h:1,color:10066329,movable:"h"},{x:3,y:0,w:1,h:3,color:10066329,movable:"v"},{x:4,y:0,w:2,h:1,color:10066329,movable:"h"},{x:2,y:1,w:1,h:2,color:10066329,movable:"v"},{x:2,y:3,w:2,h:1,color:10066329,movable:"h"},{x:0,y:4,w:1,h:2,color:10066329,movable:"v"},{x:1,y:4,w:2,h:1,color:10066329,movable:"h"},{x:3,y:4,w:1,h:2,color:10066329,movable:"v"},{x:4,y:4,w:2,h:1,color:10066329,movable:"h"},{x:1,y:5,w:2,h:1,color:10066329,movable:"h"}],H=()=>{const m=b.useRef(null);return b.useEffect(()=>{const r=new M({width:d*o,height:f*o,backgroundColor:16119260});m.current&&r.view instanceof Node&&m.current.appendChild(r.view);let s=L.map(e=>({...e})),w=null,h={x:0,y:0},v=!1;function u(){r.stage.removeChildren();for(let e=0;e<f;e++)for(let n=0;n<d;n++){const t=new x;t.lineStyle(1,13421772),t.beginFill(16119260),t.drawRect(0,0,o,o),t.endFill(),t.x=n*o,t.y=e*o,r.stage.addChild(t)}if(s.forEach((e,n)=>{const t=new x;t.beginFill(e.color),t.drawRoundedRect(0,0,e.w*o-8,e.h*o-8,16),t.endFill(),t.x=e.x*o+4,t.y=e.y*o+4,r.stage.addChild(t),n===w&&(t.lineStyle(4,49151),t.drawRoundedRect(0,0,e.w*o-8,e.h*o-8,16))}),v){const e="Â¡Has ganado! Pulsa espacio para reiniciar",n=new F(e,{fill:43520,fontSize:24}),t=n.width,a=n.height,l=16,i=new x;i.beginFill(16777215,.85),i.drawRect((d*o-t)/2-l,(f*o-a)/2-l,t+l*2,a+l*2),i.endFill(),r.stage.addChild(i),n.x=(d*o-t)/2,n.y=(f*o-a)/2,r.stage.addChild(n)}}function C(e,n,t,a,l){for(let i=0;i<s.length;i++){if(i===l)continue;const c=s[i];if(e<c.x+c.w&&e+t>c.x&&n<c.y+c.h&&n+a>c.y)return!1}return e>=0&&n>=0&&e+t<=d&&n+a<=f}function y(e){if(v||!(r.view instanceof HTMLCanvasElement))return;const n=r.view.getBoundingClientRect(),t=e.clientX-n.left,a=e.clientY-n.top;for(let l=0;l<s.length;l++){const i=s[l];if(t>=i.x*o&&t<=(i.x+i.w)*o&&a>=i.y*o&&a<=(i.y+i.h)*o){w=l,h.x=t-i.x*o,h.y=a-i.y*o;break}}}function p(e){if(w===null||v)return;const n=s[w];if(!(r.view instanceof HTMLCanvasElement))return;const t=r.view.getBoundingClientRect(),a=e.clientX-t.left,l=e.clientY-t.top;let i=n.x,c=n.y;n.movable==="h"?i=Math.round((a-h.x)/o):c=Math.round((l-h.y)/o),C(i,c,n.w,n.h,w)&&(n.x=i,n.y=c,u())}function g(){w=null;const e=s.find(n=>n.main);e&&e.x+e.w===d&&(v=!0,u())}function E(e){v&&e.code==="Space"&&(s=L.map(n=>({...n})),v=!1,u())}return r.view instanceof HTMLCanvasElement&&(r.view.addEventListener("pointerdown",y),r.view.addEventListener("pointermove",p),r.view.addEventListener("pointerup",g)),window.addEventListener("keydown",E),u(),()=>{r.view instanceof HTMLCanvasElement&&(r.view.removeEventListener("pointerdown",y),r.view.removeEventListener("pointermove",p),r.view.removeEventListener("pointerup",g)),window.removeEventListener("keydown",E),r.destroy(!0,{children:!0})}},[]),R.jsx("div",{ref:m,style:{width:d*o,height:f*o+48,margin:"auto"}})};export{H as default};
