import{r as v,j as u}from"./index-fqapEabv.js";import{A as $,G as E,T as y}from"./HTMLText-B2fYd3Bg.js";const x=800,p=600,b=4,H=8,B=.5,P=120,q=60,I=30,U=15,J=()=>{const C=v.useRef(null),[Y,A]=v.useState(0),[m,L]=v.useState(!1),e=v.useRef({player:{x:x/2,y:p/2,radius:15,level:1,exp:0,expToNext:100,damage:1},enemies:[],bullets:[],keys:{w:!1,a:!1,s:!1,d:!1},mouseX:0,mouseY:0,spawnTimer:0,currentScore:0,shootCooldown:0,gameTime:0,currentEnemySpeed:B});v.useEffect(()=>{if(m)return;const n=new $({width:x,height:p,backgroundColor:1710638});C.current&&n.view instanceof Node&&C.current.appendChild(n.view);function X(){n.stage.removeChildren();const r=new E;r.beginFill(5090295),r.drawCircle(e.current.player.x,e.current.player.y,e.current.player.radius),r.endFill();const o=e.current.mouseX-e.current.player.x,l=e.current.mouseY-e.current.player.y,w=Math.sqrt(o*o+l*l);if(w>0){const s=o/w,c=l/w;r.lineStyle(3,16777215),r.moveTo(e.current.player.x,e.current.player.y),r.lineTo(e.current.player.x+s*25,e.current.player.y+c*25)}n.stage.addChild(r),e.current.enemies.forEach(s=>{if(!s.alive)return;const c=new E;c.beginFill(16729943),c.drawCircle(s.x,s.y,s.radius),c.endFill();const S=30,G=4,O=s.hp/s.maxHp;c.beginFill(3355443),c.drawRect(s.x-S/2,s.y-s.radius-10,S,G),c.endFill(),c.beginFill(16739179),c.drawRect(s.x-S/2,s.y-s.radius-10,S*O,G),c.endFill(),n.stage.addChild(c)}),e.current.bullets.forEach(s=>{const c=new E;c.beginFill(16697943),c.drawCircle(s.x,s.y,s.radius),c.endFill(),n.stage.addChild(c)});const g=new y(`Score: ${e.current.currentScore}`,{fill:16777215,fontSize:20,fontWeight:"bold"});g.x=10,g.y=10,n.stage.addChild(g);const t=new y(`Level: ${e.current.player.level}`,{fill:16697943,fontSize:18,fontWeight:"bold"});t.x=10,t.y=35,n.stage.addChild(t);const i=new y(`Damage: ${e.current.player.damage}`,{fill:16739179,fontSize:16,fontWeight:"bold"});i.x=120,i.y=37,n.stage.addChild(i);const a=200,d=8,f=e.current.player.exp/e.current.player.expToNext,h=new E;h.beginFill(3355443),h.drawRect(10,60,a,d),h.endFill(),n.stage.addChild(h);const k=new E;k.beginFill(65416),k.drawRect(10,60,a*f,d),k.endFill(),n.stage.addChild(k);const T=new y(`XP: ${e.current.player.exp}/${e.current.player.expToNext}`,{fill:16777215,fontSize:12});T.x=220,T.y=56,n.stage.addChild(T);const M=new y(`Enemies: ${e.current.enemies.filter(s=>s.alive).length}`,{fill:16777215,fontSize:16});M.x=10,M.y=75,n.stage.addChild(M);const R=new y(`Time: ${Math.floor(e.current.gameTime/60)}s`,{fill:16777215,fontSize:16});R.x=10,R.y=95,n.stage.addChild(R)}function D(){const r=Math.floor(Math.random()*4);let o,l;switch(r){case 0:o=Math.random()*x,l=-20;break;case 1:o=x+20,l=Math.random()*p;break;case 2:o=Math.random()*x,l=p+20;break;case 3:o=-20,l=Math.random()*p;break;default:o=0,l=0}e.current.enemies.push({x:o,y:l,hp:3,maxHp:3,radius:12,alive:!0})}function W(){const r=e.current.player,o=e.current.keys;e.current.gameTime++;const l=I*60,w=Math.floor(e.current.gameTime/l);e.current.currentEnemySpeed=B+w*.2,m||(o.w&&r.y>r.radius&&(r.y-=b),o.s&&r.y<p-r.radius&&(r.y+=b),o.a&&r.x>r.radius&&(r.x-=b),o.d&&r.x<x-r.radius&&(r.x+=b));const g=Math.max(10,q-(r.level-1)*5);if(e.current.shootCooldown=Math.max(0,e.current.shootCooldown-1),e.current.shootCooldown===0){const t=e.current.mouseX-r.x,i=e.current.mouseY-r.y,a=Math.sqrt(t*t+i*i);if(a>0){const d=t/a,f=i/a;e.current.bullets.push({x:r.x,y:r.y,vx:d*H,vy:f*H,radius:4}),e.current.shootCooldown=g}}e.current.bullets=e.current.bullets.filter(t=>(t.x+=t.vx,t.y+=t.vy,t.x>-10&&t.x<x+10&&t.y>-10&&t.y<p+10)),e.current.enemies.forEach(t=>{if(!t.alive)return;const i=r.x-t.x,a=r.y-t.y,d=Math.sqrt(i*i+a*a);if(d>0){const f=i/d,h=a/d;t.x+=f*e.current.currentEnemySpeed,t.y+=h*e.current.currentEnemySpeed}}),e.current.bullets=e.current.bullets.filter(t=>{let i=!1;return e.current.enemies.forEach(a=>{if(!a.alive)return;const d=t.x-a.x,f=t.y-a.y;Math.sqrt(d*d+f*f)<t.radius+a.radius&&(a.hp-=r.damage,i=!0,a.hp<=0&&(a.alive=!1,e.current.currentScore+=10,A(e.current.currentScore),r.exp+=U,r.exp>=r.expToNext&&(r.level++,r.exp-=r.expToNext,r.expToNext=Math.floor(r.expToNext*1.2),r.damage++)))}),!i}),e.current.enemies.forEach(t=>{if(!t.alive)return;const i=r.x-t.x,a=r.y-t.y;Math.sqrt(i*i+a*a)<r.radius+t.radius&&(e.current.keys.w=!1,e.current.keys.a=!1,e.current.keys.s=!1,e.current.keys.d=!1,L(!0))}),e.current.enemies=e.current.enemies.filter(t=>t.alive),e.current.spawnTimer--,e.current.spawnTimer<=0&&(D(),e.current.spawnTimer=P-Math.min(e.current.currentScore/10,80)),X()}function z(r){if(!m)switch(r.key.toLowerCase()){case"w":e.current.keys.w=!0;break;case"a":e.current.keys.a=!0;break;case"s":e.current.keys.s=!0;break;case"d":e.current.keys.d=!0;break}}function F(r){if(!m)switch(r.key.toLowerCase()){case"w":e.current.keys.w=!1;break;case"a":e.current.keys.a=!1;break;case"s":e.current.keys.s=!1;break;case"d":e.current.keys.d=!1;break}}function N(r){if(!(n.view instanceof HTMLCanvasElement))return;const o=n.view.getBoundingClientRect();e.current.mouseX=r.clientX-o.left,e.current.mouseY=r.clientY-o.top}window.addEventListener("keydown",z),window.addEventListener("keyup",F),n.view instanceof HTMLCanvasElement&&n.view.addEventListener("mousemove",N),e.current.spawnTimer=P;const _=()=>{m||(W(),requestAnimationFrame(_))};return _(),()=>{window.removeEventListener("keydown",z),window.removeEventListener("keyup",F),n.view instanceof HTMLCanvasElement&&n.view.removeEventListener("mousemove",N),n.destroy(!0,{children:!0})}},[m]);const j=()=>{L(!1),A(0),e.current.currentScore=0,e.current.enemies=[],e.current.bullets=[],e.current.gameTime=0,e.current.currentEnemySpeed=B,e.current.player={x:x/2,y:p/2,radius:15,level:1,exp:0,expToNext:100,damage:1}};return m?u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("h1",{style:{color:"#ff4757",fontSize:"3rem",marginBottom:"1rem"},children:"GAME OVER"}),u.jsxs("p",{style:{fontSize:"1.5rem",marginBottom:"2rem"},children:["Final Score: ",Y]}),u.jsx("button",{onClick:j,style:{fontSize:"1.2rem",padding:"1rem 2rem",backgroundColor:"#4dabf7",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"1rem"},children:"Play Again"}),u.jsx("button",{onClick:()=>window.history.back(),style:{fontSize:"1.2rem",padding:"1rem 2rem",backgroundColor:"#747d8c",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Back to Menu"})]}):u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx("h1",{style:{marginBottom:"1rem",color:"#4dabf7"},children:"ðŸ¥” Brotato Style"}),u.jsx("div",{style:{marginBottom:"1rem",color:"#747d8c"},children:"Use WASD to move â€¢ Aim with mouse â€¢ Survive as long as you can!"}),u.jsx("div",{ref:C,style:{display:"inline-block",border:"2px solid #4dabf7",borderRadius:"8px",overflow:"hidden"}})]})};export{J as default};
