import{r as g,j as s}from"./index-DT6De0vj.js";import{G as J,a as K}from"./GameOverScreen-DSWsITTW.js";const l=9,m=3,X={F√°cil:[40,47],Medio:[34,38],Dif√≠cil:[28,32],Experto:[22,26]};function v(i){return i.map(n=>[...n])}function E(){return Array.from({length:l},()=>Array(l).fill(0))}function D(i){const n=[...i];for(let t=n.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[n[t],n[a]]=[n[a],n[t]]}return n}function W(i,n,t,a){for(let c=0;c<l;c++)if(i[n][c]===a||i[c][t]===a)return!1;const x=Math.floor(n/m)*m,h=Math.floor(t/m)*m;for(let c=0;c<m;c++)for(let b=0;b<m;b++)if(i[x+c][h+b]===a)return!1;return!0}function Y(i){for(let n=0;n<l;n++)for(let t=0;t<l;t++)if(i[n][t]===0)return[n,t];return null}function Z(i,n=2){const t=v(i);let a=0;function x(){const h=Y(t);if(!h)return a++,a>=n;const[c,b]=h;for(const d of D([1,2,3,4,5,6,7,8,9]))if(W(t,c,b,d)){if(t[c][b]=d,x())return!0;t[c][b]=0}return!1}return x(),a}function q(){const i=E();function n(t=0){if(t===l*l)return!0;const a=Math.floor(t/l),x=t%l;for(const h of D([1,2,3,4,5,6,7,8,9]))if(W(i,a,x,h)){if(i[a][x]=h,n(t+1))return!0;i[a][x]=0}return!1}return n(),i}function Q(i){const n=q(),t=v(n),[a,x]=X[i],h=Math.floor(a+Math.random()*(x-a+1));let c=l*l-h;const b=D(Array.from({length:l*l},(d,S)=>S));for(const d of b){if(c<=0)break;const S=Math.floor(d/l),k=d%l,M=t[S][k];if(M===0)continue;t[S][k]=0,Z(t,2)!==1?t[S][k]=M:c--}return{puzzle:t,solution:n}}const ee={minHeight:"100dvh",background:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"24px",color:"#fff",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},R={background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:16,padding:16,backdropFilter:"blur(8px)",boxShadow:"0 10px 30px rgba(0,0,0,0.25)"},te={display:"grid",gridTemplateColumns:"repeat(9, 48px)",gridTemplateRows:"repeat(9, 48px)",gap:0,background:"#111827",padding:8,borderRadius:12,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.2), 0 12px 24px rgba(0,0,0,0.35)"},re={width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:700,cursor:"pointer",userSelect:"none",position:"relative",background:"#1f2937",color:"#e5e7eb"};function ne(i,n){return{borderTop:i%3===0?"2px solid #94a3b8":"1px solid #374151",borderLeft:n%3===0?"2px solid #94a3b8":"1px solid #374151",borderRight:(n+1)%3===0?"2px solid #94a3b8":"1px solid #374151",borderBottom:(i+1)%3===0?"2px solid #94a3b8":"1px solid #374151"}}const oe={display:"grid",gridTemplateColumns:"repeat(5, 48px)",gridTemplateRows:"repeat(2, 48px)",gap:8},w={...R,padding:"10px 14px",borderRadius:10,background:"rgba(255,255,255,0.15)",cursor:"pointer",color:"#fff",fontWeight:700,textAlign:"center"},$={...R,padding:"8px 12px",borderRadius:999,display:"inline-flex",alignItems:"center",gap:8},ae=()=>{const[i,n]=g.useState("start"),[t,a]=g.useState("Medio"),[x,h]=g.useState(()=>E()),[c,b]=g.useState(()=>E()),[d,S]=g.useState(()=>E()),[k,M]=g.useState(()=>Array.from({length:l},()=>Array(l).fill(!1))),[f,j]=g.useState(null),[A,N]=g.useState(!0),[T,P]=g.useState(null),[B,V]=g.useState(Date.now());g.useEffect(()=>{if(i!=="playing")return;const e=setInterval(()=>V(Date.now()),1e3);return()=>clearInterval(e)},[i]);const I=g.useMemo(()=>{if(!T)return"00:00";const e=Math.floor((B-T)/1e3),o=String(Math.floor(e/60)).padStart(2,"0"),r=String(e%60).padStart(2,"0");return`${o}:${r}`},[B,T]);function G(){U(t),n("playing")}function U(e){const{puzzle:o,solution:r}=Q(e),u=o.map(y=>y.map(p=>p!==0));h(o),b(r),S(v(o)),M(u),j(null),a(e),P(Date.now())}function F(e){if(!f)return;const{r:o,c:r}=f;if(k[o][r])return;const u=v(d);u[o][r]=e,S(u)}function L(){if(!f)return;const{r:e,c:o}=f;if(k[e][o])return;const r=v(d);r[e][o]=0,S(r)}function _(e,o,r){if(r===0)return!1;for(let p=0;p<l;p++)if(p!==o&&d[e][p]===r||p!==e&&d[p][o]===r)return!0;const u=Math.floor(e/m)*m,y=Math.floor(o/m)*m;for(let p=0;p<m;p++)for(let C=0;C<m;C++){const z=u+p,O=y+C;if((z!==e||O!==o)&&d[z][O]===r)return!0}return!1}g.useEffect(()=>{if(i==="playing"){for(let e=0;e<l;e++)for(let o=0;o<l;o++){const r=d[e][o];if(r===0||r!==c[e][o])return}n("gameOver")}},[d,c,i]),g.useEffect(()=>{if(i!=="playing")return;const e=o=>{if(!f)return;const r=o.key;if(/^[1-9]$/.test(r))F(parseInt(r,10));else if(r==="Backspace"||r==="Delete"||r==="0")L();else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r)){o.preventDefault();const{r:u,c:y}=f;r==="ArrowUp"&&j({r:Math.max(0,u-1),c:y}),r==="ArrowDown"&&j({r:Math.min(8,u+1),c:y}),r==="ArrowLeft"&&j({r:u,c:Math.max(0,y-1)}),r==="ArrowRight"&&j({r:u,c:Math.min(8,y+1)})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,d]);const H=g.useMemo(()=>{if(!f)return new Set;const e=d[f.r][f.c];return new Set([e])},[f,d]);return i==="start"?s.jsx(J,{title:"üß© Sudoku",description:"El cl√°sico juego de l√≥gica y n√∫meros",instructions:[{title:"C√≥mo Jugar",items:["üñ±Ô∏è Click en una celda para seleccionarla","‚å®Ô∏è Usa el teclado (1-9) o el panel num√©rico","üö´ Evita repetir n√∫meros en filas, columnas o cajas","üí° Usa las pistas si te atascas"],icon:"üéÆ"},{title:"Caracter√≠sticas",items:["4 niveles de dificultad: F√°cil, Medio, Dif√≠cil, Experto","Sistema de detecci√≥n de conflictos","Temporizador integrado","Generaci√≥n infinita de puzzles"],icon:"‚≠ê"}],onStart:G,theme:{background:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)",primary:"linear-gradient(135deg, #3b82f6, #6366f1)",secondary:"#a5b4fc",accent:"linear-gradient(45deg, #60a5fa, #a5b4fc)"},children:s.jsxs("div",{style:{marginBottom:"1.5rem"},children:[s.jsx("label",{style:{color:"white",marginRight:"1rem",fontSize:"1.1rem"},children:"Dificultad:"}),s.jsxs("select",{value:t,onChange:e=>a(e.target.value),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"1rem",cursor:"pointer"},children:[s.jsx("option",{value:"F√°cil",style:{color:"black"},children:"F√°cil"}),s.jsx("option",{value:"Medio",style:{color:"black"},children:"Medio"}),s.jsx("option",{value:"Dif√≠cil",style:{color:"black"},children:"Dif√≠cil"}),s.jsx("option",{value:"Experto",style:{color:"black"},children:"Experto"})]})]})}):i==="gameOver"?s.jsx(K,{score:0,isVictory:!0,onRestart:G,onMenu:()=>n("start"),theme:{background:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)",primary:"linear-gradient(135deg, #3b82f6, #6366f1)",secondary:"#a5b4fc",accent:"linear-gradient(45deg, #60a5fa, #a5b4fc)"},customStats:[{label:"Tiempo",value:I}]}):s.jsxs("div",{style:ee,children:[s.jsx("h1",{style:{margin:0,marginBottom:12,fontWeight:800,letterSpacing:1},children:"üß© Sudoku"}),s.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[s.jsxs("div",{style:$,children:["‚è±Ô∏è Tiempo: ",s.jsx("strong",{children:I})]}),s.jsxs("div",{style:$,children:["Dificultad: ",s.jsx("strong",{children:t})]}),s.jsx("button",{style:w,onClick:()=>U(t),children:"üîÑ Reiniciar"}),s.jsxs("button",{style:w,onClick:()=>N(e=>!e),children:[A?"üôà Ocultar":"üîé Mostrar"," conflictos"]}),s.jsx("button",{style:w,onClick:()=>S(v(c)),children:"üí° Resolver"}),s.jsx("button",{style:w,onClick:()=>n("start"),children:"üè† Men√∫"})]}),s.jsx("div",{style:{...R,padding:16},children:s.jsx("div",{style:te,children:d.map((e,o)=>e.map((r,u)=>{const y=k[o][u],p=f&&f.r===o&&f.c===u,C=f&&r!==0&&H.has(r),z=A&&_(o,u,r);return s.jsx("div",{onClick:()=>j({r:o,c:u}),style:{...re,...ne(o,u),background:p?"#374151":C?"#273449":"#1f2937",color:y?"#a5b4fc":z?"#fca5a5":"#e5e7eb",boxShadow:p?"inset 0 0 0 2px #60a5fa":"none",fontWeight:y?800:700},children:r!==0?r:""},`${o}-${u}`)}))})}),s.jsx("div",{style:{marginTop:16,...R},children:s.jsx("div",{style:{padding:12},children:s.jsxs("div",{style:oe,children:[[1,2,3,4,5,6,7,8,9].map(e=>s.jsx("button",{style:w,onClick:()=>F(e),children:e},e)),s.jsx("button",{style:{...w,gridColumn:"span 2"},onClick:L,children:"üßΩ Borrar"})]})})}),s.jsx("div",{style:{marginTop:16,opacity:.8},children:"Consejos: Usa el teclado (1-9, ‚Üê‚Üí‚Üë‚Üì, Supr) o el keypad. Evita conflictos para avanzar m√°s r√°pido."})]})};export{ae as default};
