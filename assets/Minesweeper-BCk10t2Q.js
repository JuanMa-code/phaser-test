import{r as g,j as f}from"./index-vJFL1dzY.js";import{A as V,C as I,G as x,T as y}from"./HTMLText-CeZkFdUK.js";import{G as Z,a as _}from"./GameOverScreen-DshzEBP7.js";const l=35,h={beginner:{cols:9,rows:9,mines:10},intermediate:{cols:16,rows:16,mines:40},expert:{cols:30,rows:16,mines:99}},ee=()=>{const w=g.useRef(null),[m,W]=g.useState("beginner"),[u,v]=g.useState("start"),[J,A]=g.useState(h.beginner.mines),[R,S]=g.useState(0),[K,k]=g.useState(!0);g.useEffect(()=>{if(u!=="playing")return;const i=setInterval(()=>{S(c=>c+1)},1e3);return()=>clearInterval(i)},[u]),g.useEffect(()=>{if(u!=="playing")return;const i=h[m],c=new V({width:i.cols*l,height:i.rows*l+60,backgroundColor:12632256});w.current&&c.view instanceof Node&&w.current.appendChild(c.view);let a=[],p=!0,C=i.mines,L=!0,j=0;const b=new I;b.y=0,c.stage.addChild(b);const F=new x;F.beginFill(12566463),F.drawRect(0,0,i.cols*l,50),F.endFill(),b.addChild(F);const E=new y(`üí£ ${C}`,{fontSize:20,fill:16711680,fontWeight:"bold"});E.x=10,E.y=15,b.addChild(E);const M=new y(`‚è±Ô∏è ${j}`,{fontSize:20,fill:255,fontWeight:"bold"});M.x=i.cols*l-100,M.y=15,b.addChild(M);const N=setInterval(()=>{p&&(j++,S(j),M.text=`‚è±Ô∏è ${j}`)},1e3),T=new I;T.y=60,c.stage.addChild(T);function P(){a=[];for(let e=0;e<i.rows;e++){a[e]=[];for(let t=0;t<i.cols;t++){const n={mine:!1,revealed:!1,flagged:!1,adjacent:0,sprite:new I},r=new x;r.beginFill(12566463),r.lineStyle(2,8421504),r.drawRect(0,0,l,l),r.endFill();const s=new x;s.lineStyle(2,16777215),s.moveTo(0,l),s.lineTo(0,0),s.lineTo(l,0);const o=new x;o.lineStyle(2,8421504),o.moveTo(l,0),o.lineTo(l,l),o.lineTo(0,l),n.sprite.addChild(r),n.sprite.addChild(s),n.sprite.addChild(o),n.sprite.x=t*l,n.sprite.y=e*l,n.sprite.interactive=!0,n.sprite.cursor="pointer",n.sprite.on("pointerdown",d=>{p&&(d.data.button===0?(L&&(U(t,e),q(),L=!1),G(t,e)):d.data.button===2&&D(t,e))}),n.sprite.on("rightdown",d=>{d.stopPropagation(),p&&D(t,e)}),T.addChild(n.sprite),a[e][t]=n}}}function U(e,t){let n=0;for(;n<i.mines;){const r=Math.floor(Math.random()*i.cols),s=Math.floor(Math.random()*i.rows);!a[s][r].mine&&!(Math.abs(r-e)<=1&&Math.abs(s-t)<=1)&&(a[s][r].mine=!0,n++)}}function q(){for(let e=0;e<i.rows;e++)for(let t=0;t<i.cols;t++){if(a[e][t].mine)continue;let n=0;for(let r=-1;r<=1;r++)for(let s=-1;s<=1;s++){if(s===0&&r===0)continue;const o=t+s,d=e+r;o>=0&&o<i.cols&&d>=0&&d<i.rows&&a[d][o].mine&&n++}a[e][t].adjacent=n}}function G(e,t){if(!(e<0||e>=i.cols||t<0||t>=i.rows)&&!(a[t][e].revealed||a[t][e].flagged)){if(a[t][e].revealed=!0,z(e,t),a[t][e].mine){p=!1,v("lost"),O();return}if(a[t][e].adjacent===0)for(let n=-1;n<=1;n++)for(let r=-1;r<=1;r++)r===0&&n===0||G(e+r,t+n);H()}}function D(e,t){a[t][e].revealed||(a[t][e].flagged=!a[t][e].flagged,a[t][e].flagged?C--:C++,A(C),E.text=`üí£ ${C}`,z(e,t))}function z(e,t){const n=a[t][e],r=n.sprite;for(;r.children.length>3;)r.removeChildAt(3);if(n.flagged&&!n.revealed){const o=new y("üö©",{fontSize:22,fontFamily:"Arial"});o.anchor.set(.5),o.x=l/2,o.y=l/2,r.addChild(o);return}if(!n.revealed)return;r.removeChildren();const s=new x;if(s.beginFill(n.mine?16711680:14737632),s.lineStyle(1,8421504),s.drawRect(0,0,l,l),s.endFill(),r.addChild(s),n.mine){const o=new y("üí•",{fontSize:22,fontFamily:"Arial"});o.anchor.set(.5),o.x=l/2,o.y=l/2,r.addChild(o)}else if(n.adjacent>0){const o=[255,32768,16711680,8388736,8388608,32896,0,8421504],d=new y(n.adjacent.toString(),{fontSize:18,fill:o[n.adjacent-1]||0,fontWeight:"bold",fontFamily:"Arial"});d.anchor.set(.5),d.x=l/2,d.y=l/2,r.addChild(d)}}function O(){for(let e=0;e<i.rows;e++)for(let t=0;t<i.cols;t++)a[e][t].mine&&(a[e][t].revealed=!0,z(t,e))}function H(){let e=0;for(let t=0;t<i.rows;t++)for(let n=0;n<i.cols;n++)a[t][n].revealed&&!a[t][n].mine&&e++;e===i.cols*i.rows-i.mines&&(p=!1,v("won"))}return c.view&&"addEventListener"in c.view&&c.view.addEventListener("contextmenu",e=>e.preventDefault()),P(),()=>{p=!1,clearInterval(N),w.current&&c.view instanceof Node&&w.current.removeChild(c.view),c.destroy()}},[u,m]);const B=()=>{v("playing"),A(h[m].mines),S(0),k(!0)},$=()=>{v("playing"),A(h[m].mines),S(0),k(!0)};return u==="start"?f.jsx(Z,{title:"üí£ Minesweeper",description:"¬°Encuentra todas las minas sin explotar ninguna!",instructions:[{title:"Controles",items:["üñ±Ô∏è Click izquierdo: Revelar casilla","üö© Click derecho: Marcar con bandera","üí° Los n√∫meros indican minas adyacentes","üéØ Encuentra todas las minas sin explotar ninguna"],icon:"üéÆ"},{title:"Caracter√≠sticas",items:["3 niveles de dificultad: Principiante, Intermedio, Experto","Temporizador integrado","Contador de minas","Efectos visuales cl√°sicos"],icon:"‚≠ê"}],onStart:B,theme:{background:"linear-gradient(135deg, #c0c0c0 0%, #808080 100%)",primary:"linear-gradient(45deg, #ff0000, #ff6600)",secondary:"rgba(255, 255, 255, 0.2)",accent:"linear-gradient(45deg, #ff0000, #0000ff, #008000)"},children:f.jsxs("div",{style:{marginBottom:"1.5rem"},children:[f.jsx("h3",{style:{color:"white",marginBottom:"0.5rem",fontSize:"1.1rem"},children:"Dificultad:"}),f.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:Object.entries(h).map(([i,c])=>f.jsx("button",{onClick:()=>W(i),style:{padding:"0.5rem 1rem",fontSize:"0.9rem",background:m===i?"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.2)",border:m===i?"2px solid #4CAF50":"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold",transition:"all 0.3s ease"},children:i.charAt(0).toUpperCase()+i.slice(1)},i))})]})}):u==="won"||u==="lost"?f.jsx(_,{score:R,isVictory:u==="won",onRestart:$,onMenu:()=>v("start"),theme:{background:u==="won"?"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)":"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",primary:u==="won"?"linear-gradient(45deg, #4CAF50, #45a049)":"linear-gradient(45deg, #f44336, #d32f2f)",secondary:"rgba(255, 255, 255, 0.2)",accent:"linear-gradient(45deg, #ffffff, #e0e0e0)"},customStats:[{label:"Tiempo",value:`${R} segundos`},{label:"Dificultad",value:m.charAt(0).toUpperCase()+m.slice(1)},{label:"Minas",value:h[m].mines}]}):f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #c0c0c0 0%, #808080 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"black"},children:[f.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üí£ MINESWEEPER"}),f.jsx("div",{ref:w,style:{border:"3px solid #808080",borderRadius:"5px"}}),f.jsx("div",{style:{marginTop:"20px",fontSize:"1rem"},children:f.jsx("p",{children:"Click izquierdo: revelar | Click derecho: bandera"})})]})};export{ee as default};
