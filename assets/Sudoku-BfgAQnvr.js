import{r as f,j as n}from"./index-BlMRXOoE.js";const c=9,h=3,H={F√°cil:[40,47],Medio:[34,38],Dif√≠cil:[28,32],Experto:[22,26]};function w(l){return l.map(s=>[...s])}function T(){return Array.from({length:c},()=>Array(c).fill(0))}function D(l){const s=[...l];for(let o=s.length-1;o>0;o--){const a=Math.floor(Math.random()*(o+1));[s[o],s[a]]=[s[a],s[o]]}return s}function N(l,s,o,a){for(let i=0;i<c;i++)if(l[s][i]===a||l[i][o]===a)return!1;const g=Math.floor(s/h)*h,m=Math.floor(o/h)*h;for(let i=0;i<h;i++)for(let p=0;p<h;p++)if(l[g+i][m+p]===a)return!1;return!0}function J(l){for(let s=0;s<c;s++)for(let o=0;o<c;o++)if(l[s][o]===0)return[s,o];return null}function K(l,s=2){const o=w(l);let a=0;function g(){const m=J(o);if(!m)return a++,a>=s;const[i,p]=m;for(const b of D([1,2,3,4,5,6,7,8,9]))if(N(o,i,p,b)){if(o[i][p]=b,g())return!0;o[i][p]=0}return!1}return g(),a}function X(){const l=T();function s(o=0){if(o===c*c)return!0;const a=Math.floor(o/c),g=o%c;for(const m of D([1,2,3,4,5,6,7,8,9]))if(N(l,a,g,m)){if(l[a][g]=m,s(o+1))return!0;l[a][g]=0}return!1}return s(),l}function Y(l){const s=X(),o=w(s),[a,g]=H[l],m=Math.floor(a+Math.random()*(g-a+1));let i=c*c-m;const p=D(Array.from({length:c*c},(b,k)=>k));for(const b of p){if(i<=0)break;const k=Math.floor(b/c),u=b%c,j=o[k][u];if(j===0)continue;o[k][u]=0,K(o,2)!==1?o[k][u]=j:i--}return{puzzle:o,solution:s}}const Z={minHeight:"100vh",background:"linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"24px",color:"#fff",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},v={background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:16,padding:16,backdropFilter:"blur(8px)",boxShadow:"0 10px 30px rgba(0,0,0,0.25)"},q={display:"grid",gridTemplateColumns:"repeat(9, 48px)",gridTemplateRows:"repeat(9, 48px)",gap:0,background:"#111827",padding:8,borderRadius:12,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.2), 0 12px 24px rgba(0,0,0,0.35)"},Q={width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:700,cursor:"pointer",userSelect:"none",position:"relative",background:"#1f2937",color:"#e5e7eb"};function ee(l,s){return{borderTop:l%3===0?"2px solid #94a3b8":"1px solid #374151",borderLeft:s%3===0?"2px solid #94a3b8":"1px solid #374151",borderRight:(s+1)%3===0?"2px solid #94a3b8":"1px solid #374151",borderBottom:(l+1)%3===0?"2px solid #94a3b8":"1px solid #374151"}}const te={display:"grid",gridTemplateColumns:"repeat(5, 48px)",gridTemplateRows:"repeat(2, 48px)",gap:8},S={...v,padding:"10px 14px",borderRadius:10,background:"rgba(255,255,255,0.15)",cursor:"pointer",color:"#fff",fontWeight:700,textAlign:"center"},ne={...v,padding:"8px 12px",borderRadius:10,background:"rgba(255,255,255,0.15)",color:"#fff",border:"none"},$={...v,padding:"8px 12px",borderRadius:999,display:"inline-flex",alignItems:"center",gap:8},re=()=>{const[l,s]=f.useState("Medio"),[o,a]=f.useState(()=>T()),[g,m]=f.useState(()=>T()),[i,p]=f.useState(()=>T()),[b,k]=f.useState(()=>Array.from({length:c},()=>Array(c).fill(!1))),[u,j]=f.useState(null),[A,G]=f.useState(!0),[E,P]=f.useState(null),[B,O]=f.useState(Date.now()),[R,I]=f.useState(!1);f.useEffect(()=>{z("Medio")},[]),f.useEffect(()=>{const e=setInterval(()=>O(Date.now()),1e3);return()=>clearInterval(e)},[]);const F=f.useMemo(()=>{if(!E)return"00:00";const e=Math.floor((B-E)/1e3),r=String(Math.floor(e/60)).padStart(2,"0"),t=String(e%60).padStart(2,"0");return`${r}:${t}`},[B,E]);function z(e){const{puzzle:r,solution:t}=Y(e),d=r.map(y=>y.map(x=>x!==0));a(r),m(t),p(w(r)),k(d),j(null),I(!1),s(e),P(Date.now())}function L(e){if(!u)return;const{r,c:t}=u;if(b[r][t])return;const d=w(i);d[r][t]=e,p(d)}function U(){if(!u)return;const{r:e,c:r}=u;if(b[e][r])return;const t=w(i);t[e][r]=0,p(t)}function V(e,r,t){if(t===0)return!1;for(let x=0;x<c;x++)if(x!==r&&i[e][x]===t||x!==e&&i[x][r]===t)return!0;const d=Math.floor(e/h)*h,y=Math.floor(r/h)*h;for(let x=0;x<h;x++)for(let C=0;C<h;C++){const M=d+x,W=y+C;if((M!==e||W!==r)&&i[M][W]===t)return!0}return!1}f.useEffect(()=>{if(!R){for(let e=0;e<c;e++)for(let r=0;r<c;r++){const t=i[e][r];if(t===0||t!==g[e][r])return}I(!0)}},[i,g,R]),f.useEffect(()=>{const e=r=>{if(!u)return;const t=r.key;if(/^[1-9]$/.test(t))L(parseInt(t,10));else if(t==="Backspace"||t==="Delete"||t==="0")U();else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)){r.preventDefault();const{r:d,c:y}=u;t==="ArrowUp"&&j({r:Math.max(0,d-1),c:y}),t==="ArrowDown"&&j({r:Math.min(8,d+1),c:y}),t==="ArrowLeft"&&j({r:d,c:Math.max(0,y-1)}),t==="ArrowRight"&&j({r:d,c:Math.min(8,y+1)})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u,i]);const _=f.useMemo(()=>{if(!u)return new Set;const e=i[u.r][u.c];return new Set([e])},[u,i]);return n.jsxs("div",{style:Z,children:[n.jsx("h1",{style:{margin:0,marginBottom:12,fontWeight:800,letterSpacing:1},children:"üß© Sudoku"}),n.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[n.jsxs("div",{style:$,children:["‚è±Ô∏è Tiempo: ",n.jsx("strong",{children:F})]}),n.jsxs("div",{style:$,children:["Dificultad:¬†",n.jsxs("select",{value:l,onChange:e=>s(e.target.value),style:{...ne,padding:"6px 10px"},children:[n.jsx("option",{value:"F√°cil",children:"F√°cil"}),n.jsx("option",{value:"Medio",children:"Medio"}),n.jsx("option",{value:"Dif√≠cil",children:"Dif√≠cil"}),n.jsx("option",{value:"Experto",children:"Experto"})]})]}),n.jsx("button",{style:S,onClick:()=>z(l),children:"üîÑ Nueva partida"}),n.jsxs("button",{style:S,onClick:()=>G(e=>!e),children:[A?"üôà Ocultar":"üîé Mostrar"," conflictos"]}),n.jsx("button",{style:S,onClick:()=>p(w(g)),children:"üí° Resolver"}),n.jsx("button",{style:S,onClick:()=>p(w(o)),children:"‚Ü©Ô∏è Reiniciar"})]}),n.jsx("div",{style:{...v,padding:16},children:n.jsx("div",{style:q,children:i.map((e,r)=>e.map((t,d)=>{const y=b[r][d],x=u&&u.r===r&&u.c===d,C=u&&t!==0&&_.has(t),M=A&&V(r,d,t);return n.jsx("div",{onClick:()=>j({r,c:d}),style:{...Q,...ee(r,d),background:x?"#374151":C?"#273449":"#1f2937",color:y?"#a5b4fc":M?"#fca5a5":"#e5e7eb",boxShadow:x?"inset 0 0 0 2px #60a5fa":"none",fontWeight:y?800:700},children:t!==0?t:""},`${r}-${d}`)}))})}),n.jsx("div",{style:{marginTop:16,...v},children:n.jsx("div",{style:{padding:12},children:n.jsxs("div",{style:te,children:[[1,2,3,4,5,6,7,8,9].map(e=>n.jsx("button",{style:S,onClick:()=>L(e),children:e},e)),n.jsx("button",{style:{...S,gridColumn:"span 2"},onClick:U,children:"üßΩ Borrar"})]})})}),R&&n.jsx("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)"},children:n.jsxs("div",{style:{...v,padding:24,textAlign:"center"},children:[n.jsx("h2",{style:{marginTop:0},children:"üéâ ¬°Sudoku completado!"}),n.jsxs("p",{children:["Tiempo: ",n.jsx("strong",{children:F})]}),n.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[n.jsx("button",{style:S,onClick:()=>z(l),children:"‚ñ∂Ô∏è Jugar de nuevo"}),n.jsx("button",{style:S,onClick:()=>window.history.back(),children:"üè† Men√∫"})]})]})}),n.jsx("div",{style:{marginTop:16,opacity:.8},children:"Consejos: Usa el teclado (1-9, ‚Üê‚Üí‚Üë‚Üì, Supr) o el keypad. Evita conflictos para avanzar m√°s r√°pido."})]})};export{re as default};
