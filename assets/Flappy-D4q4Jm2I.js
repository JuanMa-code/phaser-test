import{r as b,j as g}from"./index-vJFL1dzY.js";import{A as U,C as O,G as v,T as V}from"./HTMLText-CeZkFdUK.js";import{G as Z,a as q}from"./GameOverScreen-DshzEBP7.js";const f=480,d=640,a=24,s=80,l=140,$=()=>{const m=b.useRef(null),[S,h]=b.useState("start"),[j,E]=b.useState(0),[w,D]=b.useState(()=>{const n=localStorage.getItem("flappy-highscore");return n?parseInt(n):0});b.useEffect(()=>{if(S!=="playing")return;const n=new U({width:f,height:d,backgroundColor:7390670});m.current&&n.view instanceof Node&&m.current.appendChild(n.view);let F=!0,o=0,M=3,R=0,k=0;const A=new O;n.stage.addChild(A);const I=new O;A.addChild(I);function z(){const e=new v;return e.beginFill(16777215,.8),e.drawCircle(0,0,18),e.drawCircle(25,0,22),e.drawCircle(50,0,18),e.drawCircle(12,-10,14),e.drawCircle(37,-10,16),e.endFill(),e.x=f+Math.random()*100,e.y=80+Math.random()*150,e.alpha=.6,I.addChild(e),e}const c=new v;c.beginFill(9159498),c.drawRect(0,d-80,f,80),c.endFill(),c.beginFill(5025616);for(let e=0;e<f;e+=20)c.drawRect(e,d-20,10,20);c.endFill(),A.addChild(c);let p=d/2,y=0,G=0,T=0;const t=new v;function L(){t.clear(),t.beginFill(16766720),t.drawEllipse(0,0,a,a*.8),t.endFill();const e=Math.sin(T)*3;t.beginFill(16753920),t.drawEllipse(-8,e-5,15,8),t.endFill(),t.beginFill(16737095),t.drawPolygon([a-5,-3,a+8,0,a-5,3]),t.endFill(),t.beginFill(0),t.drawCircle(8,-5,4),t.endFill(),t.beginFill(16777215),t.drawCircle(10,-6,2),t.endFill(),t.beginFill(16747520),t.drawPolygon([-a+2,-8,-a-8,-4,-a-8,4,-a+2,8]),t.endFill()}t.x=120,t.y=p,n.stage.addChild(t),L();let x=[],u=[];function N(){const e=120+Math.random()*(d-280),i=new v;i.beginFill(5025616),i.drawRoundedRect(0,0,s,e-l/2,8),i.endFill(),i.beginFill(3706428),i.drawRoundedRect(-8,e-l/2-20,s+16,20,4),i.endFill(),i.beginFill(6732650),i.drawRect(8,0,8,e-l/2),i.drawRect(s-16,0,8,e-l/2),i.endFill();const r=new v;r.beginFill(5025616),r.drawRoundedRect(0,e+l/2,s,d-(e+l/2)-80,8),r.endFill(),r.beginFill(3706428),r.drawRoundedRect(-8,e+l/2,s+16,20,4),r.endFill(),r.beginFill(6732650),r.drawRect(8,e+l/2,8,d-(e+l/2)-80),r.drawRect(s-16,e+l/2,8,d-(e+l/2)-80),r.endFill();const P=f;return i.x=P,r.x=P,n.stage.addChild(i),n.stage.addChild(r),{topSprite:i,bottomSprite:r,x:P,gapY:e,passed:!1}}const C=new V("0",{fontSize:48,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:4});C.anchor.set(.5),C.x=f/2,C.y=80,n.stage.addChild(C);function B(){F&&(y=-8,G=-.3)}function K(){if(F){k++,k>180+Math.random()*120&&(u.push(z()),k=0);for(let e=u.length-1;e>=0;e--)u[e].x-=1,u[e].x<-100&&(I.removeChild(u[e]),u.splice(e,1));R++,R>120&&(x.push(N()),R=0);for(let e=x.length-1;e>=0;e--){const i=x[e];i.x-=M,i.topSprite.x=i.x,i.bottomSprite.x=i.x,!i.passed&&i.x+s<t.x&&(i.passed=!0,o++,E(o),o%5===0&&(M+=.2)),i.x<-s&&(n.stage.removeChild(i.topSprite),n.stage.removeChild(i.bottomSprite),x.splice(e,1))}if(y+=.5,p+=y,G=Math.max(-.5,Math.min(1.2,y*.1)),T+=.3,t.y=p,t.rotation=G,L(),p-a<0||p+a>d-80){F=!1,h("gameOver"),o>w&&(D(o),localStorage.setItem("flappy-highscore",o.toString()));return}for(const e of x)if(t.x+a>e.x&&t.x-a<e.x+s&&(p-a<e.gapY-l/2||p+a>e.gapY+l/2)){F=!1,h("gameOver"),o>w&&(D(o),localStorage.setItem("flappy-highscore",o.toString()));return}C.text=o.toString()}}function Y(e){switch(e.code){case"Space":case"ArrowUp":case"KeyW":e.preventDefault(),B();break}}function H(){B()}return window.addEventListener("keydown",Y),n.view&&"addEventListener"in n.view&&n.view.addEventListener("click",H),n.ticker.add(K),()=>{F=!1,window.removeEventListener("keydown",Y),n.view&&"removeEventListener"in n.view&&n.view.removeEventListener("click",H),m.current&&n.view instanceof Node&&m.current.removeChild(n.view),n.destroy()}},[S]);const W=()=>{h("playing"),E(0)},_=()=>{h("playing"),E(0)};return S==="start"?g.jsx(Z,{title:"üê¶ FLAPPY BIRD",description:"¬°Ayuda al p√°jaro a volar entre las tuber√≠as!",highScore:w,instructions:[{title:"Controles",items:["üöÄ Espacio/‚Üë/W: Aletear hacia arriba","üñ±Ô∏è Click: Tambi√©n hace aletear"],icon:"üéÆ"},{title:"Objetivo",items:["üìä 1 punto por tuber√≠a pasada","‚ö° La velocidad aumenta cada 5 puntos"],icon:"üéØ"},{title:"Consejos",items:["El timing es la clave del √©xito","No aletees demasiado seguido","Mant√©n una altitud constante"],icon:"üí°"}],onStart:W,theme:{primary:"#FFD700",secondary:"#FFA500",accent:"#70C5CE",background:"linear-gradient(135deg, #70C5CE 0%, #8BC34A 100%)"}}):S==="gameOver"?g.jsx(q,{score:j,highScore:w,onRestart:_,onMenu:()=>h("start"),theme:{primary:"#FFD700",secondary:"#FFA500",accent:"#70C5CE",background:"linear-gradient(135deg, #70C5CE 0%, #8BC34A 100%)"},customStats:[{label:"Puntuaci√≥n",value:j},{label:"R√©cord",value:w}]}):g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #70C5CE 0%, #8BC34A 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"#2E7D32"},children:[g.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üê¶ FLAPPY BIRD"}),g.jsx("div",{ref:m,style:{border:"3px solid #FFD700",borderRadius:"10px"}}),g.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:g.jsx("p",{children:"Espacio/‚Üë/W/Click para aletear"})})]})};export{$ as default};
