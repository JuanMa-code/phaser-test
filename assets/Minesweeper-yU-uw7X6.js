import{r as p,j as n}from"./index-Dl9Mtil6.js";import{A as Y,C as T,G as v,T as C}from"./HTMLText-BfyFZK-P.js";const a=35,h={beginner:{cols:9,rows:9,mines:10},intermediate:{cols:16,rows:16,mines:40},expert:{cols:30,rows:16,mines:99}},K=()=>{const x=p.useRef(null),[g,L]=p.useState("beginner"),[m,b]=p.useState("start"),[Z,E]=p.useState(h.beginner.mines),[B,j]=p.useState(0),[V,M]=p.useState(!0);p.useEffect(()=>{if(m!=="playing")return;const i=setInterval(()=>{j(c=>c+1)},1e3);return()=>clearInterval(i)},[m]),p.useEffect(()=>{if(m!=="playing")return;const i=h[g],c=new Y({width:i.cols*a,height:i.rows*a+60,backgroundColor:12632256});x.current&&c.view instanceof Node&&x.current.appendChild(c.view);let o=[],u=!0,y=i.mines,I=!0,S=0;const w=new T;w.y=0,c.stage.addChild(w);const k=new v;k.beginFill(12566463),k.drawRect(0,0,i.cols*a,50),k.endFill(),w.addChild(k);const A=new C(`üí£ ${y}`,{fontSize:20,fill:16711680,fontWeight:"bold"});A.x=10,A.y=15,w.addChild(A);const F=new C(`‚è±Ô∏è ${S}`,{fontSize:20,fill:255,fontWeight:"bold"});F.x=i.cols*a-100,F.y=15,w.addChild(F);const O=setInterval(()=>{u&&(S++,j(S),F.text=`‚è±Ô∏è ${S}`)},1e3),R=new T;R.y=60,c.stage.addChild(R);function P(){o=[];for(let e=0;e<i.rows;e++){o[e]=[];for(let r=0;r<i.cols;r++){const t={mine:!1,revealed:!1,flagged:!1,adjacent:0,sprite:new T},l=new v;l.beginFill(12566463),l.lineStyle(2,8421504),l.drawRect(0,0,a,a),l.endFill();const d=new v;d.lineStyle(2,16777215),d.moveTo(0,a),d.lineTo(0,0),d.lineTo(a,0);const s=new v;s.lineStyle(2,8421504),s.moveTo(a,0),s.lineTo(a,a),s.lineTo(0,a),t.sprite.addChild(l),t.sprite.addChild(d),t.sprite.addChild(s),t.sprite.x=r*a,t.sprite.y=e*a,t.sprite.interactive=!0,t.sprite.cursor="pointer",t.sprite.on("pointerdown",f=>{u&&(f.data.button===0?(I&&(U(r,e),$(),I=!1),W(r,e)):f.data.button===2&&D(r,e))}),t.sprite.on("rightdown",f=>{f.stopPropagation(),u&&D(r,e)}),R.addChild(t.sprite),o[e][r]=t}}}function U(e,r){let t=0;for(;t<i.mines;){const l=Math.floor(Math.random()*i.cols),d=Math.floor(Math.random()*i.rows);!o[d][l].mine&&!(Math.abs(l-e)<=1&&Math.abs(d-r)<=1)&&(o[d][l].mine=!0,t++)}}function $(){for(let e=0;e<i.rows;e++)for(let r=0;r<i.cols;r++){if(o[e][r].mine)continue;let t=0;for(let l=-1;l<=1;l++)for(let d=-1;d<=1;d++){if(d===0&&l===0)continue;const s=r+d,f=e+l;s>=0&&s<i.cols&&f>=0&&f<i.rows&&o[f][s].mine&&t++}o[e][r].adjacent=t}}function W(e,r){if(!(e<0||e>=i.cols||r<0||r>=i.rows)&&!(o[r][e].revealed||o[r][e].flagged)){if(o[r][e].revealed=!0,z(e,r),o[r][e].mine){u=!1,b("lost"),H();return}if(o[r][e].adjacent===0)for(let t=-1;t<=1;t++)for(let l=-1;l<=1;l++)l===0&&t===0||W(e+l,r+t);q()}}function D(e,r){o[r][e].revealed||(o[r][e].flagged=!o[r][e].flagged,o[r][e].flagged?y--:y++,E(y),A.text=`üí£ ${y}`,z(e,r))}function z(e,r){const t=o[r][e],l=t.sprite;for(;l.children.length>3;)l.removeChildAt(3);if(t.flagged&&!t.revealed){const s=new C("üö©",{fontSize:22,fontFamily:"Arial"});s.anchor.set(.5),s.x=a/2,s.y=a/2,l.addChild(s);return}if(!t.revealed)return;l.removeChildren();const d=new v;if(d.beginFill(t.mine?16711680:14737632),d.lineStyle(1,8421504),d.drawRect(0,0,a,a),d.endFill(),l.addChild(d),t.mine){const s=new C("üí•",{fontSize:22,fontFamily:"Arial"});s.anchor.set(.5),s.x=a/2,s.y=a/2,l.addChild(s)}else if(t.adjacent>0){const s=[255,32768,16711680,8388736,8388608,32896,0,8421504],f=new C(t.adjacent.toString(),{fontSize:18,fill:s[t.adjacent-1]||0,fontWeight:"bold",fontFamily:"Arial"});f.anchor.set(.5),f.x=a/2,f.y=a/2,l.addChild(f)}}function H(){for(let e=0;e<i.rows;e++)for(let r=0;r<i.cols;r++)o[e][r].mine&&(o[e][r].revealed=!0,z(r,e))}function q(){let e=0;for(let r=0;r<i.rows;r++)for(let t=0;t<i.cols;t++)o[r][t].revealed&&!o[r][t].mine&&e++;e===i.cols*i.rows-i.mines&&(u=!1,b("won"))}return c.view&&"addEventListener"in c.view&&c.view.addEventListener("contextmenu",e=>e.preventDefault()),P(),()=>{u=!1,clearInterval(O),x.current&&c.view instanceof Node&&x.current.removeChild(c.view),c.destroy()}},[m,g]);const G=()=>{b("playing"),E(h[g].mines),j(0),M(!0)},N=()=>{b("playing"),E(h[g].mines),j(0),M(!0)};return m==="start"?n.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #c0c0c0 0%, #808080 100%)",fontFamily:"Arial, sans-serif",color:"black",padding:"2rem"},children:n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",maxWidth:"600px",textAlign:"center",border:"3px solid #808080",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[n.jsx("h1",{style:{fontSize:"4rem",margin:"0 0 1rem 0",background:"linear-gradient(45deg, #ff0000, #0000ff, #008000, #800080)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"üí£ MINESWEEPER"}),n.jsx("p",{style:{fontSize:"1.2rem",margin:"1rem 0",opacity:.8},children:"¬°Encuentra todas las minas sin explotar ninguna!"}),n.jsxs("div",{style:{margin:"2rem 0"},children:[n.jsx("h3",{style:{margin:"1rem 0",color:"#333"},children:"üéØ Selecciona Dificultad:"}),n.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:Object.entries(h).map(([i,c])=>n.jsxs("button",{onClick:()=>L(i),style:{padding:"1rem 1.5rem",fontSize:"1rem",background:g===i?"linear-gradient(45deg, #4CAF50, #45a049)":"linear-gradient(45deg, #f0f0f0, #d0d0d0)",border:g===i?"2px solid #4CAF50":"2px solid #999",borderRadius:"10px",color:g===i?"white":"black",cursor:"pointer",fontWeight:"bold",transition:"all 0.3s ease"},children:[n.jsx("div",{children:i.charAt(0).toUpperCase()+i.slice(1)}),n.jsxs("div",{style:{fontSize:"0.8rem",opacity:.8},children:[c.cols,"√ó",c.rows," - ",c.mines," minas"]})]},i))})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",margin:"2rem 0"},children:[n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.05)",borderRadius:"15px",padding:"1rem",border:"1px solid rgba(0, 0, 0, 0.1)"},children:[n.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#0000ff"},children:"üñ±Ô∏è Controles"}),n.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:"Click izquierdo: Revelar"}),n.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:"Click derecho: Bandera"})]}),n.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.05)",borderRadius:"15px",padding:"1rem",border:"1px solid rgba(0, 0, 0, 0.1)"},children:[n.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#008000"},children:"üìã Reglas"}),n.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:"Los n√∫meros indican minas"}),n.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:"adyacentes a esa casilla"})]})]}),n.jsx("button",{onClick:G,style:{padding:"1rem 3rem",fontSize:"1.5rem",background:"linear-gradient(45deg, #ff0000, #ff6600)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",fontWeight:"bold"},onMouseOver:i=>{i.currentTarget.style.transform="translateY(-2px)",i.currentTarget.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.3)"},onMouseOut:i=>{i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)"},children:"üí• ¬°COMENZAR A DESACTIVAR!"})]})}):m==="won"||m==="lost"?n.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:m==="won"?"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)":"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",fontFamily:"Arial, sans-serif",color:"white",padding:"2rem"},children:n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[n.jsx("h1",{style:{fontSize:"3rem",margin:"0 0 1rem 0"},children:m==="won"?"üèÜ ¬°GANASTE!":"üí• ¬°BOOM!"}),n.jsxs("div",{style:{fontSize:"1.5rem",margin:"2rem 0"},children:[n.jsxs("p",{children:["‚è±Ô∏è Tiempo: ",n.jsxs("strong",{children:[B," segundos"]})]}),n.jsxs("p",{children:["üéØ Dificultad: ",n.jsx("strong",{children:g.charAt(0).toUpperCase()+g.slice(1)})]}),n.jsxs("p",{children:["üí£ Minas: ",n.jsx("strong",{children:h[g].mines})]}),m==="won"?n.jsx("p",{style:{color:"#90EE90"},children:"¬°Todas las minas desactivadas!"}):n.jsx("p",{style:{color:"#FFB6C1"},children:"Una mina explot√≥..."})]}),n.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[n.jsx("button",{onClick:N,style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #ff6600, #ff0000)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"üîÑ Reintentar"}),n.jsx("button",{onClick:()=>b("start"),style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #808080, #c0c0c0)",border:"none",borderRadius:"50px",color:"black",cursor:"pointer",fontWeight:"bold"},children:"üè† Men√∫ Principal"})]})]})}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #c0c0c0 0%, #808080 100%)",minHeight:"100vh",fontFamily:"Arial, sans-serif",color:"black"},children:[n.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üí£ MINESWEEPER"}),n.jsx("div",{ref:x,style:{border:"3px solid #808080",borderRadius:"5px"}}),n.jsx("div",{style:{marginTop:"20px",fontSize:"1rem"},children:n.jsx("p",{children:"Click izquierdo: revelar | Click derecho: bandera"})})]})};export{K as default};
