import{r as S,j as w}from"./index-vJFL1dzY.js";import{A as se,C as V,G as P,T as Y}from"./HTMLText-CeZkFdUK.js";import{G as de,a as ce}from"./GameOverScreen-DshzEBP7.js";const p=400,h=600,s=40,o=70,g=15,me=()=>{const x=S.useRef(null),[v,M]=S.useState("start"),[T,B]=S.useState(0),[D,$]=S.useState(()=>{const r=localStorage.getItem("doodlejump-highscore");return r?parseInt(r):0});S.useEffect(()=>{if(v!=="playing")return;const r=new se({width:p,height:h,backgroundColor:8900331});x.current&&r.view instanceof Node&&x.current.appendChild(r.view);let H=!0,u=0,c=p/2-s/2,f=h-150,F=0,R=0,m=0,d=[],y=[],C=0,b={},k=0,j=0,A=0;const Z=.4,Q=-12,U=5,z=80,_=new V;r.stage.addChild(_);const J=[];for(let l=0;l<8;l++){const t=new P;t.beginFill(16777215,.7),t.drawCircle(0,0,20),t.drawCircle(25,0,25),t.drawCircle(50,0,20),t.drawCircle(15,-10,15),t.drawCircle(35,-8,18),t.endFill(),t.x=Math.random()*p,t.y=Math.random()*h*3,_.addChild(t),J.push(t)}const i=new P;function ee(){i.clear(),i.beginFill(k>0?16739125:9498256),i.drawEllipse(0,0,s*.6,s*.8),i.endFill(),i.beginFill(0),i.drawCircle(-8,-12,3),i.drawCircle(8,-12,3),i.endFill(),i.beginFill(16777215),i.drawCircle(-7,-13,1),i.drawCircle(9,-13,1),i.endFill(),i.beginFill(2263842),i.drawEllipse(0,-5,3,2),i.endFill(),i.beginFill(3329330),i.drawEllipse(-12,15,6,10),i.drawEllipse(12,15,6,10),i.endFill(),i.beginFill(2263842),i.drawEllipse(-15,22,8,4),i.drawEllipse(15,22,8,4),i.endFill(),k>0&&(i.beginFill(16729344,.8),i.drawEllipse(-20,10,8,15),i.drawEllipse(20,10,8,15),i.endFill(),i.beginFill(16766720,.6),i.drawEllipse(-20,25,6,12),i.drawEllipse(20,25,6,12),i.endFill()),A>0&&(i.lineStyle(3,49151,.7),i.drawCircle(0,0,s*.7))}function L(l,t){const a=["normal","spring","moving","breakable"],n=t<-500&&Math.random()<.3?a[Math.floor(Math.random()*a.length)]:"normal",e=new P;switch(n){case"normal":e.beginFill(2263842),e.drawRoundedRect(0,0,o,g,7),e.endFill(),e.lineStyle(2,3329330);for(let E=5;E<o-5;E+=8)e.moveTo(E,2),e.lineTo(E+2,-2),e.lineTo(E+4,2);break;case"spring":e.beginFill(2263842),e.drawRoundedRect(0,0,o,g,7),e.endFill(),e.beginFill(16739125),e.drawEllipse(o/2,g/2,12,8),e.endFill(),e.beginFill(16766720),e.drawEllipse(o/2,g/2,8,5),e.endFill();break;case"moving":e.beginFill(4286945),e.drawRoundedRect(0,0,o,g,7),e.endFill(),e.beginFill(16777215),e.drawPolygon([10,7,15,3,15,11]),e.drawPolygon([o-10,7,o-15,3,o-15,11]),e.endFill();break;case"breakable":e.beginFill(9127187),e.drawRoundedRect(0,0,o,g,7),e.endFill(),e.lineStyle(2,6636321),e.moveTo(20,2),e.lineTo(30,g-2),e.moveTo(40,2),e.lineTo(50,g-2);break}return e.x=l,e.y=t,r.stage.addChild(e),{x:l,y:t,type:n,sprite:e,broken:!1,direction:n==="moving"?Math.random()>.5?1:-1:0}}function K(l,t){const a=["jetpack","spring","shield"],n=a[Math.floor(Math.random()*a.length)],e=new P;switch(n){case"jetpack":e.beginFill(16739125),e.drawRoundedRect(-8,-12,16,24,4),e.endFill(),e.beginFill(16766720),e.drawCircle(-4,-8,3),e.drawCircle(4,-8,3),e.endFill();break;case"spring":e.beginFill(3329330),e.drawEllipse(0,0,15,10),e.endFill(),e.beginFill(16766720),e.drawEllipse(0,0,10,6),e.endFill();break;case"shield":e.lineStyle(3,49151),e.beginFill(8900331,.5),e.drawCircle(0,0,12),e.endFill();break}return e.x=l,e.y=t,r.stage.addChild(e),{x:l,y:t,type:n,sprite:e}}function te(){d=[],y=[],u=0,C=0,m=0,d.push(L(p/2-o/2,h-50));for(let l=1;l<20;l++){const t=Math.random()*(p-o),a=h-50-l*z;d.push(L(t,a)),l>3&&Math.random()<.15&&y.push(K(t+o/2,a-30))}}function ie(){b.ArrowLeft||b.KeyA?R=-U:b.ArrowRight||b.KeyD?R=U:R*=.8,c+=R,c<-s/2?c=p+s/2:c>p+s/2&&(c=-s/2),k>0?(F=-8,k--):F+=Z,j>0&&(F=-18,j=0),f+=F,A>0&&A--;const l=Math.max(0,-f+h);l>C&&(C=l,u=Math.floor(C/10),B(u)),f<m+200&&(m=f-200),f>m+h+100&&(H=!1,M("gameOver"),u>D&&($(u),localStorage.setItem("doodlejump-highscore",u.toString())))}function le(){for(const t of d)t.type==="moving"&&!t.broken&&(t.x+=t.direction*2,(t.x<=0||t.x>=p-o)&&(t.direction*=-1),t.sprite.x=t.x),t.y>m+h+100&&(r.stage.removeChild(t.sprite),d.splice(d.indexOf(t),1));const l=d.reduce((t,a)=>a.y<t.y?a:t,d[0]);if(l&&l.y>m-400)for(let t=0;t<5;t++){const a=Math.random()*(p-o),n=l.y-z*(t+1);d.push(L(a,n)),Math.random()<.1&&y.push(K(a+o/2,n-30))}}function ne(){const l=f+s/2,t=c,a=c+s;if(F>0){for(const n of d)if(!n.broken&&l>=n.y&&l<=n.y+g+10&&a>=n.x&&t<=n.x+o){n.type==="breakable"?(n.broken=!0,n.sprite.alpha=.3,setTimeout(()=>{r.stage.children.includes(n.sprite)&&r.stage.removeChild(n.sprite)},500)):n.type==="spring"?j=1:F=Q;break}}for(const n of y)if(Math.sqrt(Math.pow(c+s/2-n.x,2)+Math.pow(f+s/2-n.y,2))<25)switch(r.stage.removeChild(n.sprite),y.splice(y.indexOf(n),1),n.type){case"jetpack":k=120;break;case"spring":j=1;break;case"shield":A=300;break}}function re(){r.stage.y=-m,J.forEach((l,t)=>{l.y=t*200+m*.3})}function oe(){ee(),i.x=c+s/2,i.y=f+s/2}const G=new Y("Score: 0",{fontSize:24,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:3});G.x=10,G.y=10;const O=new Y("Height: 0m",{fontSize:20,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:3});O.x=10,O.y=40;const I=new V;I.addChild(G),I.addChild(O);function ae(){H&&(ie(),le(),ne(),re(),oe(),G.text=`Score: ${u}`,O.text=`Height: ${Math.floor(C/10)}m`)}function N(l){b[l.code]=!0}function W(l){b[l.code]=!1}return window.addEventListener("keydown",N),window.addEventListener("keyup",W),r.stage.addChild(i),r.stage.addChild(I),te(),r.ticker.add(ae),()=>{H=!1,window.removeEventListener("keydown",N),window.removeEventListener("keyup",W),x.current&&r.view instanceof Node&&x.current.removeChild(r.view),r.destroy()}},[v]);const X=()=>{M("playing"),B(0)},q=()=>{M("playing"),B(0)};if(v==="start")return w.jsx(de,{title:"ü¶ò DOODLE JUMP",description:"¬°Salta tan alto como puedas sin caer!",instructions:[{title:"Controles",items:["‚¨ÖÔ∏è‚û°Ô∏è Flechas o A/D: Mover horizontalmente","üîÑ Los bordes te teletransportan"],icon:"üéÆ"},{title:"Tipos de Plataformas",items:["üü¢ Normales: Salto est√°ndar","üîµ M√≥viles: Se mueven de lado a lado","üü† Resorte: Super salto hacia arriba","üü§ Fr√°giles: Se rompen al tocarlas"],icon:"üß±"},{title:"Power-ups Especiales",items:["üöÄ Jetpack: Vuelo temporal autom√°tico","‚ö° S√∫per Salto: Impulso extra potente","üõ°Ô∏è Escudo: Protecci√≥n contra ca√≠das"],icon:"‚ö°"}],onStart:X,highScore:D,theme:{background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",accent:"linear-gradient(45deg, #32CD32, #98FB98, #87CEEB)",primary:"linear-gradient(45deg, #32CD32, #98FB98)"}});if(v==="gameOver"){const r=T===D&&T>0;return w.jsx(ce,{score:T,highScore:D,onRestart:q,onMenu:()=>M("start"),isNewRecord:r,customStats:[{label:"Altura M√°xima",value:`${Math.floor(T*10)}m`}],theme:{background:r?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #DC143C 0%, #B22222 100%)",primary:"linear-gradient(45deg, #32CD32, #98FB98)",secondary:"linear-gradient(45deg, #87CEEB, #4169E1)"}})}return w.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[w.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ü¶ò DOODLE JUMP"}),w.jsx("div",{ref:x,style:{border:"3px solid #32CD32",borderRadius:"10px"}}),w.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem",textAlign:"center"},children:w.jsx("p",{children:"‚Üê‚Üí o A/D para mover ‚Ä¢ ¬°Atrapa los power-ups!"})})]})};export{me as default};
