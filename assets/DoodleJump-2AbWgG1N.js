import{r as u,j as f}from"./index-DT6De0vj.js";import{P as h}from"./phaser-CtSIbetW.js";import{G as S,a as T}from"./GameOverScreen-DSWsITTW.js";const c=400,d=600,l=40,r=70,a=15;class w extends h.Scene{doodle;platforms;powerUps;cursors;wasd;scoreText;heightText;score=0;maxHeight=0;cameraY=0;isGameOver=!1;onGameOver;jetpackTime=0;springBoost=0;shieldTime=0;constructor(e){super("DoodleJumpScene"),this.onGameOver=e}preload(){this.createTextures()}createTextures(){const e=this.make.graphics({x:0,y:0});e.fillStyle(9498256),e.fillEllipse(l/2,l/2,l*.6,l*.8),e.fillStyle(0),e.fillCircle(l/2-8,l/2-12,3),e.fillCircle(l/2+8,l/2-12,3),e.fillStyle(16777215),e.fillCircle(l/2-7,l/2-13,1),e.fillCircle(l/2+9,l/2-13,1),e.fillStyle(2263842),e.fillEllipse(l/2,l/2-5,3,2),e.fillStyle(3329330),e.fillEllipse(l/2-12,l/2+15,6,10),e.fillEllipse(l/2+12,l/2+15,6,10),e.fillStyle(2263842),e.fillEllipse(l/2-15,l/2+22,8,4),e.fillEllipse(l/2+15,l/2+22,8,4),e.generateTexture("doodle",l,l),e.clear(),e.fillStyle(16739125),e.fillEllipse(l/2,l/2,l*.6,l*.8),e.fillStyle(0),e.fillCircle(l/2-8,l/2-12,3),e.fillCircle(l/2+8,l/2-12,3),e.fillStyle(16777215),e.fillCircle(l/2-7,l/2-13,1),e.fillCircle(l/2+9,l/2-13,1),e.fillStyle(2263842),e.fillEllipse(l/2,l/2-5,3,2),e.fillStyle(16729344,.8),e.fillEllipse(l/2-20,l/2+10,8,15),e.fillEllipse(l/2+20,l/2+10,8,15),e.fillStyle(16766720,.6),e.fillEllipse(l/2-20,l/2+25,6,12),e.fillEllipse(l/2+20,l/2+25,6,12),e.generateTexture("doodle-jetpack",l,l);const t=this.make.graphics({x:0,y:0});t.fillStyle(2263842),t.fillRoundedRect(0,0,r,a,7),t.lineStyle(2,3329330);for(let o=5;o<r-5;o+=8)t.moveTo(o,2),t.lineTo(o+2,-2),t.lineTo(o+4,2);t.strokePath(),t.generateTexture("platform-normal",r,a),t.clear(),t.fillStyle(2263842),t.fillRoundedRect(0,0,r,a,7),t.fillStyle(16739125),t.fillEllipse(r/2,a/2,12,8),t.fillStyle(16766720),t.fillEllipse(r/2,a/2,8,5),t.generateTexture("platform-spring",r,a),t.clear(),t.fillStyle(4286945),t.fillRoundedRect(0,0,r,a,7),t.fillStyle(16777215),t.fillTriangle(10,7,15,3,15,11),t.fillTriangle(r-10,7,r-15,3,r-15,11),t.generateTexture("platform-moving",r,a),t.clear(),t.fillStyle(9127187),t.fillRoundedRect(0,0,r,a,7),t.lineStyle(2,6636321),t.moveTo(20,2),t.lineTo(30,a-2),t.moveTo(40,2),t.lineTo(50,a-2),t.strokePath(),t.generateTexture("platform-breakable",r,a);const i=this.make.graphics({x:0,y:0});i.fillStyle(16739125),i.fillRoundedRect(0,0,16,24,4),i.fillStyle(16766720),i.fillCircle(4,4,3),i.fillCircle(12,4,3),i.generateTexture("powerup-jetpack",16,24),i.clear(),i.fillStyle(3329330),i.fillEllipse(8,5,15,10),i.fillStyle(16766720),i.fillEllipse(8,5,10,6),i.generateTexture("powerup-spring",16,10),i.clear(),i.lineStyle(3,49151),i.fillStyle(8900331,.5),i.fillCircle(12,12,12),i.strokeCircle(12,12,12),i.generateTexture("powerup-shield",24,24);const s=this.make.graphics({x:0,y:0});s.fillStyle(16777215,.7),s.fillCircle(20,20,20),s.fillCircle(45,20,25),s.fillCircle(70,20,20),s.fillCircle(35,10,15),s.fillCircle(55,12,18),s.generateTexture("cloud",100,50)}create(){this.physics.world.setBounds(0,-1e5,c,1e5+d),this.add.rectangle(0,0,c,d,8900331).setOrigin(0).setScrollFactor(0);for(let e=0;e<8;e++){const t=h.Math.Between(0,c),i=h.Math.Between(0,d);this.add.image(t,i,"cloud").setScrollFactor(.3)}this.platforms=this.physics.add.group({immovable:!0,allowGravity:!1}),this.powerUps=this.physics.add.group({immovable:!0,allowGravity:!1}),this.createPlatform(c/2,d-50,"normal");for(let e=1;e<20;e++){const t=h.Math.Between(r/2,c-r/2),i=d-50-e*80;this.createPlatform(t,i),e>3&&Math.random()<.15&&this.createPowerUp(t,i-30)}this.doodle=this.physics.add.sprite(c/2,d-150,"doodle"),this.doodle.setCollideWorldBounds(!1),this.doodle.setGravityY(800),this.doodle.setDepth(10),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys(),this.wasd={left:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.D)}),this.scoreText=this.add.text(10,10,"Score: 0",{fontSize:"24px",color:"#ffffff",stroke:"#000000",strokeThickness:3}).setScrollFactor(0).setDepth(100),this.heightText=this.add.text(10,40,"Height: 0m",{fontSize:"20px",color:"#ffffff",stroke:"#000000",strokeThickness:3}).setScrollFactor(0).setDepth(100),this.physics.add.overlap(this.doodle,this.platforms,this.handlePlatformCollision,void 0,this),this.physics.add.overlap(this.doodle,this.powerUps,this.handlePowerUpCollision,void 0,this),this.cameras.main.startFollow(this.doodle,!0,0,1),this.cameras.main.setDeadzone(0,200),this.cameras.main.setBounds(0,-1e5,c,1e5+d)}createPlatform(e,t,i){if(!i){const n=["normal","spring","moving","breakable"];i=t<-500&&Math.random()<.3?n[Math.floor(Math.random()*n.length)]:"normal"}const s=`platform-${i}`,o=this.platforms.create(e,t,s);o.setData("type",i),i==="moving"&&(o.setVelocityX(100),o.setBounce(1),o.setCollideWorldBounds(!0))}createPowerUp(e,t){const i=["jetpack","spring","shield"],s=i[Math.floor(Math.random()*i.length)],o=`powerup-${s}`;this.powerUps.create(e,t,o).setData("type",s)}handlePlatformCollision(e,t){const i=e,s=t;if(i.body.velocity.y>0&&i.y<s.y){const o=s.getData("type");o==="breakable"?(s.setAlpha(.5),this.tweens.add({targets:s,alpha:0,y:s.y+20,duration:200,onComplete:()=>s.destroy()})):o==="spring"?(this.springBoost=1,i.setVelocityY(-1e3)):i.setVelocityY(-600)}}handlePowerUpCollision(e,t){const i=t,s=i.getData("type");switch(i.destroy(),s){case"jetpack":this.jetpackTime=120,this.doodle.setTexture("doodle-jetpack");break;case"spring":this.springBoost=1,this.doodle.setVelocityY(-1200);break;case"shield":this.shieldTime=300;break}}update(){if(this.isGameOver)return;this.cursors.left.isDown||this.wasd.left.isDown?(this.doodle.setVelocityX(-300),this.doodle.setFlipX(!0)):this.cursors.right.isDown||this.wasd.right.isDown?(this.doodle.setVelocityX(300),this.doodle.setFlipX(!1)):this.doodle.setVelocityX(this.doodle.body.velocity.x*.9),this.doodle.x<-20&&(this.doodle.x=c+20),this.doodle.x>c+20&&(this.doodle.x=-20),this.jetpackTime>0&&(this.doodle.setVelocityY(-500),this.jetpackTime--,this.jetpackTime===0&&this.doodle.setTexture("doodle"));const e=Math.max(0,Math.floor((-this.doodle.y+d-150)/10));e>this.maxHeight&&(this.maxHeight=e,this.score=this.maxHeight,this.scoreText.setText(`Score: ${this.score}`),this.heightText.setText(`Height: ${this.maxHeight}m`));const t=this.cameras.main.scrollY+d,i=this.cameras.main.scrollY;let s=1e5;if(this.platforms.children.entries.forEach(o=>{o.y<s&&(s=o.y)}),s>i-100){const o=h.Math.Between(r/2,c-r/2),n=s-h.Math.Between(60,100);this.createPlatform(o,n),Math.random()<.1&&this.createPowerUp(o,n-30)}this.platforms.children.entries.forEach(o=>{o.y>t+100&&o.destroy()}),this.doodle.y>t+100&&(this.isGameOver=!0,this.onGameOver(this.score))}}const v=()=>{const[m,e]=u.useState("start"),[t,i]=u.useState(0),[s,o]=u.useState(()=>{const p=localStorage.getItem("doodlejump-highscore");return p?parseInt(p):0}),n=u.useRef(null);u.useEffect(()=>{if(m==="playing"){const p={type:h.AUTO,width:c,height:d,parent:"phaser-game",backgroundColor:"#87CEEB",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:new w(g=>{i(g),g>s&&(o(g),localStorage.setItem("doodlejump-highscore",g.toString())),e("gameOver")})};return n.current=new h.Game(p),()=>{n.current&&(n.current.destroy(!0),n.current=null)}}},[m,s]);const y=()=>{e("playing"),i(0)},x=()=>{e("playing"),i(0)};if(m==="start")return f.jsx(S,{title:"ü¶ò DOODLE JUMP",description:"¬°Salta tan alto como puedas sin caer!",instructions:[{title:"Controles",items:["‚¨ÖÔ∏è‚û°Ô∏è Flechas o A/D: Mover horizontalmente","üîÑ Los bordes te teletransportan"],icon:"üéÆ"},{title:"Tipos de Plataformas",items:["üü¢ Normales: Salto est√°ndar","üîµ M√≥viles: Se mueven de lado a lado","üü† Resorte: Super salto hacia arriba","üü§ Fr√°giles: Se rompen al tocarlas"],icon:"üß±"},{title:"Power-ups Especiales",items:["üöÄ Jetpack: Vuelo temporal autom√°tico","‚ö° S√∫per Salto: Impulso extra potente","üõ°Ô∏è Escudo: Protecci√≥n contra ca√≠das"],icon:"‚ö°"}],onStart:y,highScore:s,theme:{background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",accent:"linear-gradient(45deg, #32CD32, #98FB98, #87CEEB)",primary:"linear-gradient(45deg, #32CD32, #98FB98)"}});if(m==="gameOver"){const p=t===s&&t>0;return f.jsx(T,{score:t,highScore:s,onRestart:x,onMenu:()=>e("start"),isNewRecord:p,customStats:[{label:"Altura M√°xima",value:`${Math.floor(t*10)}m`}],theme:{background:p?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #DC143C 0%, #B22222 100%)",primary:"linear-gradient(45deg, #32CD32, #98FB98)",secondary:"linear-gradient(45deg, #87CEEB, #4169E1)"}})}return f.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #87CEEB 0%, #98FB98 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[f.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ü¶ò DOODLE JUMP"}),f.jsx("div",{id:"phaser-game",style:{border:"3px solid #32CD32",borderRadius:"10px",overflow:"hidden"}}),f.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem",textAlign:"center"},children:f.jsx("p",{children:"‚Üê‚Üí o A/D para mover ‚Ä¢ ¬°Atrapa los power-ups!"})})]})};export{v as default};
