import{r as s,j as r}from"./index-vJFL1dzY.js";import{A as Z,C as j,G as v,T as C}from"./HTMLText-CeZkFdUK.js";import{G as q,a as J}from"./GameOverScreen-DshzEBP7.js";const A=720,D=540,m=80,R=70,ie=()=>{const g=s.useRef(null),[u,x]=s.useState("start"),[y,b]=s.useState(0),[K,T]=s.useState(60),[l,G]=s.useState("medium"),[w,I]=s.useState(()=>{const i=localStorage.getItem("whac-highscore");return i?parseInt(i):0});s.useEffect(()=>{if(u!=="playing")return;const i=new Z({width:A,height:D,backgroundColor:3046706});g.current&&i.view instanceof Node&&g.current.appendChild(i.view);let p=!0,d=0,f=60,a=0;const M={easy:{moleShowTime:120,spawnRate:.02,maxMoles:2},medium:{moleShowTime:90,spawnRate:.03,maxMoles:3},hard:{moleShowTime:60,spawnRate:.04,maxMoles:4}}[l],k=new j;i.stage.addChild(k);for(let o=0;o<50;o++){const t=new v;t.beginFill(5025616,Math.random()*.3+.7),t.drawRect(0,0,15,8),t.endFill(),t.x=Math.random()*A,t.y=Math.random()*D,t.rotation=Math.random()*Math.PI,k.addChild(t)}const E=[],H=3,L=3,O=120,_=100,$=180,N=140;for(let o=0;o<H;o++)for(let t=0;t<L;t++){const e=O+t*$,c=_+o*N,n=new v;n.beginFill(1793568),n.drawEllipse(0,0,m/2,m/3),n.endFill(),n.beginFill(3046706),n.drawEllipse(0,-5,m/2+5,m/3+3),n.endFill(),n.beginFill(1793568),n.drawEllipse(0,0,m/2,m/3),n.endFill(),n.x=e,n.y=c,i.stage.addChild(n),E.push({x:e,y:c,hasMole:!1,holeSprite:n,timer:0,showTime:0})}function P(o){const t=new j,e=new v;e.beginFill(9268835),e.drawEllipse(0,0,R/2,R/2.5),e.endFill(),e.beginFill(7951688),e.drawEllipse(0,15,15,8),e.endFill(),e.beginFill(0),e.drawCircle(-12,-8,4),e.drawCircle(12,-8,4),e.endFill(),e.beginFill(16777215),e.drawCircle(-10,-10,1.5),e.drawCircle(14,-10,1.5),e.endFill(),e.beginFill(0),e.drawEllipse(0,12,3,2),e.endFill(),e.lineStyle(2,0),e.moveTo(-20,8),e.lineTo(-35,5),e.moveTo(-20,15),e.lineTo(-35,18),e.moveTo(20,8),e.lineTo(35,5),e.moveTo(20,15),e.lineTo(35,18),e.beginFill(7162945),e.drawEllipse(-18,-20,8,6),e.drawEllipse(18,-20,8,6),e.endFill(),t.addChild(e),t.x=o.x,t.y=o.y,t.interactive=!0,t.cursor="pointer",t.on("pointerdown",()=>{!p||!o.hasMole||B(o)}),i.stage.addChild(t),o.moleSprite=t,o.hasMole=!0,o.showTime=M.moleShowTime}function B(o){if(!o.hasMole||!o.moleSprite)return;i.stage.removeChild(o.moleSprite),o.moleSprite=void 0,o.hasMole=!1,o.timer=Math.random()*180+60,a++;const t=a>5?15:a>3?10:5;d+=t,b(d);const e=new C(`+${t}`,{fontSize:32,fill:a>5?16766720:a>3?16737095:5025616,fontWeight:"bold"});e.anchor.set(.5),e.x=o.x,e.y=o.y-50,i.stage.addChild(e);let c=60;const n=()=>{c>0?(e.y-=2,e.alpha=c/60,c--,setTimeout(n,16)):i.stage.removeChild(e)};n()}function U(o){o.moleSprite&&(i.stage.removeChild(o.moleSprite),o.moleSprite=void 0),o.hasMole=!1,o.timer=Math.random()*120+30,a=0}const S=new C("Score: 0",{fontSize:32,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:3});S.x=20,S.y=20,i.stage.addChild(S);const F=new C("Time: 60",{fontSize:32,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:3});F.x=A-180,F.y=20,i.stage.addChild(F);const h=new C("Combo: 0",{fontSize:24,fill:16766720,fontWeight:"bold",stroke:0,strokeThickness:2});h.x=20,h.y=70,i.stage.addChild(h);const X=setInterval(()=>{p&&f>0&&(f--,T(f),f<=0&&(p=!1,x("gameOver"),d>w&&(I(d),localStorage.setItem("whac-highscore",d.toString()))))},1e3);function Y(){if(!p)return;const o=E.filter(t=>t.hasMole).length;for(const t of E)t.hasMole&&t.moleSprite?(t.showTime--,t.showTime<=0&&U(t)):t.hasMole||(t.timer--,t.timer<=0&&o<M.maxMoles&&Math.random()<M.spawnRate&&P(t));S.text=`Score: ${d}`,F.text=`Time: ${f}`,h.text=`Combo: ${a}`,h.style.fill=a>5?16766720:a>3?16737095:a>0?5025616:16777215}return i.ticker.add(Y),()=>{p=!1,clearInterval(X),g.current&&i.view instanceof Node&&g.current.removeChild(i.view),i.destroy()}},[u,l]);const W=()=>{x("playing"),b(0),T(60)},z=()=>{x("playing"),b(0),T(60)};if(u==="start")return r.jsx(q,{title:"ðŸ”¨ WHAC-A-MOLE",description:"Â¡Golpea a los topos antes de que se escondan!",instructions:[{title:"Controles y PuntuaciÃ³n",items:["ðŸ–±ï¸ Click en los topos para golpearlos","âš¡ Sistema de combos: mÃ¡s hits seguidos = mÃ¡s puntos"],icon:"ðŸŽ®"},{title:"Consejos Pro",items:["â€¢ MantÃ©n la vista en todo el campo","â€¢ Los combos dan puntos extra","â€¢ Â¡Reacciona rÃ¡pido pero con precisiÃ³n!"],icon:"ðŸ’¡"}],highScore:w,onStart:W,theme:{background:"linear-gradient(135deg, #2E7D32 0%, #4CAF50 100%)",primary:"linear-gradient(45deg, #8D6E63, #A1887F)",secondary:"rgba(255, 255, 255, 0.2)",accent:"linear-gradient(45deg, #8D6E63, #D7CCC8)",text:"white"},children:r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"15px",padding:"1.2rem",marginBottom:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[r.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"1rem",color:"#fff"},children:"ðŸŽ¯ Selecciona Dificultad"}),r.jsx("div",{style:{display:"flex",gap:"0.8rem",justifyContent:"center",flexWrap:"wrap"},children:["easy","medium","hard"].map(i=>r.jsxs("button",{onClick:()=>G(i),style:{padding:"0.6rem 1rem",fontSize:"0.9rem",background:l===i?"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.2)",border:l===i?"2px solid #4CAF50":"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold",transition:"all 0.3s ease",textAlign:"center"},children:[r.jsx("div",{children:i.charAt(0).toUpperCase()+i.slice(1)}),r.jsxs("div",{style:{fontSize:"0.7rem",opacity:.8},children:[i==="easy"&&"2 topos max",i==="medium"&&"3 topos max",i==="hard"&&"4 topos max"]})]},i))})]})});if(u==="gameOver"){const i=y===w&&y>0;return r.jsx(J,{score:y,highScore:w,isNewRecord:i,onRestart:z,onMenu:()=>x("start"),theme:{background:i?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #8D6E63 0%, #5D4037 100%)",primary:"linear-gradient(45deg, #8D6E63, #A1887F)",secondary:"#4CAF50",accent:i?"linear-gradient(45deg, #FFFFFF, #FFFF00)":"linear-gradient(45deg, #FFFFFF, #D7CCC8)"},customStats:[{label:"Dificultad",value:l.charAt(0).toUpperCase()+l.slice(1)},{label:"Mensaje",value:i?"Â¡IncreÃ­ble precisiÃ³n con el martillo!":"Los topos fueron mÃ¡s rÃ¡pidos..."}]})}return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #2E7D32 0%, #4CAF50 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[r.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ðŸ”¨ WHAC-A-MOLE"}),r.jsx("div",{ref:g,style:{border:"3px solid #8D6E63",borderRadius:"10px"}}),r.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:r.jsx("p",{children:"Â¡Click en los topos para golpearlos!"})})]})};export{ie as default};
