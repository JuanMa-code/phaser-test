import{r as M,A as T,G as v,j as I,T as w}from"./index-BWwchVWG.js";const d=800,l=600,x=32,y=48,S=6;function C(){const h=Math.random()*Math.PI*2,o=2+Math.random()*2;return{x:Math.random()<.5?0:d,y:Math.random()*l,vx:Math.cos(h)*o,vy:Math.sin(h)*o,angle:h}}const F=()=>{const h=M.useRef(null);return M.useEffect(()=>{const o=new T({width:d,height:l,backgroundColor:0});h.current&&o.view instanceof Node&&h.current.appendChild(o.view);const n=new v;n.beginFill(16777215),n.moveTo(0,-x/2),n.lineTo(x/2,x/2),n.lineTo(-x/2,x/2),n.lineTo(0,-x/2),n.endFill(),n.x=d/2,n.y=l/2,o.stage.addChild(n);let g=0,f=0,r=[],a=[],u=0,c=!1;for(let t=0;t<5;t++){const e=C(),i=new v;i.beginFill(8947848),i.drawCircle(0,0,y/2),i.endFill(),i.x=e.x,i.y=e.y,o.stage.addChild(i),a.push({g:i,vx:e.vx,vy:e.vy})}function E(){if(c)return;const t=g-Math.PI/2,e=Math.cos(t)*10,i=Math.sin(t)*10,s=new v;s.beginFill(16711680),s.drawCircle(0,0,S),s.endFill(),s.x=n.x,s.y=n.y,o.stage.addChild(s),r.push({g:s,vx:e,vy:i})}function b(){r.forEach(t=>o.stage.removeChild(t.g)),a.forEach(t=>o.stage.removeChild(t.g)),r=[],a=[],u=0,c=!1,n.x=d/2,n.y=l/2,g=0,f=0;for(let t=0;t<5;t++){const e=C(),i=new v;i.beginFill(8947848),i.drawCircle(0,0,y/2),i.endFill(),i.x=e.x,i.y=e.y,o.stage.addChild(i),a.push({g:i,vx:e.vx,vy:e.vy})}}function A(){if(c)return;n.x+=Math.cos(g-Math.PI/2)*f,n.y+=Math.sin(g-Math.PI/2)*f,n.x=(n.x+d)%d,n.y=(n.y+l)%l,n.rotation=g;for(let e=r.length-1;e>=0;e--)r[e].g.x+=r[e].vx,r[e].g.y+=r[e].vy,(r[e].g.x<0||r[e].g.x>d||r[e].g.y<0||r[e].g.y>l)&&(o.stage.removeChild(r[e].g),r.splice(e,1));for(let e=a.length-1;e>=0;e--)a[e].g.x+=a[e].vx,a[e].g.y+=a[e].vy,a[e].g.x=(a[e].g.x+d)%d,a[e].g.y=(a[e].g.y+l)%l;for(let e=r.length-1;e>=0;e--)for(let i=a.length-1;i>=0;i--){const s=r[e],p=a[i];if(Math.abs(s.g.x-p.g.x)<y/2&&Math.abs(s.g.y-p.g.y)<y/2){o.stage.removeChild(p.g),o.stage.removeChild(s.g),a.splice(i,1),r.splice(e,1),u++;break}}for(const e of a)Math.abs(n.x-e.g.x)<y/2&&Math.abs(n.y-e.g.y)<y/2&&(c=!0);a.length===0&&(c=!0),o.stage.children.filter(e=>e instanceof w).forEach(e=>o.stage.removeChild(e));const t=new w(`Score: ${u}`,{fill:16777215,fontSize:32});if(t.x=10,t.y=10,o.stage.addChild(t),c){const e=new w("Game Over! Pulsa espacio para reiniciar",{fill:16711680,fontSize:32});e.x=200,e.y=l/2-30,o.stage.addChild(e)}}o.ticker.add(A);const m=t=>{if(c&&t.code==="Space"){b();return}c||(t.key==="ArrowLeft"&&(g-=.15),t.key==="ArrowRight"&&(g+=.15),t.key==="ArrowUp"&&(f=Math.min(f+.5,8)),t.key==="ArrowDown"&&(f=Math.max(f-.5,0)),t.code==="Space"&&E())};return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m),o.destroy(!0,{children:!0})}},[]),I.jsx("div",{ref:h,style:{width:d,height:l,margin:"auto"}})};export{F as default};
