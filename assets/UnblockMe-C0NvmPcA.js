import{r as p,j as l}from"./index-vJFL1dzY.js";import{A as ri,G as W,C as ni,T as D}from"./HTMLText-CeZkFdUK.js";import{G as li,a as $}from"./GameOverScreen-DshzEBP7.js";const E=480,B=480,c=6,e=80,v=[[{id:0,x:1,y:2,width:2,height:1,color:16724787,direction:"horizontal",isTarget:!0},{id:1,x:3,y:1,width:1,height:3,color:4286945,direction:"vertical"},{id:2,x:0,y:0,width:2,height:1,color:3329330,direction:"horizontal"},{id:3,x:4,y:0,width:1,height:2,color:16766720,direction:"vertical"},{id:4,x:0,y:1,width:1,height:2,color:16738740,direction:"vertical"},{id:5,x:1,y:3,width:2,height:1,color:9055202,direction:"horizontal"},{id:6,x:4,y:4,width:2,height:1,color:52945,direction:"horizontal"}],[{id:0,x:0,y:2,width:2,height:1,color:16724787,direction:"horizontal",isTarget:!0},{id:1,x:2,y:0,width:1,height:3,color:4286945,direction:"vertical"},{id:2,x:3,y:0,width:2,height:1,color:3329330,direction:"horizontal"},{id:3,x:5,y:0,width:1,height:3,color:16766720,direction:"vertical"},{id:4,x:0,y:0,width:1,height:2,color:16738740,direction:"vertical"},{id:5,x:1,y:0,width:1,height:2,color:9055202,direction:"vertical"},{id:6,x:3,y:3,width:1,height:2,color:52945,direction:"vertical"},{id:7,x:4,y:3,width:1,height:2,color:16753920,direction:"vertical"},{id:8,x:0,y:4,width:3,height:1,color:9662683,direction:"horizontal"}],[{id:0,x:2,y:2,width:2,height:1,color:16724787,direction:"horizontal",isTarget:!0},{id:1,x:0,y:0,width:1,height:3,color:4286945,direction:"vertical"},{id:2,x:1,y:0,width:2,height:1,color:3329330,direction:"horizontal"},{id:3,x:4,y:0,width:1,height:2,color:16766720,direction:"vertical"},{id:4,x:5,y:0,width:1,height:3,color:16738740,direction:"vertical"},{id:5,x:1,y:1,width:1,height:2,color:9055202,direction:"vertical"},{id:6,x:4,y:3,width:2,height:1,color:52945,direction:"horizontal"},{id:7,x:2,y:0,width:1,height:2,color:16753920,direction:"vertical"},{id:8,x:3,y:1,width:1,height:2,color:9662683,direction:"vertical"},{id:9,x:0,y:4,width:2,height:1,color:2263842,direction:"horizontal"},{id:10,x:2,y:4,width:2,height:1,color:14423100,direction:"horizontal"}],[{id:0,x:1,y:2,width:2,height:1,color:16724787,direction:"horizontal",isTarget:!0},{id:1,x:0,y:0,width:1,height:2,color:4286945,direction:"vertical"},{id:2,x:1,y:0,width:1,height:2,color:3329330,direction:"vertical"},{id:3,x:2,y:0,width:2,height:1,color:16766720,direction:"horizontal"},{id:4,x:4,y:0,width:1,height:3,color:16738740,direction:"vertical"},{id:5,x:5,y:0,width:1,height:2,color:9055202,direction:"vertical"},{id:6,x:2,y:1,width:1,height:2,color:52945,direction:"vertical"},{id:7,x:3,y:1,width:1,height:2,color:16753920,direction:"vertical"},{id:8,x:0,y:3,width:1,height:2,color:9662683,direction:"vertical"},{id:9,x:3,y:3,width:2,height:1,color:2263842,direction:"horizontal"},{id:10,x:5,y:3,width:1,height:2,color:14423100,direction:"vertical"},{id:11,x:1,y:4,width:2,height:1,color:4620980,direction:"horizontal"},{id:12,x:4,y:5,width:2,height:1,color:11674146,direction:"horizontal"}],[{id:0,x:0,y:2,width:2,height:1,color:16724787,direction:"horizontal",isTarget:!0},{id:1,x:2,y:0,width:1,height:2,color:4286945,direction:"vertical"},{id:2,x:3,y:0,width:1,height:3,color:3329330,direction:"vertical"},{id:3,x:4,y:0,width:2,height:1,color:16766720,direction:"horizontal"},{id:4,x:0,y:0,width:2,height:1,color:16738740,direction:"horizontal"},{id:5,x:0,y:1,width:1,height:2,color:9055202,direction:"vertical"},{id:6,x:1,y:1,width:1,height:2,color:52945,direction:"vertical"},{id:7,x:4,y:1,width:1,height:2,color:16753920,direction:"vertical"},{id:8,x:5,y:1,width:1,height:3,color:9662683,direction:"vertical"},{id:9,x:2,y:3,width:1,height:2,color:2263842,direction:"vertical"},{id:10,x:3,y:4,width:1,height:2,color:14423100,direction:"vertical"},{id:11,x:0,y:4,width:2,height:1,color:4620980,direction:"horizontal"},{id:12,x:4,y:4,width:1,height:2,color:11674146,direction:"vertical"},{id:13,x:0,y:5,width:3,height:1,color:9419919,direction:"horizontal"}]],ci=()=>{const C=p.useRef(null),[z,x]=p.useState("start"),[s,G]=p.useState(0),[T,S]=p.useState(0),[m,H]=p.useState(()=>{const o=localStorage.getItem("unblockme-best-moves");return o?JSON.parse(o):Array(v.length).fill(1/0)});p.useEffect(()=>{if(z!=="playing")return;const o=new ri({width:E,height:B,backgroundColor:2889744});C.current&&o.view instanceof Node&&C.current.appendChild(o.view);let u=!0,g=v[s].map(i=>({...i})),y=null,M={x:0,y:0},F=0,L=!1,P={x:0,y:0};const f=new W;f.beginFill(9127187),f.drawRect(0,0,E,B),f.endFill();for(let i=0;i<20;i++)f.lineStyle(2,6636321,.3),f.moveTo(Math.random()*E,0),f.lineTo(Math.random()*E,B);o.stage.addChild(f);const d=new W;d.beginFill(16113331),d.lineStyle(4,9127187),d.drawRoundedRect(0,0,c*e,c*e,10),d.endFill();for(let i=0;i<=c;i++)d.lineStyle(1,13808780,.5),d.moveTo(i*e,0),d.lineTo(i*e,c*e),d.moveTo(0,i*e),d.lineTo(c*e,i*e);d.lineStyle(4,16724787),d.beginFill(16724787,.3),d.drawRect(c*e-20,2*e+10,20,e-20),d.endFill(),d.beginFill(16724787),d.drawPolygon([c*e-15,2*e+20,c*e-5,2*e+30,c*e-15,2*e+40]),d.endFill(),o.stage.addChild(d);const A=[];function Z(i,n){const t=new W;if(t.beginFill(0,.2),t.drawRoundedRect(4,4,i.width*e-8,i.height*e-8,8),t.endFill(),i.isTarget){t.beginFill(16724787),t.drawRoundedRect(0,0,i.width*e-8,i.height*e-8,8),t.endFill(),t.beginFill(16737894,.5),t.drawRoundedRect(2,2,i.width*e-12,i.height*e/2-6,6),t.endFill(),t.beginFill(16777215);const r=(i.width*e-8)/2,h=(i.height*e-8)/2;t.drawCircle(r,h,8),t.endFill(),t.beginFill(16724787),t.drawCircle(r,h,5),t.endFill()}else{t.beginFill(i.color),t.drawRoundedRect(0,0,i.width*e-8,i.height*e-8,8),t.endFill();const r=Math.min(255,(i.color>>16&255)+51),h=Math.min(255,(i.color>>8&255)+51),a=Math.min(255,(i.color&255)+51),w=r<<16|h<<8|a;t.beginFill(w,.5),t.drawRoundedRect(2,2,i.width*e-12,i.height*e/2-6,6),t.endFill()}if(y===n&&(t.lineStyle(4,16766720),t.drawRoundedRect(-2,-2,i.width*e-4,i.height*e-4,10)),t.beginFill(16777215,.8),i.direction==="horizontal"){const r=(i.height*e-8)/2;t.drawPolygon([5,r-3,10,r,5,r+3]),t.drawPolygon([i.width*e-13,r-3,i.width*e-8,r,i.width*e-13,r+3])}else{const r=(i.width*e-8)/2;t.drawPolygon([r-3,5,r,10,r+3,5]),t.drawPolygon([r-3,i.height*e-13,r,i.height*e-8,r+3,i.height*e-13])}return t.endFill(),t.x=i.x*e+4,t.y=i.y*e+4,t.interactive=!0,t.cursor="pointer",t}function j(){A.forEach(i=>o.stage.removeChild(i)),A.length=0,g.forEach((i,n)=>{const t=Z(i,n);A.push(t),o.stage.addChild(t)})}function Q(i,n,t,r){if(n<0||t<0||n+i.width>c||t+i.height>c)return!1;for(let h=0;h<g.length;h++){if(h===r)continue;const a=g[h];if(n<a.x+a.width&&n+i.width>a.x&&t<a.y+a.height&&t+i.height>a.y)return!1}return!0}function X(){const i=g.find(n=>n.isTarget);return i?i.x+i.width===c:!1}function Y(i){if(!u)return;const{x:n,y:t}=i.global,r=n-4,h=t-4;for(let a=0;a<g.length;a++){const w=g[a],k=w.x*e,q=w.y*e,ti=k+w.width*e,oi=q+w.height*e;if(r>=k&&r<=ti&&h>=q&&h<=oi){y=a,L=!0,P={x:w.x,y:w.y},M.x=r-k,M.y=h-q,j();break}}}function ii(i){if(!u||y===null||!L)return;const n=g[y],{x:t,y:r}=i.global;let h=n.x,a=n.y;n.direction==="horizontal"?h=Math.round((t-4-M.x)/e):a=Math.round((r-4-M.y)/e),Q(n,h,a,y)&&(n.x=h,n.y=a,j())}function U(){if(!u||y===null)return;const i=g[y];if((i.x!==P.x||i.y!==P.y)&&(F++,S(F),X())){if(u=!1,F<m[s]){const n=[...m];n[s]=F,H(n),localStorage.setItem("unblockme-best-moves",JSON.stringify(n))}s===v.length-1?x("gameComplete"):x("levelComplete")}y=null,L=!1,j()}const b=new ni,I=new D(`Nivel ${s+1}/${v.length}`,{fontSize:24,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:2});I.x=10,I.y=10,b.addChild(I);const R=new D(`Movimientos: ${F}`,{fontSize:20,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:2});R.x=10,R.y=40,b.addChild(R);const O=new D(`Mejor: ${m[s]===1/0?"-":m[s]}`,{fontSize:18,fill:16766720,fontWeight:"bold",stroke:0,strokeThickness:2});O.x=10,O.y=65,b.addChild(O);const N=new D("Mueve el bloque rojo a la salida â†’",{fontSize:16,fill:16777215,stroke:0,strokeThickness:1});N.x=10,N.y=B-30,b.addChild(N),o.stage.addChild(b),o.stage.interactive=!0,o.stage.on("pointerdown",Y),o.stage.on("pointermove",ii),o.stage.on("pointerup",U),o.stage.on("pointerupoutside",U);function ei(){u&&(R.text=`Movimientos: ${F}`)}return o.ticker.add(ei),j(),()=>{u=!1,C.current&&o.view instanceof Node&&C.current.removeChild(o.view),o.destroy()}},[z,s]);const V=()=>{x("playing"),G(0),S(0)},_=()=>{G(o=>o+1),S(0),x("playing")},J=()=>{S(0),x("playing")},K=()=>{G(0),S(0),H(Array(v.length).fill(1/0)),localStorage.removeItem("unblockme-best-moves"),x("playing")};if(z==="start")return l.jsx(li,{title:"ğŸ§© UNBLOCK ME",description:"Mueve el bloque rojo ğŸŸ¥ hasta la salida usando el menor nÃºmero de movimientos",instructions:[{title:"Controles",items:["ğŸ–±ï¸ Click y arrastra los bloques","â†”ï¸ Bloques horizontales: izq/der","â†•ï¸ Bloques verticales: arriba/abajo"],icon:"ğŸ•¹ï¸"},{title:"Estrategia",items:["â€¢ Planifica antes de mover","â€¢ Libera espacio primero","â€¢ Piensa varios pasos adelante"],icon:"ğŸ’¡"}],features:[`${v.length} niveles de dificultad creciente`],onStart:V,theme:{background:"linear-gradient(45deg, #8B4513 0%, #CD853F 50%, #DEB887 100%)",primaryColor:"#8B4513",secondaryColor:"#CD853F",accentColor:"#FFD700",titleGradient:"linear-gradient(45deg, #FFD700, #FFA500)",buttonGradient:"linear-gradient(45deg, #8B4513, #CD853F)"}});if(z==="levelComplete"){const o=T<m[s];return l.jsx($,{title:o?"ğŸ† Â¡NUEVO RÃ‰CORD!":"ğŸ‰ Â¡NIVEL COMPLETADO!",score:T,onRestart:J,onMenu:()=>x("start"),theme:{background:"linear-gradient(135deg, #32CD32 0%, #98FB98 100%)",primaryColor:"#32CD32",secondaryColor:"#98FB98",accentColor:"#FFD700",titleGradient:"linear-gradient(45deg, #FFFFFF, #FFFF00)",buttonGradient:"linear-gradient(45deg, #32CD32, #98FB98)"},customContent:l.jsxs("div",{style:{fontSize:"1.2rem",margin:"1rem 0"},children:[l.jsxs("p",{children:["ğŸ“Š Nivel ",s+1," completado"]}),l.jsxs("p",{children:["ğŸ¯ Movimientos usados: ",l.jsx("strong",{children:T})]}),l.jsxs("p",{children:["ğŸ† Tu mejor rÃ©cord: ",l.jsx("strong",{children:Math.min(T,m[s])})]}),o&&l.jsx("p",{style:{color:"#FFD700",fontWeight:"bold",marginTop:"0.5rem"},children:"Â¡Has superado tu rÃ©cord anterior!"})]}),customButtons:l.jsx("button",{onClick:_,style:{padding:"0.8rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #32CD32, #98FB98)",border:"none",borderRadius:"12px",color:"white",cursor:"pointer",fontWeight:"bold",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",marginBottom:"1rem",width:"100%"},children:"â¡ï¸ Siguiente Nivel"})})}if(z==="gameComplete"){const o=m.reduce((u,g)=>u+(g===1/0?0:g),0);return l.jsx($,{title:"ğŸ† Â¡JUEGO COMPLETADO!",score:o,onRestart:K,onMenu:()=>x("start"),theme:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",primaryColor:"#FFD700",secondaryColor:"#FFA500",accentColor:"#FFFFFF",titleGradient:"linear-gradient(45deg, #FFFFFF, #FFFFE0)",buttonGradient:"linear-gradient(45deg, #8B4513, #CD853F)"},customContent:l.jsxs("div",{style:{fontSize:"1.2rem",margin:"1rem 0"},children:[l.jsxs("p",{children:["ğŸ¯ Has completado todos los ",v.length," niveles"]}),l.jsxs("p",{children:["ğŸ† Total de movimientos Ã³ptimos: ",l.jsx("strong",{children:o})]}),l.jsx("p",{children:"ğŸ§  Â¡Eres un maestro del puzzle!"})]})})}return l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #8B4513 0%, #CD853F 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[l.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ğŸ§© UNBLOCK ME"}),l.jsx("div",{ref:C,style:{border:"3px solid #8B4513",borderRadius:"10px"}}),l.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem",textAlign:"center"},children:l.jsx("p",{children:"ğŸ–±ï¸ Arrastra los bloques â€¢ ğŸ¯ Libera el bloque rojo"})})]})};export{ci as default};
