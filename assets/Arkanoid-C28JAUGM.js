import{r,j as i}from"./index-DT6De0vj.js";import{P as b}from"./phaser-CtSIbetW.js";import{G as A,a as w}from"./GameOverScreen-DSWsITTW.js";const c=800,h=600,u=100,G=20,g=10,x=8,p=300;class j extends b.Scene{paddle;ball;bricks;cursors;wasd;score=0;lives=3;level=1;gameStarted=!1;onScoreUpdate;onLivesUpdate;onGameOver;constructor(e,s,t){super("ArkanoidScene"),this.onScoreUpdate=e,this.onLivesUpdate=s,this.onGameOver=t}create(){this.cameras.main.setBackgroundColor("#1a1a2e"),this.paddle=this.add.rectangle(c/2,h-50,u,G,5090295),this.physics.add.existing(this.paddle,!0),this.ball=this.add.circle(c/2,h-150,g,16697943),this.physics.add.existing(this.ball);const e=this.ball.body;e.setCollideWorldBounds(!0),e.setBounce(1,1),e.setCircle(g),this.bricks=this.physics.add.staticGroup();const s=[16739179,5164484,4569041,9883316,16771751,14524637,10016968];for(let t=0;t<6;t++)for(let o=0;o<10;o++){const a=s[t%s.length],l=25+o*75+35,d=60+t*30+12.5,f=this.add.rectangle(l,d,70,25,a);this.bricks.add(f)}this.physics.add.collider(this.ball,this.paddle,this.hitPaddle,void 0,this),this.physics.add.collider(this.ball,this.bricks,this.hitBrick,void 0,this),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys(),this.wasd=this.input.keyboard.addKeys("A,D")),this.resetBall(),this.physics.world.on("worldbounds",(t,o,a,l,d)=>{a&&t.gameObject===this.ball&&this.hitBottom()}),e.onWorldBounds=!0}update(){this.wasd.A.isDown||this.cursors.left.isDown?this.paddle.x-=x:(this.wasd.D.isDown||this.cursors.right.isDown)&&(this.paddle.x+=x),this.paddle.x=b.Math.Clamp(this.paddle.x,u/2,c-u/2),this.paddle.body.updateFromGameObject(),this.ball.y>h&&this.hitBottom()}hitPaddle(e,s){const t=e.body,a=(e.x-s.x)/(u/2);t.setVelocityX(a*p),Math.abs(t.velocity.y)<50&&t.setVelocityY(-p)}hitBrick(e,s){s.destroy(),this.score+=10,this.onScoreUpdate(this.score),this.bricks.countActive()===0&&(this.scene.pause(),this.onGameOver(!0))}hitBottom(){this.lives--,this.onLivesUpdate(this.lives),this.lives<=0?(this.scene.pause(),this.onGameOver(!1)):this.resetBall()}resetBall(){this.ball.setPosition(c/2,h-150),this.ball.body.setVelocity(p,-p)}}const C=()=>{const y=r.useRef(null),e=r.useRef(null),[s,t]=r.useState(!1),[o,a]=r.useState(!1),[l,d]=r.useState(!1),[f,m]=r.useState(0),[S,v]=r.useState(3);r.useEffect(()=>{if(!s||o||l)return;const k={type:b.AUTO,width:c,height:h,parent:y.current||void 0,backgroundColor:"#1a1a2e",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:new j(n=>m(n),n=>v(n),n=>{n?d(!0):a(!0)})};return e.current=new b.Game(k),()=>{e.current&&(e.current.destroy(!0),e.current=null)}},[s,o,l]);const B=()=>{t(!0),m(0),v(3),a(!1),d(!1)},D=()=>{t(!1),a(!1),d(!1),setTimeout(()=>{m(0),v(3),t(!0)},100)};return s?o||l?i.jsx(w,{score:f,isVictory:l,onRestart:D,onMenu:()=>window.history.back(),theme:{primary:"#feca57",secondary:"#ff6b6b",accent:"#ff9ff3",background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)"}}):i.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[i.jsx("h1",{style:{marginBottom:"1rem",color:"#4dabf7"},children:"ðŸ§± Arkanoid"}),i.jsx("div",{style:{marginBottom:"1rem",color:"#666"},children:"Usa A y D para mover la paleta â€¢ Â¡Destruye todos los bloques!"}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:c,margin:"0 auto",marginBottom:"10px",fontWeight:"bold",fontSize:"20px"},children:[i.jsxs("div",{style:{color:"#ffffff"},children:["Score: ",f]}),i.jsx("div",{style:{color:"#4ecdc4"},children:"Level: 1"}),i.jsxs("div",{style:{color:"#ff6b6b"},children:["Lives: ",S]})]}),i.jsx("div",{ref:y,style:{display:"inline-block",border:"3px solid #4dabf7",borderRadius:"8px",overflow:"hidden"}})]}):i.jsx(A,{title:"ðŸ§± ARKANOID",description:"Â¡Destruye todos los bloques!",instructions:[{title:"Controles",items:["A / Flecha Izq: Mover izquierda","D / Flecha Der: Mover derecha","Evita que la pelota caiga"],icon:"ðŸŽ®"},{title:"Reglas",items:["3 Vidas","10 pts/bloque","FÃ­sica realista"],icon:"ðŸ“‹"}],onStart:B,theme:{primary:"#feca57",secondary:"#ff6b6b",accent:"#ff9ff3",background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)"}})};export{C as default};
