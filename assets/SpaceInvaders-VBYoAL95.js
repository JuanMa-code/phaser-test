import{r as c,j as t}from"./index-Dl9Mtil6.js";import{A as ne,C as se,G as M,T as O}from"./HTMLText-BfyFZK-P.js";const y=800,b=600,g=40,h=30,x=6,U=5,Y=10,pe=()=>{const m=c.useRef(null),[$,T]=c.useState(0),[le,F]=c.useState(3),[K,I]=c.useState(1),[D,w]=c.useState(!1),[L,N]=c.useState(!1),[S,W]=c.useState(!1);c.useEffect(()=>{if(!L||D)return;const a=new ne({width:y,height:b,backgroundColor:657946});m.current&&a.view instanceof Node&&m.current.appendChild(a.view);let p=!0,z=0,j=3,v=1;const V=new se;a.stage.addChild(V);for(let r=0;r<100;r++){const e=new M;e.beginFill(16777215),e.drawCircle(0,0,Math.random()*2),e.endFill(),e.x=Math.random()*y,e.y=Math.random()*b,e.alpha=Math.random()*.8+.2,V.addChild(e)}const n={sprite:new M,x:y/2,y:b-60};n.sprite.beginFill(65416),n.sprite.moveTo(0,-g/2),n.sprite.lineTo(-g/2,g/2),n.sprite.lineTo(g/2,g/2),n.sprite.closePath(),n.sprite.endFill(),n.sprite.lineStyle(2,65450),n.sprite.drawCircle(0,0,g/3),n.sprite.x=n.x,n.sprite.y=n.y,a.stage.addChild(n.sprite);let l=[],o=[],f=[],C=1,G=1,X=20;const k=new O("Score: 0",{fontSize:24,fill:16777215}),A=new O("Lives: 3",{fontSize:24,fill:16711680}),R=new O("Wave: 1",{fontSize:24,fill:65280});k.x=20,k.y=20,A.x=200,A.y=20,R.x=350,R.y=20,a.stage.addChild(k),a.stage.addChild(A),a.stage.addChild(R);function ee(r,e,s){const i={sprite:new M,x:r,y:e,width:h,height:h,active:!0},u=[16729156,16755268,4521796,4474111,16729343],E=u[s%u.length];return i.sprite.beginFill(E),i.sprite.drawRoundedRect(-h/2,-h/2,h,h,5),i.sprite.endFill(),i.sprite.beginFill(16777215),i.sprite.drawCircle(-8,-8,3),i.sprite.drawCircle(8,-8,3),i.sprite.endFill(),i.sprite.x=r,i.sprite.y=e,a.stage.addChild(i.sprite),i}function B(r,e,s){const i={sprite:new M,x:r,y:e,vy:s?-8:4,width:x,height:x*2,active:!0};return i.sprite.beginFill(s?65535:16711680),s?i.sprite.drawRoundedRect(-x/2,-x,x,x*2,2):i.sprite.drawCircle(0,0,x/2),i.sprite.endFill(),i.sprite.x=r,i.sprite.y=e,a.stage.addChild(i.sprite),i}function H(){l=[];for(let r=0;r<U;r++)for(let e=0;e<Y;e++){const s=80+e*60,i=80+r*50;l.push(ee(s,i,r))}}function re(){let r=!1;for(let e of l)if(e.active&&(e.x<=30&&C===-1||e.x>=y-30&&C===1)){r=!0;break}if(r){C*=-1;for(let e of l)if(e.active&&(e.y+=X,e.sprite.y=e.y,e.y>b-100)){p=!1,w(!0);return}G+=.2}else for(let e of l)e.active&&(e.x+=C*G,e.sprite.x=e.x);if(Math.random()<.005){const e=l.filter(s=>s.active);if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];f.push(B(s.x,s.y+20,!1))}}}function te(){for(let r=o.length-1;r>=0;r--){const e=o[r];e.active&&(e.y+=e.vy,e.sprite.y=e.y,e.y<0&&(e.active=!1,a.stage.removeChild(e.sprite),o.splice(r,1)))}for(let r=f.length-1;r>=0;r--){const e=f[r];e.active&&(e.y+=e.vy,e.sprite.y=e.y,e.y>b&&(e.active=!1,a.stage.removeChild(e.sprite),f.splice(r,1)))}}function ie(){for(let r=o.length-1;r>=0;r--){const e=o[r];if(e.active)for(let s=l.length-1;s>=0;s--){const i=l[s];if(!i.active)continue;const u=e.x-i.x,E=e.y-i.y;if(Math.sqrt(u*u+E*E)<20){if(e.active=!1,i.active=!1,a.stage.removeChild(e.sprite),a.stage.removeChild(i.sprite),o.splice(r,1),z+=(U-Math.floor(s/Y))*10,T(z),l.every(ae=>!ae.active)&&(v++,I(v),G=1+v*.5,H(),v>10)){p=!1,W(!0);return}break}}}for(let r=f.length-1;r>=0;r--){const e=f[r];if(!e.active)continue;const s=e.x-n.x,i=e.y-n.y;if(Math.sqrt(s*s+i*i)<25){e.active=!1,a.stage.removeChild(e.sprite),f.splice(r,1),j--,F(j),j<=0&&(p=!1,w(!0));break}}}function _(){p&&(re(),te(),ie(),k.text=`Score: ${z}`,A.text=`Lives: ${j}`,R.text=`Wave: ${v}`,requestAnimationFrame(_))}const d={};function P(r){d[r.key]=!0,(r.key===" "||r.key==="ArrowUp"||r.key==="w"||r.key==="W")&&p&&o.length<3&&o.push(B(n.x,n.y-20,!0))}function q(r){d[r.key]=!1}function Z(){p&&((d.ArrowLeft||d.a||d.A)&&(n.x=Math.max(30,n.x-5)),(d.ArrowRight||d.d||d.D)&&(n.x=Math.min(y-30,n.x+5)),n.sprite.x=n.x,requestAnimationFrame(Z))}return window.addEventListener("keydown",P),window.addEventListener("keyup",q),H(),_(),Z(),()=>{p=!1,window.removeEventListener("keydown",P),window.removeEventListener("keyup",q),m.current&&a.view instanceof Node&&m.current.removeChild(a.view),a.destroy()}},[L,D]);const J=()=>{N(!0),w(!1),W(!1),T(0),F(3),I(1)},Q=()=>{w(!1),W(!1),T(0),F(3),I(1)};return L?D||S?t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:S?"linear-gradient(135deg, #0a1a0a 0%, #1a3a1a 100%)":"linear-gradient(135deg, #1a0a0a 0%, #3a1a1a 100%)",fontFamily:"Arial, sans-serif",color:"white",padding:"2rem"},children:t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[t.jsx("h1",{style:{fontSize:"3rem",margin:"0 0 1rem 0"},children:S?"🏆 ¡VICTORIA!":"💥 ¡GAME OVER!"}),t.jsxs("div",{style:{fontSize:"1.5rem",margin:"2rem 0"},children:[t.jsxs("p",{children:["🎯 Puntuación Final: ",t.jsx("strong",{children:$})]}),t.jsxs("p",{children:["🌊 Oleadas Completadas: ",t.jsx("strong",{children:K-1})]}),S&&t.jsx("p",{style:{color:"#00ff80"},children:"¡Has salvado la Tierra!"})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{onClick:Q,style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #ff0080, #00ff80)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"🔄 Reintentar"}),t.jsx("button",{onClick:()=>N(!1),style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #0a0a1a, #1a1a3a)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"🏠 Menú Principal"})]})]})}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%)",minHeight:"100vh",fontFamily:"Arial, sans-serif",color:"white"},children:[t.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"👾 SPACE INVADERS"}),t.jsx("div",{ref:m,style:{border:"2px solid #444",borderRadius:"10px"}}),t.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:t.jsx("p",{children:"← → A D para mover, Espacio ↑ W para disparar"})})]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh",background:"linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%)",fontFamily:"Arial, sans-serif",color:"white",padding:"2rem"},children:t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",maxWidth:"600px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[t.jsx("h1",{style:{fontSize:"4rem",margin:"0 0 1rem 0",background:"linear-gradient(45deg, #ff0080, #00ff80, #0080ff, #8000ff)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"👾 SPACE INVADERS"}),t.jsx("p",{style:{fontSize:"1.2rem",margin:"1rem 0",opacity:.9},children:"¡Defiende la Tierra de la invasión alienígena!"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",margin:"2rem 0"},children:[t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#00ff80"},children:"🚀 Controles"}),t.jsx("p",{children:"← → A D: Mover nave"}),t.jsx("p",{children:"Espacio ↑ W: Disparar"}),t.jsx("p",{children:"Max 3 balas simultáneas"})]}),t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#ff0080"},children:"🎯 Puntuación"}),t.jsx("p",{children:"Fila superior: 50 pts"}),t.jsx("p",{children:"Fila inferior: 10 pts"}),t.jsx("p",{children:"¡Más oleadas más puntos!"})]}),t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"15px",padding:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#0080ff"},children:"⚠️ Supervivencia"}),t.jsx("p",{children:"3 vidas para empezar"}),t.jsx("p",{children:"Evita las balas enemigas"}),t.jsx("p",{children:"¡10 oleadas para ganar!"})]})]}),t.jsx("button",{onClick:J,style:{padding:"1rem 3rem",fontSize:"1.5rem",background:"linear-gradient(45deg, #ff0080, #00ff80)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",fontWeight:"bold"},onMouseOver:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.3)"},onMouseOut:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)"},children:"🛸 ¡COMENZAR BATALLA!"})]})})};export{pe as default};
