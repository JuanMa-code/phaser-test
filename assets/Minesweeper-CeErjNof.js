import{r as p,j as t}from"./index-Cg4ALjnl.js";import{A as q,C as M,G as j,T as v}from"./HTMLText-DvwlAgNv.js";const a=35,h={beginner:{cols:9,rows:9,mines:10},intermediate:{cols:16,rows:16,mines:40},expert:{cols:30,rows:16,mines:99}},Q=()=>{const x=p.useRef(null),[g,D]=p.useState("beginner"),[m,b]=p.useState("start"),[Z,A]=p.useState(h.beginner.mines),[L,C]=p.useState(0),[_,T]=p.useState(!0);p.useEffect(()=>{if(m!=="playing")return;const n=setInterval(()=>{C(c=>c+1)},1e3);return()=>clearInterval(n)},[m]),p.useEffect(()=>{if(m!=="playing")return;const n=h[g],c=new q({width:n.cols*a,height:n.rows*a+60,backgroundColor:12632256});x.current&&c.view instanceof Node&&x.current.appendChild(c.view);let l=[],u=!0,y=n.mines,B=!0,S=0;const w=new M;w.y=0,c.stage.addChild(w);const k=new j;k.beginFill(12566463),k.drawRect(0,0,n.cols*a,50),k.endFill(),w.addChild(k);const z=new v(`üí£ ${y}`,{fontSize:20,fill:16711680,fontWeight:"bold"});z.x=10,z.y=15,w.addChild(z);const F=new v(`‚è±Ô∏è ${S}`,{fontSize:20,fill:255,fontWeight:"bold"});F.x=n.cols*a-100,F.y=15,w.addChild(F);const N=setInterval(()=>{u&&(S++,C(S),F.text=`‚è±Ô∏è ${S}`)},1e3),E=new M;E.y=60,c.stage.addChild(E);function O(){l=[];for(let e=0;e<n.rows;e++){l[e]=[];for(let r=0;r<n.cols;r++){const i={mine:!1,revealed:!1,flagged:!1,adjacent:0,sprite:new M},o=new j;o.beginFill(12566463),o.lineStyle(2,8421504),o.drawRect(0,0,a,a),o.endFill();const d=new j;d.lineStyle(2,16777215),d.moveTo(0,a),d.lineTo(0,0),d.lineTo(a,0);const s=new j;s.lineStyle(2,8421504),s.moveTo(a,0),s.lineTo(a,a),s.lineTo(0,a),i.sprite.addChild(o),i.sprite.addChild(d),i.sprite.addChild(s),i.sprite.x=r*a,i.sprite.y=e*a,i.sprite.interactive=!0,i.sprite.cursor="pointer",i.sprite.on("pointerdown",f=>{u&&(f.data.button===0?(B&&(P(r,e),U(),B=!1),I(r,e)):f.data.button===2&&W(r,e))}),i.sprite.on("rightdown",f=>{f.stopPropagation(),u&&W(r,e)}),E.addChild(i.sprite),l[e][r]=i}}}function P(e,r){let i=0;for(;i<n.mines;){const o=Math.floor(Math.random()*n.cols),d=Math.floor(Math.random()*n.rows);!l[d][o].mine&&!(Math.abs(o-e)<=1&&Math.abs(d-r)<=1)&&(l[d][o].mine=!0,i++)}}function U(){for(let e=0;e<n.rows;e++)for(let r=0;r<n.cols;r++){if(l[e][r].mine)continue;let i=0;for(let o=-1;o<=1;o++)for(let d=-1;d<=1;d++){if(d===0&&o===0)continue;const s=r+d,f=e+o;s>=0&&s<n.cols&&f>=0&&f<n.rows&&l[f][s].mine&&i++}l[e][r].adjacent=i}}function I(e,r){if(!(e<0||e>=n.cols||r<0||r>=n.rows)&&!(l[r][e].revealed||l[r][e].flagged)){if(l[r][e].revealed=!0,R(e,r),l[r][e].mine){u=!1,b("lost"),Y();return}if(l[r][e].adjacent===0)for(let i=-1;i<=1;i++)for(let o=-1;o<=1;o++)o===0&&i===0||I(e+o,r+i);$()}}function W(e,r){l[r][e].revealed||(l[r][e].flagged=!l[r][e].flagged,l[r][e].flagged?y--:y++,A(y),z.text=`üí£ ${y}`,R(e,r))}function R(e,r){const i=l[r][e],o=i.sprite;for(;o.children.length>3;)o.removeChildAt(3);if(i.flagged&&!i.revealed){const s=new v("üö©",{fontSize:22,fontFamily:"Arial"});s.anchor.set(.5),s.x=a/2,s.y=a/2,o.addChild(s);return}if(!i.revealed)return;o.removeChildren();const d=new j;if(d.beginFill(i.mine?16711680:14737632),d.lineStyle(1,8421504),d.drawRect(0,0,a,a),d.endFill(),o.addChild(d),i.mine){const s=new v("üí•",{fontSize:22,fontFamily:"Arial"});s.anchor.set(.5),s.x=a/2,s.y=a/2,o.addChild(s)}else if(i.adjacent>0){const s=[255,32768,16711680,8388736,8388608,32896,0,8421504],f=new v(i.adjacent.toString(),{fontSize:18,fill:s[i.adjacent-1]||0,fontWeight:"bold",fontFamily:"Arial"});f.anchor.set(.5),f.x=a/2,f.y=a/2,o.addChild(f)}}function Y(){for(let e=0;e<n.rows;e++)for(let r=0;r<n.cols;r++)l[e][r].mine&&(l[e][r].revealed=!0,R(r,e))}function $(){let e=0;for(let r=0;r<n.rows;r++)for(let i=0;i<n.cols;i++)l[r][i].revealed&&!l[r][i].mine&&e++;e===n.cols*n.rows-n.mines&&(u=!1,b("won"))}return c.view&&"addEventListener"in c.view&&c.view.addEventListener("contextmenu",e=>e.preventDefault()),O(),()=>{u=!1,clearInterval(N),x.current&&c.view instanceof Node&&x.current.removeChild(c.view),c.destroy()}},[m,g]);const G=()=>{b("playing"),A(h[g].mines),C(0),T(!0)},H=()=>{b("playing"),A(h[g].mines),C(0),T(!0)};return m==="start"?t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #c0c0c0 0%, #808080 100%)",fontFamily:"Arial, sans-serif",padding:"1rem",overflowY:"auto"},children:t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"2rem",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",maxWidth:"500px",width:"95%",textAlign:"center",color:"white",margin:"1rem auto"},children:[t.jsx("h1",{style:{fontSize:"3rem",marginBottom:"1rem",background:"linear-gradient(45deg, #ff0000, #0000ff, #008000)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(255, 0, 0, 0.5)"},children:"üí£ MINESWEEPER"}),t.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1.5rem",opacity:.9,lineHeight:"1.4"},children:"¬°Encuentra todas las minas sin explotar ninguna!"}),t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"15px",padding:"1.2rem",marginBottom:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[t.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"1rem",color:"#fff"},children:"üéØ Selecciona Dificultad"}),t.jsx("div",{style:{display:"flex",gap:"0.8rem",justifyContent:"center",flexWrap:"wrap"},children:Object.entries(h).map(([n,c])=>t.jsxs("button",{onClick:()=>D(n),style:{padding:"0.6rem 1rem",fontSize:"0.9rem",background:g===n?"linear-gradient(45deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.2)",border:g===n?"2px solid #4CAF50":"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold",transition:"all 0.3s ease",textAlign:"center"},children:[t.jsx("div",{children:n.charAt(0).toUpperCase()+n.slice(1)}),t.jsxs("div",{style:{fontSize:"0.7rem",opacity:.8},children:[c.cols,"√ó",c.rows," - ",c.mines," minas"]})]},n))})]}),t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"15px",padding:"1.2rem",marginBottom:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[t.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"1rem",color:"#fff"},children:"üñ±Ô∏è Controles"}),t.jsxs("div",{style:{fontSize:"0.95rem",textAlign:"left",lineHeight:"1.4"},children:[t.jsx("p",{style:{marginBottom:"0.5rem"},children:"ÔøΩ Click izquierdo: Revelar casilla"}),t.jsx("p",{style:{marginBottom:"0.5rem"},children:"üö© Click derecho: Marcar con bandera"}),t.jsx("p",{children:"üí° Los n√∫meros indican minas adyacentes"})]})]}),t.jsx("button",{onClick:G,style:{fontSize:"1.2rem",padding:"0.8rem 2rem",background:"linear-gradient(45deg, #ff0000, #ff6600)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 4px 15px rgba(255, 0, 0, 0.3)",transition:"all 0.3s ease",transform:"translateY(0)",marginBottom:"1.5rem"},onMouseOver:n=>{n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 6px 20px rgba(255, 0, 0, 0.4)"},onMouseOut:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 15px rgba(255, 0, 0, 0.3)"},children:"üí• ¬°Comenzar a Desactivar!"}),t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"15px",padding:"1.2rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[t.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"1rem",color:"#fff"},children:"üí° Consejos Pro"}),t.jsxs("div",{style:{fontSize:"0.95rem",textAlign:"left",lineHeight:"1.4"},children:[t.jsx("p",{style:{marginBottom:"0.5rem"},children:"‚Ä¢ Comienza por las esquinas"}),t.jsx("p",{style:{marginBottom:"0.5rem"},children:"‚Ä¢ Usa los n√∫meros como pistas"}),t.jsx("p",{children:"‚Ä¢ ¬°Marca las minas con banderas!"})]})]})]})}):m==="won"||m==="lost"?t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:m==="won"?"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)":"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",fontFamily:"Arial, sans-serif",color:"white",padding:"2rem"},children:t.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[t.jsx("h1",{style:{fontSize:"3rem",margin:"0 0 1rem 0"},children:m==="won"?"üèÜ ¬°GANASTE!":"üí• ¬°BOOM!"}),t.jsxs("div",{style:{fontSize:"1.5rem",margin:"2rem 0"},children:[t.jsxs("p",{children:["‚è±Ô∏è Tiempo: ",t.jsxs("strong",{children:[L," segundos"]})]}),t.jsxs("p",{children:["üéØ Dificultad: ",t.jsx("strong",{children:g.charAt(0).toUpperCase()+g.slice(1)})]}),t.jsxs("p",{children:["üí£ Minas: ",t.jsx("strong",{children:h[g].mines})]}),m==="won"?t.jsx("p",{style:{color:"#90EE90"},children:"¬°Todas las minas desactivadas!"}):t.jsx("p",{style:{color:"#FFB6C1"},children:"Una mina explot√≥..."})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[t.jsx("button",{onClick:H,style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #ff6600, #ff0000)",border:"none",borderRadius:"50px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"üîÑ Reintentar"}),t.jsx("button",{onClick:()=>b("start"),style:{padding:"1rem 2rem",fontSize:"1.2rem",background:"linear-gradient(45deg, #808080, #c0c0c0)",border:"none",borderRadius:"50px",color:"black",cursor:"pointer",fontWeight:"bold"},children:"üè† Men√∫ Principal"})]})]})}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #c0c0c0 0%, #808080 100%)",minHeight:"100vh",fontFamily:"Arial, sans-serif",color:"black"},children:[t.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üí£ MINESWEEPER"}),t.jsx("div",{ref:x,style:{border:"3px solid #808080",borderRadius:"5px"}}),t.jsx("div",{style:{marginTop:"20px",fontSize:"1rem"},children:t.jsx("p",{children:"Click izquierdo: revelar | Click derecho: bandera"})})]})};export{Q as default};
