import{r as d,j as l}from"./index-vJFL1dzY.js";import{A as T,G as j}from"./HTMLText-CeZkFdUK.js";import{G as I,a as z}from"./GameOverScreen-DshzEBP7.js";const m=20,y=15,e=32,W=150,p={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0},w:{x:0,y:-1},s:{x:0,y:1},a:{x:-1,y:0},d:{x:1,y:0}},K=()=>{const w=d.useRef(null),F=d.useRef(null),[k,u]=d.useState(0),[g,x]=d.useState(!1),[v,G]=d.useState(!1);d.useEffect(()=>{if(g||!v)return;const i=new T({width:m*e,height:y*e,backgroundColor:1710638});F.current=i,w.current&&i.view instanceof Node&&w.current.appendChild(i.view);let o=[],c=p.ArrowRight,S=c,s={x:0,y:0},R=!1,b=0,f;function A(){let t=!1;for(;!t;)s.x=Math.floor(Math.random()*m),s.y=Math.floor(Math.random()*y),t=!o.some(r=>r.x===s.x&&r.y===s.y)}function M(){o=[{x:5,y:7},{x:4,y:7},{x:3,y:7}],c=p.ArrowRight,S=c,b=0,R=!1,u(0),x(!1),A(),C(),f&&clearInterval(f),f=window.setInterval(O,W)}function O(){if(R)return;c=S;const t={x:o[0].x+c.x,y:o[0].y+c.y};if(t.x<0||t.x>=m||t.y<0||t.y>=y||o.some(r=>r.x===t.x&&r.y===t.y)){R=!0,x(!0),C();return}o.unshift(t),t.x===s.x&&t.y===s.y?(b++,u(b),A()):o.pop(),C()}function C(){i.stage.removeChildren();const t=new j;t.lineStyle(1,3355443,.3);for(let n=0;n<=m;n++)t.moveTo(n*e,0),t.lineTo(n*e,y*e);for(let n=0;n<=y;n++)t.moveTo(0,n*e),t.lineTo(m*e,n*e);i.stage.addChild(t),o.forEach((n,h)=>{const a=new j;h===0?(a.beginFill(65280),a.drawRoundedRect(2,2,e-4,e-4,6),a.endFill(),a.beginFill(0),a.drawCircle(e*.3,e*.3,3),a.drawCircle(e*.7,e*.3,3),a.endFill()):(a.beginFill(39168),a.drawRoundedRect(3,3,e-6,e-6,4),a.endFill()),a.x=n.x*e,a.y=n.y*e,i.stage.addChild(a)});const r=new j;r.beginFill(16729943),r.drawCircle(e/2,e/2,e/2.5),r.endFill(),r.beginFill(65280),r.drawRect(e/2-2,e/4,4,8),r.endFill(),r.x=s.x*e,r.y=s.y*e,i.stage.addChild(r)}function E(t){const r=t.key.toLowerCase();if(r in p){const n=p[r];if(o.length>1){const h={x:o[0].x+n.x,y:o[0].y+n.y};if(h.x===o[1].x&&h.y===o[1].y)return}S=n,t.preventDefault()}}return window.addEventListener("keydown",E),M(),()=>{window.removeEventListener("keydown",E),f&&clearInterval(f),i.destroy(!0,{children:!0})}},[g,v]);const L=()=>{G(!0),x(!1),u(0)},D=()=>{x(!1),u(0)};return v?g?l.jsx(z,{score:k,onRestart:D,onMenu:()=>window.history.back(),theme:{primary:"#00ff00",secondary:"#32ff7e",accent:"#32ff7e",background:"linear-gradient(135deg, #2d5016 0%, #0f3460 50%, #16213e 100%)"}}):l.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[l.jsx("h1",{style:{marginBottom:"1rem",color:"#00ff00"},children:"ğŸ Snake"}),l.jsxs("div",{style:{marginBottom:"1rem",fontSize:"1.5rem",fontWeight:"bold"},children:["PuntuaciÃ³n: ",k]}),l.jsx("div",{style:{marginBottom:"1rem",color:"#666"},children:"Usa las flechas o WASD para moverte"}),l.jsx("div",{ref:w,style:{display:"inline-block",border:"3px solid #00ff00",borderRadius:"8px",overflow:"hidden"}})]}):l.jsx(I,{title:"ğŸ SNAKE",description:"Â¡Come manzanas y haz crecer tu serpiente sin chocarte!",instructions:[{title:"Controles",items:["WASD: Mover en todas direcciones","â†‘â†“â†â†’: TambiÃ©n puedes usar las flechas"],icon:"ğŸ®"},{title:"Objetivo",items:["ğŸ Come las manzanas rojas para crecer","âš ï¸ No choques contra las paredes o tu cola"],icon:"ğŸ¯"},{title:"Consejos",items:["Planifica tus movimientos","MantÃ©n espacio libre","Â¡La serpiente no puede ir hacia atrÃ¡s!"],icon:"ğŸ’¡"}],onStart:L,theme:{primary:"#00ff00",secondary:"#32ff7e",accent:"#32ff7e",background:"linear-gradient(135deg, #2d5016 0%, #0f3460 50%, #16213e 100%)"}})};export{K as default};
