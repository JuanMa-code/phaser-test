import{r as c,j as p}from"./index-vJFL1dzY.js";import{A as ne,C as se,G as R,T as V}from"./HTMLText-CeZkFdUK.js";import{G as oe,a as le}from"./GameOverScreen-DshzEBP7.js";const x=800,w=600,h=40,g=30,u=6,Z=5,$=10,ve=()=>{const m=c.useRef(null),[K,D]=c.useState(0),[ce,I]=c.useState(3),[Y,L]=c.useState(1),[T,S]=c.useState(!1),[F,_]=c.useState(!1),[G,j]=c.useState(!1);c.useEffect(()=>{if(!F||T)return;const n=new ne({width:x,height:w,backgroundColor:657946});m.current&&n.view instanceof Node&&m.current.appendChild(n.view);let d=!0,W=0,C=3,y=1;const z=new se;n.stage.addChild(z);for(let t=0;t<100;t++){const e=new R;e.beginFill(16777215),e.drawCircle(0,0,Math.random()*2),e.endFill(),e.x=Math.random()*x,e.y=Math.random()*w,e.alpha=Math.random()*.8+.2,z.addChild(e)}const a={sprite:new R,x:x/2,y:w-60};a.sprite.beginFill(65416),a.sprite.moveTo(0,-h/2),a.sprite.lineTo(-h/2,h/2),a.sprite.lineTo(h/2,h/2),a.sprite.closePath(),a.sprite.endFill(),a.sprite.lineStyle(2,65450),a.sprite.drawCircle(0,0,h/3),a.sprite.x=a.x,a.sprite.y=a.y,n.stage.addChild(a.sprite);let s=[],o=[],f=[],E=1,N=1,X=20;const b=new V("Score: 0",{fontSize:24,fill:16777215}),A=new V("Lives: 3",{fontSize:24,fill:16711680}),k=new V("Wave: 1",{fontSize:24,fill:65280});b.x=20,b.y=20,A.x=200,A.y=20,k.x=350,k.y=20,n.stage.addChild(b),n.stage.addChild(A),n.stage.addChild(k);function ee(t,e,r){const i={sprite:new R,x:t,y:e,width:g,height:g,active:!0},v=[16729156,16755268,4521796,4474111,16729343],M=v[r%v.length];return i.sprite.beginFill(M),i.sprite.drawRoundedRect(-g/2,-g/2,g,g,5),i.sprite.endFill(),i.sprite.beginFill(16777215),i.sprite.drawCircle(-8,-8,3),i.sprite.drawCircle(8,-8,3),i.sprite.endFill(),i.sprite.x=t,i.sprite.y=e,n.stage.addChild(i.sprite),i}function O(t,e,r){const i={sprite:new R,x:t,y:e,vy:r?-8:4,width:u,height:u*2,active:!0};return i.sprite.beginFill(r?65535:16711680),r?i.sprite.drawRoundedRect(-u/2,-u,u,u*2,2):i.sprite.drawCircle(0,0,u/2),i.sprite.endFill(),i.sprite.x=t,i.sprite.y=e,n.stage.addChild(i.sprite),i}function B(){s=[];for(let t=0;t<Z;t++)for(let e=0;e<$;e++){const r=80+e*60,i=80+t*50;s.push(ee(r,i,t))}}function te(){let t=!1;for(let e of s)if(e.active&&(e.x<=30&&E===-1||e.x>=x-30&&E===1)){t=!0;break}if(t){E*=-1;for(let e of s)if(e.active&&(e.y+=X,e.sprite.y=e.y,e.y>w-100)){d=!1,S(!0);return}N+=.2}else for(let e of s)e.active&&(e.x+=E*N,e.sprite.x=e.x);if(Math.random()<.005){const e=s.filter(r=>r.active);if(e.length>0){const r=e[Math.floor(Math.random()*e.length)];f.push(O(r.x,r.y+20,!1))}}}function ie(){for(let t=o.length-1;t>=0;t--){const e=o[t];e.active&&(e.y+=e.vy,e.sprite.y=e.y,e.y<0&&(e.active=!1,n.stage.removeChild(e.sprite),o.splice(t,1)))}for(let t=f.length-1;t>=0;t--){const e=f[t];e.active&&(e.y+=e.vy,e.sprite.y=e.y,e.y>w&&(e.active=!1,n.stage.removeChild(e.sprite),f.splice(t,1)))}}function ae(){for(let t=o.length-1;t>=0;t--){const e=o[t];if(e.active)for(let r=s.length-1;r>=0;r--){const i=s[r];if(!i.active)continue;const v=e.x-i.x,M=e.y-i.y;if(Math.sqrt(v*v+M*M)<20){if(e.active=!1,i.active=!1,n.stage.removeChild(e.sprite),n.stage.removeChild(i.sprite),o.splice(t,1),W+=(Z-Math.floor(r/$))*10,D(W),s.every(re=>!re.active)&&(y++,L(y),N=1+y*.5,B(),y>10)){d=!1,j(!0);return}break}}}for(let t=f.length-1;t>=0;t--){const e=f[t];if(!e.active)continue;const r=e.x-a.x,i=e.y-a.y;if(Math.sqrt(r*r+i*i)<25){e.active=!1,n.stage.removeChild(e.sprite),f.splice(t,1),C--,I(C),C<=0&&(d=!1,S(!0));break}}}function q(){d&&(te(),ie(),ae(),b.text=`Score: ${W}`,A.text=`Lives: ${C}`,k.text=`Wave: ${y}`,requestAnimationFrame(q))}const l={};function H(t){l[t.key]=!0,(t.key===" "||t.key==="ArrowUp"||t.key==="w"||t.key==="W")&&d&&o.length<3&&o.push(O(a.x,a.y-20,!0))}function P(t){l[t.key]=!1}function U(){d&&((l.ArrowLeft||l.a||l.A)&&(a.x=Math.max(30,a.x-5)),(l.ArrowRight||l.d||l.D)&&(a.x=Math.min(x-30,a.x+5)),a.sprite.x=a.x,requestAnimationFrame(U))}return window.addEventListener("keydown",H),window.addEventListener("keyup",P),B(),q(),U(),()=>{d=!1,window.removeEventListener("keydown",H),window.removeEventListener("keyup",P),m.current&&n.view instanceof Node&&m.current.removeChild(n.view),n.destroy()}},[F,T]);const J=()=>{_(!0),S(!1),j(!1),D(0),I(3),L(1)},Q=()=>{S(!1),j(!1),D(0),I(3),L(1)};return F?T||G?p.jsx(le,{score:K,onRestart:Q,onMenu:()=>_(!1),isVictory:G,customStats:[{label:"Oleadas Completadas",value:Y-1}],theme:{background:G?"linear-gradient(135deg, #0a1a0a 0%, #1a3a1a 100%)":"linear-gradient(135deg, #1a0a0a 0%, #3a1a1a 100%)",primary:"linear-gradient(45deg, #ff0080, #00ff80)",secondary:"linear-gradient(45deg, #0a0a1a, #1a1a3a)"}}):p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[p.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"ğŸ‘¾ SPACE INVADERS"}),p.jsx("div",{ref:m,style:{border:"2px solid #444",borderRadius:"10px"}}),p.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:p.jsx("p",{children:"â† â†’ A D para mover, Espacio â†‘ W para disparar"})})]}):p.jsx(oe,{title:"ğŸ‘¾ SPACE INVADERS",description:"Â¡Defiende la Tierra de la invasiÃ³n alienÃ­gena!",instructions:[{title:"Controles",items:["ğŸ® â† â†’ A D: Mover nave espacial","ğŸ’¥ Espacio â†‘ W: Disparar lÃ¡ser","âš¡ MÃ¡ximo 3 balas simultÃ¡neas"],icon:"ğŸ®"},{title:"Sistema de PuntuaciÃ³n",items:["ğŸ‘¾ AlienÃ­genas superiores: 50 puntos","ğŸ‘¾ AlienÃ­genas inferiores: 10 puntos","ğŸŒŠ MÃ¡s oleadas = mÃ¡s puntos bonus"],icon:"ğŸ“Š"},{title:"MisiÃ³n de Supervivencia",items:["â¤ï¸ Tienes 3 vidas para empezar","ğŸš« Evita las balas enemigas","ğŸ† Â¡Sobrevive 10 oleadas para ganar!"],icon:"ğŸ›¡ï¸"}],onStart:J,theme:{background:"linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%)",accent:"linear-gradient(45deg, #ff0080, #00ff80, #0080ff)",primary:"linear-gradient(45deg, #ff0080, #00ff80)"}})};export{ve as default};
