import{r as u,j as h}from"./index-vJFL1dzY.js";import{A as re,C as ae,G as E,T as _}from"./HTMLText-CeZkFdUK.js";import{G as oe,a as le}from"./GameOverScreen-DshzEBP7.js";const d=800,p=600,o=15,ce=40,fe=25,de=15,J=4,b=8,xe=()=>{const v=u.useRef(null),[Q,z]=u.useState(0),[pe,L]=u.useState(3),[ue,k]=u.useState(1),[I,D]=u.useState(!1),[G,H]=u.useState(!1);u.useEffect(()=>{if(!G||I)return;const r=new re({width:d,height:p,backgroundColor:17});v.current&&r.view instanceof Node&&v.current.appendChild(r.view);let x=!0,R=0,w=3,M=1,m=!1,F=0;const U=new ae;r.stage.addChild(U);for(let e=0;e<150;e++){const i=new E;i.beginFill(16777215),i.drawCircle(0,0,Math.random()*1.5),i.endFill(),i.x=Math.random()*d,i.y=Math.random()*p,i.alpha=Math.random()*.8+.2,U.addChild(i)}const t={sprite:new E,x:d/2,y:p/2,vx:0,vy:0,angle:0,size:o};let l=[],c=[];const a={};function W(){t.sprite.clear();const e=m&&Math.floor(Date.now()/100)%2?4473924:65535;t.sprite.beginFill(e,.3),t.sprite.lineStyle(2,e),t.sprite.moveTo(0,-o),t.sprite.lineTo(-o*.8,o*.8),t.sprite.lineTo(0,o*.4),t.sprite.lineTo(o*.8,o*.8),t.sprite.closePath(),t.sprite.endFill(),(a.ArrowUp||a.w||a.W)&&(t.sprite.beginFill(16729088,.7),t.sprite.lineStyle(2,16729088),t.sprite.moveTo(-o*.3,o*.8),t.sprite.lineTo(0,o*1.5+Math.random()*5),t.sprite.lineTo(o*.3,o*.8),t.sprite.closePath(),t.sprite.endFill())}const S=new _("Score: 0",{fontSize:24,fill:16777215}),A=new _("Lives: 3",{fontSize:24,fill:16711680}),C=new _("Level: 1",{fontSize:24,fill:65280});S.x=20,S.y=20,A.x=200,A.y=20,C.x=350,C.y=20,r.stage.addChild(S),r.stage.addChild(A),r.stage.addChild(C),t.sprite.x=t.x,t.sprite.y=t.y,r.stage.addChild(t.sprite),W();function P(e,i,n){const s={sprite:new E,x:e,y:i,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4,angle:Math.random()*Math.PI*2,size:n==="large"?ce:n==="medium"?fe:de,active:!0,type:n},T=s.size,g=8+Math.floor(Math.random()*4),O=[11184810,8947848,6710886];s.sprite.beginFill(O[Math.floor(Math.random()*O.length)]),s.sprite.lineStyle(1,13421772);for(let y=0;y<g;y++){const f=y/g*Math.PI*2,X=T*(.8+Math.random()*.4),Z=Math.cos(f)*X,Y=Math.sin(f)*X;y===0?s.sprite.moveTo(Z,Y):s.sprite.lineTo(Z,Y)}return s.sprite.closePath(),s.sprite.endFill(),s.sprite.x=e,s.sprite.y=i,r.stage.addChild(s.sprite),s}function ee(e,i,n){const s={sprite:new E,x:e,y:i,vx:Math.cos(n)*12,vy:Math.sin(n)*12,angle:n,size:J,active:!0};return s.sprite.beginFill(16776960),s.sprite.drawCircle(0,0,J),s.sprite.endFill(),s.sprite.x=e,s.sprite.y=i,r.stage.addChild(s.sprite),s}function q(){l=[];const e=4+M*2;for(let i=0;i<e;i++){let n,s;do n=Math.random()*d,s=Math.random()*p;while(Math.hypot(n-t.x,s-t.y)<100);l.push(P(n,s,"large"))}}function B(e){e.x<-e.size&&(e.x=d+e.size),e.x>d+e.size&&(e.x=-e.size),e.y<-e.size&&(e.y=p+e.size),e.y>p+e.size&&(e.y=-e.size),e.sprite.x=e.x,e.sprite.y=e.y}function te(){if(!x)return;(a.ArrowLeft||a.a||a.A)&&(t.angle-=.2),(a.ArrowRight||a.d||a.D)&&(t.angle+=.2),(a.ArrowUp||a.w||a.W)&&(t.vx+=Math.cos(t.angle)*.3,t.vy+=Math.sin(t.angle)*.3),t.vx*=.99,t.vy*=.99;const e=Math.hypot(t.vx,t.vy);e>b&&(t.vx=t.vx/e*b,t.vy=t.vy/e*b),t.x+=t.vx,t.y+=t.vy,B(t),t.sprite.rotation=t.angle+Math.PI/2,W(),m&&(F--,F<=0&&(m=!1))}function ie(){for(let e of l)e.active&&(e.x+=e.vx,e.y+=e.vy,e.angle+=.02,e.sprite.rotation=e.angle,B(e))}function se(){for(let e=c.length-1;e>=0;e--){const i=c[e];if(i.active){if(i.x+=i.vx,i.y+=i.vy,i.x<0||i.x>d||i.y<0||i.y>p){i.active=!1,r.stage.removeChild(i.sprite),c.splice(e,1);continue}i.sprite.x=i.x,i.sprite.y=i.y}}}function ne(){for(let e=c.length-1;e>=0;e--){const i=c[e];if(i.active)for(let n=l.length-1;n>=0;n--){const s=l[n];if(!s.active)continue;const T=i.x-s.x,g=i.y-s.y;if(Math.sqrt(T*T+g*g)<s.size){i.active=!1,s.active=!1,r.stage.removeChild(i.sprite),r.stage.removeChild(s.sprite),c.splice(e,1);const y=s.type==="large"?20:s.type==="medium"?50:100;if(R+=y,z(R),s.type==="large")for(let f=0;f<2;f++)l.push(P(s.x,s.y,"medium"));else if(s.type==="medium")for(let f=0;f<2;f++)l.push(P(s.x,s.y,"small"));l.splice(n,1);break}}}if(!m)for(let e of l){if(!e.active)continue;const i=t.x-e.x,n=t.y-e.y;if(Math.sqrt(i*i+n*n)<e.size+t.size){w--,L(w),m=!0,F=180,t.x=d/2,t.y=p/2,t.vx=0,t.vy=0,t.angle=0,w<=0&&(x=!1,D(!0));break}}l.every(e=>!e.active)&&(M++,k(M),q())}function N(){x&&(te(),ie(),se(),ne(),S.text=`Score: ${R}`,A.text=`Lives: ${w}`,C.text=`Level: ${M}`,requestAnimationFrame(N))}function $(e){if(a[e.key]=!0,e.key===" "&&x&&c.length<4){const i=t.x+Math.cos(t.angle)*t.size,n=t.y+Math.sin(t.angle)*t.size;c.push(ee(i,n,t.angle))}}function K(e){a[e.key]=!1}return window.addEventListener("keydown",$),window.addEventListener("keyup",K),q(),N(),()=>{x=!1,window.removeEventListener("keydown",$),window.removeEventListener("keyup",K),v.current&&r.view instanceof Node&&v.current.removeChild(r.view),r.destroy()}},[G,I]);const V=()=>{H(!0),D(!1),z(0),L(3),k(1)},j=()=>{D(!1),z(0),L(3),k(1)};return G?I?h.jsx(le,{score:Q,onRestart:j,onMenu:()=>H(!1),theme:{background:"linear-gradient(135deg, #110000 0%, #220011 100%)",primaryColor:"#00ffff",secondaryColor:"#ffff00",accentColor:"#ff0080",titleGradient:"linear-gradient(45deg, #ffffff, #00ffff, #ffff00, #ff0080)",buttonGradient:"linear-gradient(45deg, #00ffff, #ffff00)"}}):h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"linear-gradient(135deg, #000011 0%, #001122 100%)",minHeight:"100dvh",fontFamily:"Arial, sans-serif",color:"white"},children:[h.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"2.5rem"},children:"üöÄ ASTEROIDS"}),h.jsx("div",{ref:v,style:{border:"2px solid #444",borderRadius:"10px"}}),h.jsx("div",{style:{marginTop:"20px",fontSize:"1.2rem"},children:h.jsx("p",{children:"‚Üê ‚Üí A D rotar, ‚Üë W acelerar, Espacio disparar"})})]}):h.jsx(oe,{title:"üöÄ ASTEROIDS",description:"¬°Navega por el espacio y destruye asteroides!",instructions:[{title:"Controles",items:["‚Üê ‚Üí A D: Rotar nave","‚Üë W: Acelerar","Espacio: Disparar"],icon:"üéÆ"},{title:"Caracter√≠sticas",items:["Inercia y gravedad cero","Teletransporte en bordes","3 segundos invulnerable"],icon:"‚≠ê"}],onStart:V,theme:{background:"linear-gradient(135deg, #000011 0%, #001122 100%)",primary:"#00ffff",secondary:"#ffff00",accent:"#ff0080"}})};export{xe as default};
