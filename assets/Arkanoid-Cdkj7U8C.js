import{r as c,j as y}from"./index-vJFL1dzY.js";import{A as B,G as p,T as v}from"./HTMLText-CeZkFdUK.js";import{G as O,a as V}from"./GameOverScreen-DshzEBP7.js";const l=800,u=600,d=100,f=20,i=10,_=8,g=5,Q=()=>{const S=c.useRef(null),[k,E]=c.useState(!1),[L,A]=c.useState(!1),[H,C]=c.useState(0),[U,R]=c.useState(3),[q,$]=c.useState(1),[h,D]=c.useState(!1);c.useEffect(()=>{if(!k||L||h)return;const o=new B({width:l,height:u,backgroundColor:986915});S.current&&o.view instanceof Node&&S.current.appendChild(o.view);const b=new p;b.beginFill(1710638),b.drawRect(0,0,l,u),b.endFill(),o.stage.addChild(b);const r=new p;r.beginFill(5090295),r.drawRoundedRect(-d/2,-f/2,d,f,8),r.endFill(),r.lineStyle(2,7651580,.8),r.drawRoundedRect(-d/2,-f/2,d,f,8),r.x=l/2,r.y=u-50,o.stage.addChild(r);const e=new p;e.beginFill(16697943),e.drawCircle(0,0,i),e.endFill(),e.lineStyle(2,16766011),e.drawCircle(0,0,i),e.x=l/2,e.y=u-150,o.stage.addChild(e);const x=[],j=[16739179,5164484,4569041,9883316,16771751,14524637,10016968];for(let t=0;t<6;t++)for(let s=0;s<10;s++){const n=new p,w=j[t%j.length];n.beginFill(w),n.drawRoundedRect(0,0,70,25,5),n.endFill(),n.lineStyle(2,16777215,.3),n.drawRoundedRect(0,0,70,25,5),n.x=25+s*75,n.y=60+t*30,o.stage.addChild(n),x.push(n)}let a={x:g,y:-g},G=0,m=3,T=!1,F=!1;const M=t=>{const s=t.key.toLowerCase();s==="a"&&(T=!0),s==="d"&&(F=!0)},P=t=>{const s=t.key.toLowerCase();s==="a"&&(T=!1),s==="d"&&(F=!1)};window.addEventListener("keydown",M),window.addEventListener("keyup",P);function I(){o.stage.children.forEach(w=>{w instanceof v&&o.stage.removeChild(w)});const t=new v(`Score: ${G}`,{fill:16777215,fontSize:20,fontWeight:"bold"});t.x=20,t.y=20,o.stage.addChild(t);const s=new v(`Lives: ${m}`,{fill:16739179,fontSize:20,fontWeight:"bold"});s.x=l-120,s.y=20,o.stage.addChild(s);const n=new v(`Level: ${q}`,{fill:5164484,fontSize:20,fontWeight:"bold"});n.x=l/2-40,n.y=20,o.stage.addChild(n)}return o.ticker.add(()=>{if(T&&r.x>d/2&&(r.x-=_),F&&r.x<l-d/2&&(r.x+=_),e.x+=a.x,e.y+=a.y,(e.x<=i||e.x>=l-i)&&(a.x*=-1,e.x=Math.max(i,Math.min(l-i,e.x))),e.y<=i&&(a.y*=-1,e.y=i),e.y+i>=r.y-f/2&&e.y<=r.y+f/2&&e.x>=r.x-d/2&&e.x<=r.x+d/2&&a.y>0){a.y=-Math.abs(a.y),e.y=r.y-f/2-i;const t=(e.x-r.x)/(d/2);a.x=t*g}for(let t=x.length-1;t>=0;t--){const s=x[t];if(e.x+i>s.x&&e.x-i<s.x+70&&e.y+i>s.y&&e.y-i<s.y+25){if(o.stage.removeChild(s),x.splice(t,1),a.y*=-1,G+=10,C(G),x.length===0){D(!0);return}break}}if(e.y>u)if(m--,R(m),m<=0){A(!0);return}else e.x=l/2,e.y=u-150,a={x:g,y:-g};I()}),I(),()=>{window.removeEventListener("keydown",M),window.removeEventListener("keyup",P),o.destroy(!0,{children:!0})}},[k,L,h]);const W=()=>{E(!0),C(0),R(3),A(!1),D(!1)},z=()=>{E(!1),A(!1),D(!1),setTimeout(()=>{C(0),R(3),E(!0)},100)};return k?L||h?y.jsx(V,{score:H,isVictory:h,onRestart:z,onMenu:()=>window.history.back(),theme:{primary:"#feca57",secondary:"#ff6b6b",accent:"#ff9ff3",background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)"}}):y.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[y.jsx("h1",{style:{marginBottom:"1rem",color:"#4dabf7"},children:"ðŸ§± Arkanoid"}),y.jsx("div",{style:{marginBottom:"1rem",color:"#666"},children:"Usa A y D para mover la paleta â€¢ Â¡Destruye todos los bloques!"}),y.jsx("div",{ref:S,style:{display:"inline-block",border:"3px solid #4dabf7",borderRadius:"8px",overflow:"hidden"}})]}):y.jsx(O,{title:"ðŸ§± ARKANOID",description:"Â¡Destruye todos los bloques!",instructions:[{title:"Controles",items:["A: Mover izquierda","D: Mover derecha","Evita que la pelota caiga"],icon:"ðŸŽ®"},{title:"Reglas",items:["3 Vidas","10 pts/bloque","FÃ­sica realista"],icon:"ðŸ“‹"}],onStart:W,theme:{primary:"#feca57",secondary:"#ff6b6b",accent:"#ff9ff3",background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)"}})};export{Q as default};
