import{r as h,j as l}from"./index-DT6De0vj.js";import{P as a}from"./phaser-CtSIbetW.js";import{G as P,a as x}from"./GameOverScreen-DSWsITTW.js";const r=800,n=600,f=20,b=100,m=12,g=400,v=300,I=800;class A extends a.Scene{playerPaddle;aiPaddle;ball;centerLine;cursors;wKey;sKey;ballVelocity;playerScore=0;aiScore=0;isGameOver=!1;onScoreUpdate;onGameOver;constructor(e,t){super("PongScene"),this.onScoreUpdate=e,this.onGameOver=t}create(){this.centerLine=this.add.graphics(),this.centerLine.lineStyle(3,4473924,.8);for(let t=0;t<n;t+=20)this.centerLine.moveTo(r/2,t),this.centerLine.lineTo(r/2,t+10);this.centerLine.strokePath(),this.playerPaddle=this.add.rectangle(40,n/2,f,b,5090295),this.physics.add.existing(this.playerPaddle),this.playerPaddle.body.setImmovable(!0),this.playerPaddle.body.setCollideWorldBounds(!0),this.aiPaddle=this.add.rectangle(r-40,n/2,f,b,16729943),this.physics.add.existing(this.aiPaddle),this.aiPaddle.body.setImmovable(!0),this.aiPaddle.body.setCollideWorldBounds(!0),this.ball=this.add.circle(r/2,n/2,m,16697943),this.physics.add.existing(this.ball);const e=this.ball.body;e.setCollideWorldBounds(!0),e.setBounce(1,1),e.setCircle(m),this.cursors=this.input.keyboard.createCursorKeys(),this.wKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.W),this.sKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.S),this.resetBall()}update(){this.isGameOver||(this.handlePlayerInput(),this.handleAI(),this.checkCollisions(),this.checkScore())}handlePlayerInput(){const e=this.playerPaddle.body;this.cursors.up.isDown||this.wKey.isDown?e.setVelocityY(-g):this.cursors.down.isDown||this.sKey.isDown?e.setVelocityY(g):e.setVelocityY(0)}handleAI(){const e=this.aiPaddle.body;this.ball.body;const t=this.ball.y-this.aiPaddle.y,i=250;Math.abs(t)>10?t>0?e.setVelocityY(i):e.setVelocityY(-i):e.setVelocityY(0)}checkCollisions(){this.ball.body,this.physics.collide(this.ball,this.playerPaddle,()=>{this.hitPaddle(this.playerPaddle)}),this.physics.collide(this.ball,this.aiPaddle,()=>{this.hitPaddle(this.aiPaddle)})}hitPaddle(e){const t=this.ball.body,i=t.velocity.length(),s=Math.min(i*1.05,I),y=(this.ball.y-e.y)/(b/2)*45,p=e===this.playerPaddle?1:-1,o=new a.Math.Vector2;o.setToPolar(a.Math.DegToRad(y),s),p===1?t.setVelocity(Math.abs(o.x),o.y):t.setVelocity(-Math.abs(o.x),o.y)}checkScore(){this.ball.body,this.ball.x<0?(this.aiScore++,this.onScoreUpdate(this.playerScore,this.aiScore),this.aiScore>=5?this.gameOver("AI"):this.resetBall()):this.ball.x>r&&(this.playerScore++,this.onScoreUpdate(this.playerScore,this.aiScore),this.playerScore>=5?this.gameOver("Jugador"):this.resetBall())}resetBall(){this.ball.setPosition(r/2,n/2);const e=this.ball.body,t=a.Math.Between(-45,45),i=Math.random()>.5?1:-1,s=new a.Math.Vector2;s.setToPolar(a.Math.DegToRad(t),v),i===1?e.setVelocity(Math.abs(s.x),s.y):e.setVelocity(-Math.abs(s.x),s.y)}gameOver(e){this.isGameOver=!0,this.ball.body.setVelocity(0,0),this.onGameOver(e)}}const M=()=>{const[d,e]=h.useState("start"),[t,i]=h.useState({player:0,ai:0}),[s,u]=h.useState(""),c=h.useRef(null);h.useEffect(()=>{if(d==="playing"){const p={type:a.AUTO,width:r,height:n,parent:"phaser-game",backgroundColor:"#0f0f23",physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:new A((o,S)=>i({player:o,ai:S}),o=>{u(o),e("gameover")})};return c.current=new a.Game(p),()=>{c.current&&(c.current.destroy(!0),c.current=null)}}},[d]);const y=()=>{i({player:0,ai:0}),e("playing")};return d==="start"?l.jsx(P,{title:"üèì PONG",description:"El cl√°sico juego de tenis de mesa arcade",instructions:[{title:"Controles",items:["W / Flecha Arriba: Mover arriba","S / Flecha Abajo: Mover abajo","El primero en llegar a 5 puntos gana"],icon:"üéÆ"},{title:"Mec√°nicas",items:["La pelota acelera con cada golpe","Golpea con los bordes para cambiar el √°ngulo","¬°Vence a la IA!"],icon:"‚ö°"}],onStart:y,theme:{primary:"#4facfe",secondary:"#00f2fe",accent:"#a8edea",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}):d==="gameover"?l.jsx(x,{score:t.player,isVictory:s==="Jugador",onRestart:y,onMenu:()=>e("start"),theme:{primary:"#4facfe",secondary:"#00f2fe",accent:"#a8edea",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},customStats:[{label:"Jugador",value:t.player},{label:"IA",value:t.ai},{label:"Resultado",value:s==="Jugador"?"¬°VICTORIA!":"DERROTA"}]}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",background:"#0f0f23",minHeight:"100dvh",color:"white"},children:[l.jsx("h1",{style:{margin:"0 0 20px 0",color:"#4dabf7"},children:"üèì PONG"}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",marginBottom:"1rem",fontSize:"2rem",fontWeight:"bold"},children:[l.jsxs("span",{style:{color:"#4dabf7"},children:["Jugador: ",t.player]}),l.jsxs("span",{style:{color:"#ff4757"},children:["AI: ",t.ai]})]}),l.jsx("div",{id:"phaser-game",style:{border:"3px solid #4dabf7",borderRadius:"8px",overflow:"hidden"}}),l.jsx("div",{style:{marginTop:"20px",color:"#666"},children:"Usa W/S o las flechas para moverte"})]})};export{M as default};
