import{r as R,j as D}from"./index-Bp0Tw0QP.js";import{A as I,G as A,T as F}from"./HTMLText-CfZOicZQ.js";const c=20,f=15,t=32,T=120,C={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},O=()=>{const u=R.useRef(null),L=R.useRef(null);return R.useEffect(()=>{const o=new I({width:c*t,height:f*t,backgroundColor:2236962});L.current=o,u.current&&o.view instanceof Node&&u.current.appendChild(o.view);let n=[],d=C.ArrowRight,g=d,a={x:0,y:0},x=!1,p=0,y;function E(){let e=!1;for(;!e;)a.x=Math.floor(Math.random()*c),a.y=Math.floor(Math.random()*f),e=!n.some(r=>r.x===a.x&&r.y===a.y)}function S(){n=[{x:5,y:7},{x:4,y:7},{x:3,y:7}],d=C.ArrowRight,g=d,p=0,x=!1,E(),m(),y&&clearInterval(y),y=window.setInterval(b,T)}function b(){if(x)return;d=g;const e={x:n[0].x+d.x,y:n[0].y+d.y};if(e.x<0||e.x>=c||e.y<0||e.y>=f||n.some(r=>r.x===e.x&&r.y===e.y)){x=!0,m();return}n.unshift(e),e.x===a.x&&e.y===a.y?(p++,E()):n.pop(),m()}function m(){o.stage.removeChildren(),n.forEach((l,s)=>{const i=new A;i.beginFill(s===0?65280:39168),i.drawRect(0,0,t,t),i.endFill(),i.x=l.x*t,i.y=l.y*t,o.stage.addChild(i)});const e=new A;e.beginFill(16711680),e.drawCircle(t/2,t/2,t/2.2),e.endFill(),e.x=a.x*t,e.y=a.y*t,o.stage.addChild(e);const r=new F(`Score: ${p}`,{fill:"#fff",fontSize:18});if(r.x=8,r.y=8,o.stage.addChild(r),x){const l="Game Over! Pulsa espacio para reiniciar",s=new F(l,{fill:"#ff0000",fontSize:24}),i=s.width,v=s.height,w=16,h=new A;h.beginFill(16777215,.85),h.drawRect((c*t-i)/2-w,(f*t-v)/2-w,i+w*2,v+w*2),h.endFill(),o.stage.addChild(h),s.x=(c*t-i)/2,s.y=(f*t-v)/2,o.stage.addChild(s)}}function k(e){if(x&&e.code==="Space"){S();return}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){const r=C[e.key];if(n.length>1){const l={x:n[0].x+r.x,y:n[0].y+r.y};if(l.x===n[1].x&&l.y===n[1].y)return}g=r}}return window.addEventListener("keydown",k),S(),()=>{window.removeEventListener("keydown",k),y&&clearInterval(y),o.destroy(!0,{children:!0})}},[]),D.jsx("div",{ref:u,style:{width:c*t,height:f*t+48,margin:"auto"}})};export{O as default};
